/*! For license information please see main.3664bf2b.js.LICENSE.txt */
!function(){var e={523:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=n(7)},function(e,t){e.exports=n(791)},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(0),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=0,s=r.forwardRef((function(e,t){var n=e.title,i=void 0===n?null:n,s=e.description,u=void 0===s?null:s,l=e.size,c=void 0===l?null:l,f=e.color,d=void 0===f?"currentColor":f,h=e.horizontal,p=void 0===h?null:h,v=e.vertical,m=void 0===v?null:v,g=e.rotate,y=void 0===g?null:g,_=e.spin,b=void 0===_?null:_,w=e.style,k=void 0===w?{}:w,C=e.children,S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);a++;var E,O=null!==b&&b,x=r.Children.map(C,(function(e){var t=e;!0!==O&&(O=!0===(null===b?t.props.spin:b));var n=t.props.size;"number"==typeof c&&"number"==typeof t.props.size&&(n=t.props.size/c);var i={size:n,color:null===d?t.props.color:d,horizontal:null===p?t.props.horizontal:p,vertical:null===m?t.props.vertical:m,rotate:null===y?t.props.rotate:y,spin:null===b?t.props.spin:b,inStack:!0};return r.cloneElement(t,i)}));null!==c&&(k.width="string"==typeof c?c:1.5*c+"rem");var T,R="stack_labelledby_"+a,I="stack_describedby_"+a;if(i)E=u?R+" "+I:R;else if(T="presentation",u)throw new Error("title attribute required when description is set");return r.createElement("svg",o({ref:t,viewBox:"0 0 24 24",style:k,role:T,"aria-labelledby":E},S),i&&r.createElement("title",{id:R},i),u&&r.createElement("desc",{id:I},u),O&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),x)}));s.displayName="Stack",s.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},s.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var u=s;n.d(t,"Icon",(function(){return f})),n.d(t,"Stack",(function(){return u}));var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c=0,f=r.forwardRef((function(e,t){var n=e.path,i=e.id,o=void 0===i?++c:i,a=e.title,s=void 0===a?null:a,u=e.description,f=void 0===u?null:u,d=e.size,h=void 0===d?null:d,p=e.color,v=void 0===p?"currentColor":p,m=e.horizontal,g=void 0!==m&&m,y=e.vertical,_=void 0!==y&&y,b=e.rotate,w=void 0===b?0:b,k=e.spin,C=void 0!==k&&k,S=e.style,E=void 0===S?{}:S,O=e.inStack,x=void 0!==O&&O,T=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),R={},I=[];null!==h&&(x?I.push("scale("+h+")"):(E.width="string"==typeof h?h:1.5*h+"rem",E.height=E.width)),g&&I.push("scaleX(-1)"),_&&I.push("scaleY(-1)"),0!==w&&I.push("rotate("+w+"deg)"),null!==v&&(R.fill=v);var P=r.createElement("path",l({d:n,style:R},x?T:{})),A=P;I.length>0&&(E.transform=I.join(" "),E.transformOrigin="center",x&&(A=r.createElement("g",{style:E},P,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var N,M=A,D=!0===C||"number"!=typeof C?2:C,L=!x&&(g||_);if(D<0&&(L=!L),C&&(M=r.createElement("g",{style:{animation:"spin"+(L?"-inverse":"")+" linear "+Math.abs(D)+"s infinite",transformOrigin:"center"}},A,!(g||_||0!==w)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),x)return M;var j,U="icon_labelledby_"+o,F="icon_describedby_"+o;if(s)N=f?U+" "+F:U;else if(j="presentation",f)throw new Error("title attribute required when description is set");return r.createElement("svg",l({ref:t,viewBox:"0 0 24 24",style:E,role:j,"aria-labelledby":N},T),s&&r.createElement("title",{id:U},s),f&&r.createElement("desc",{id:F},f),!x&&C&&(L?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),M)}));f.displayName="Icon",f.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},f.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},t.default=f}])},484:function(e){var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=42)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return c})),n.d(t,"__generator",(function(){return f})),n.d(t,"__createBinding",(function(){return d})),n.d(t,"__exportStar",(function(){return h})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return v})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return g})),n.d(t,"__spreadArray",(function(){return y})),n.d(t,"__await",(function(){return _})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return k})),n.d(t,"__makeTemplateObject",(function(){return C})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return O})),n.d(t,"__classPrivateFieldGet",(function(){return x})),n.d(t,"__classPrivateFieldSet",(function(){return T}));var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var d=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function h(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||d(t,e,n)}function p(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof _?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function k(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var S=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&d(t,e,n);return S(t,e),t}function O(e){return e&&e.__esModule?e:{default:e}}function x(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function T(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.allToUpperCase=t.allToLowerCase=t.encodeBody=t.decodeBody=t.Format=t.promisify=t.trim=t.arrChooseN=t.randomHexString=t.randomString=t.cheapRandStr=t.dataSizeBytes=t.inspectBody=t.inspectError=t.isErrorInfoOrPartialErrorInfo=t.now=t.parseQueryString=t.toQueryString=t.arrPopRandomElement=t.defaultPostHeaders=t.defaultGetHeaders=t.allSame=t.arrEvery=t.arrFilter=t.arrMap=t.safeArrForEach=t.arrForEach=t.forInOwnNonNullProperties=t.valuesArray=t.keysArray=t.arrWithoutValue=t.arrDeleteValue=t.arrIn=t.arrIndexOf=t.arrSubtract=t.arrIntersectOb=t.arrIntersect=t.intersect=t.containsValue=t.inherits=t.prototypicalClone=t.shallowClone=t.isEmptyArg=t.isOnlyPropIn=t.isEmpty=t.isObject=t.ensureArray=t.isArray=t.copy=t.mixin=void 0,t.toBase64=t.matchDerivedChannel=t.shallowEquals=t.getGlobalObject=t.getJitterCoefficient=t.getBackoffCoefficient=void 0;var r=n(0),i=r.__importDefault(n(3)),o=r.__importStar(n(8)),a=r.__importDefault(n(4)),s=n(11),u=n(30);function l(e){return Math.floor(Math.random()*e.length)}function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];if(!i)break;var o=Object.prototype.hasOwnProperty;for(var a in i)o&&!o.call(i,a)||(e[a]=i[a])}return e}function f(e){return null===e||void 0===e}function d(e,t){var n=function(){};n.prototype=e;var r=new n;return t&&c(r,t),r}function h(e,n){for(var r=[],i=0;i<e.length;i++){var o=e[i];-1!=(0,t.arrIndexOf)(n,o)&&r.push(o)}return r}function p(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];i in t&&n.push(i)}return n}function v(e,n){var r=(0,t.arrIndexOf)(e,n),i=-1!=r;return i&&e.splice(r,1),i}t.mixin=c,t.copy=function(e){return c({},e)},t.isArray=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t.ensureArray=function(e){return f(e)?[]:(0,t.isArray)(e)?e:[e]},t.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.isOnlyPropIn=function(e,t){for(var n in e)if(n!==t)return!1;return!0},t.isEmptyArg=f,t.shallowClone=function(e){var t=new Object;for(var n in e)t[n]=e[n];return t},t.prototypicalClone=d,t.inherits=function(e,t){i.default.Config.inherits?i.default.Config.inherits(e,t):(e.super_=t,e.prototype=d(t.prototype,{constructor:e}))},t.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},t.intersect=function(e,n){return(0,t.isArray)(n)?h(e,n):p(e,n)},t.arrIntersect=h,t.arrIntersectOb=p,t.arrSubtract=function(e,n){for(var r=[],i=0;i<e.length;i++){var o=e[i];-1==(0,t.arrIndexOf)(n,o)&&r.push(o)}return r},t.arrIndexOf=Array.prototype.indexOf?function(e,t,n){return e.indexOf(t,n)}:function(e,t,n){n=n||0;for(var r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.arrIn=function(e,n){return-1!==(0,t.arrIndexOf)(e,n)},t.arrDeleteValue=v,t.arrWithoutValue=function(e,t){var n=e.slice();return v(n,t),n},t.keysArray=function(e,t){var n=[];for(var r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||n.push(r);return n},t.valuesArray=function(e,t){var n=[];for(var r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||n.push(e[r]);return n},t.forInOwnNonNullProperties=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n]&&t(n)},t.arrForEach=Array.prototype.forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)t(e[r],r,e)},t.safeArrForEach=function(e,n){return(0,t.arrForEach)(e.slice(),n)},t.arrMap=Array.prototype.map?function(e,t){return e.map(t)}:function(e,t){for(var n=[],r=e.length,i=0;i<r;i++)n.push(t(e[i],i,e));return n},t.arrFilter=Array.prototype.filter?function(e,t){return e.filter(t)}:function(e,t){for(var n=[],r=e.length,i=0;i<r;i++)t(e[i])&&n.push(e[i]);return n},t.arrEvery=Array.prototype.every?function(e,t){return e.every(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)if(!t(e[r],r,e))return!1;return!0},t.allSame=function(e,n){if(0===e.length)return!0;var r=e[0][n];return(0,t.arrEvery)(e,(function(e){return e[n]===r}))};var m,g={json:"application/json",jsonp:"application/javascript",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack"};function y(e){return e.splice(l(e),1)[0]}t.defaultGetHeaders=function(e,t){return{accept:g[t||m.json],"X-Ably-Version":o.default.protocolVersion.toString(),"Ably-Agent":(0,o.getAgentString)(e)}},t.defaultPostHeaders=function(e,t){var n;return{accept:n=g[t||m.json],"content-type":n,"X-Ably-Version":o.default.protocolVersion.toString(),"Ably-Agent":(0,o.getAgentString)(e)}},t.arrPopRandomElement=y,t.toQueryString=function(e){var t=[];if(e)for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""},t.parseQueryString=function(e){for(var t,n=/([^?&=]+)=?([^&]*)/g,r={};t=n.exec(e);)r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return r},t.now=Date.now||function(){return(new Date).getTime()},t.isErrorInfoOrPartialErrorInfo=function(e){return"object"==typeof e&&null!==e&&("ErrorInfo"==e.constructor.name||"PartialErrorInfo"==e.constructor.name)},t.inspectError=function(e){var t,n;return e instanceof Error||"ErrorInfo"===(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)||"PartialErrorInfo"===(null===(n=null===e||void 0===e?void 0:e.constructor)||void 0===n?void 0:n.name)?i.default.Config.inspect(e):e.toString()},t.inspectBody=function(e){return i.default.BufferUtils.isBuffer(e)?e.toString():"string"===typeof e?e:i.default.Config.inspect(e)},t.dataSizeBytes=function(e){if(i.default.BufferUtils.isBuffer(e))return i.default.BufferUtils.byteLength(e);if("string"===typeof e)return i.default.Config.stringByteSize(e);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof e)},t.cheapRandStr=function(){return String(Math.random()).substr(2)},t.randomString=function(e){if(i.default.Config.getRandomValues&&"undefined"!==typeof Uint8Array){var t=new Uint8Array(e);return i.default.Config.getRandomValues(t),i.default.BufferUtils.base64Encode(t)}for(var n=i.default.BufferUtils.base64CharSet,r=Math.round(4*e/3),o="",a=0;a<r;a++)o+=n[l(n)];return o},t.randomHexString=function(e){if(i.default.Config.getRandomValues&&"undefined"!==typeof Uint8Array){var t=new Uint8Array(e);return i.default.Config.getRandomValues(t),i.default.BufferUtils.hexEncode(t)}for(var n=i.default.BufferUtils.hexCharSet,r=2*e,o="",a=0;a<r;a++)o+=n[l(n)];return o},t.arrChooseN=function(e,t){for(var n=Math.min(t,e.length),r=e.slice(),i=[],o=0;o<n;o++)i.push(y(r));return i},t.trim=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},t.promisify=function(e,t,n){return new Promise((function(i,o){e[t].apply(e,r.__spreadArray(r.__spreadArray([],n,!1),[function(e,t){e?o(e):i(t)}],!1))}))},function(e){e.msgpack="msgpack",e.json="json"}(m=t.Format||(t.Format={})),t.decodeBody=function(e,t){return"msgpack"==t?i.default.Config.msgpack.decode(e):JSON.parse(String(e))},t.encodeBody=function(e,t){return"msgpack"==t?i.default.Config.msgpack.encode(e,!0):JSON.stringify(e)},t.allToLowerCase=function(e){return e.map((function(e){return e&&e.toLowerCase()}))},t.allToUpperCase=function(e){return e.map((function(e){return e&&e.toUpperCase()}))},t.getBackoffCoefficient=function(e){return Math.min((e+2)/3,2)},t.getJitterCoefficient=function(){return 1-.2*Math.random()},t.getGlobalObject=function(){return e||("undefined"!==typeof window?window:self)},t.shallowEquals=function(e,t){return Object.keys(e).every((function(n){return e[n]===t[n]}))&&Object.keys(t).every((function(n){return t[n]===e[n]}))},t.matchDerivedChannel=function(e){var t=e.match(/^(\[([^?]*)(?:(.*))\])?(.+)$/);if(!t||!t.length||t.length<5)throw new a.default("regex match failed",400,40010);if(t[2])throw new a.default("cannot use a derived option with a ".concat(t[2]," channel"),400,40010);return{qualifierParam:t[3]||"",channelName:t[4]}},t.toBase64=function(e){return i.default.Config.createHmac?Buffer.from(e,"ascii").toString("base64"):(0,s.stringify)((0,u.parse)(e))}}).call(this,n(13))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0).__importDefault(n(3)),o=e||("undefined"!==typeof window?window:self);function a(e,t){return"".concat(e).padStart(t?3:2,"0")}function s(e){return i.default.Config.logTimestamps?function(t){var n=new Date;e(a(n.getHours())+":"+a(n.getMinutes())+":"+a(n.getSeconds())+"."+a(n.getMilliseconds(),1)+" "+t)}:e}!function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Major=2]="Major",e[e.Minor=3]="Minor",e[e.Micro=4]="Micro"}(r||(r={}));var u=function(){function e(){e.logLevel=e.LOG_DEFAULT}return e.initLogHandlers=function(){var e=function(){var e,t,n,r;return"undefined"===typeof Window&&"undefined"===typeof WorkerGlobalScope||"function"===typeof(null===(t=null===(e=null===o||void 0===o?void 0:o.console)||void 0===e?void 0:e.log)||void 0===t?void 0:t.apply)?(n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},r=console.warn?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)}:n):n=r=(null===o||void 0===o?void 0:o.console.log)?function(){Function.prototype.apply.call(console.log,console,arguments)}:function(){},[n,r].map(s)}(),t=e[0],n=e[1];this.logHandler=t,this.logErrorHandler=n},e.logLevel=r.Error,e.LOG_NONE=r.None,e.LOG_ERROR=r.Error,e.LOG_MAJOR=r.Major,e.LOG_MINOR=r.Minor,e.LOG_MICRO=r.Micro,e.LOG_DEFAULT=r.Error,e.LOG_DEBUG=r.Micro,e.logAction=function(t,n,i){e.shouldLog(t)&&(t===r.Error?e.logErrorHandler:e.logHandler)("Ably: "+n+": "+i)},e.deprecated=function(t,n){e.deprecatedWithMsg(t,"Please use '"+n+"' instead.")},e.deprecatedWithMsg=function(t,n){e.shouldLog(r.Error)&&e.logErrorHandler("Ably: Deprecation warning - '"+t+"' is deprecated and will be removed from a future version. "+n)},e.shouldLog=function(t){return t<=e.logLevel},e.setLog=function(t,n){void 0!==t&&(e.logLevel=t),void 0!==n&&(e.logHandler=e.logErrorHandler=n)},e}();t.default=u}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartialErrorInfo=void 0;var r=n(0),i=r.__importDefault(n(3)),o=r.__importStar(n(1));function a(e){var t="["+e.constructor.name;return e.message&&(t+=": "+e.message),e.statusCode&&(t+="; statusCode="+e.statusCode),e.code&&(t+="; code="+e.code),e.cause&&(t+="; cause="+o.inspectError(e.cause)),!e.href||e.message&&e.message.indexOf("help.ably.io")>-1||(t+="; see "+e.href+" "),t+="]"}var s=function(e){function t(n,r,i,o){var a=e.call(this,n)||this;return"undefined"!==typeof Object.setPrototypeOf&&Object.setPrototypeOf(a,t.prototype),a.code=r,a.statusCode=i,a.cause=o,a}return r.__extends(t,e),t.prototype.toString=function(){return a(this)},t.fromValues=function(e){var n=e,r=n.message,o=n.code,a=n.statusCode;if("string"!==typeof r||"number"!==typeof o||"number"!==typeof a)throw new Error("ErrorInfo.fromValues(): invalid values: "+i.default.Config.inspect(e));var s=Object.assign(new t(r,o,a),e);return s.code&&!s.href&&(s.href="https://help.ably.io/error/"+s.code),s},t}(Error);t.default=s;var u=function(e){function t(n,r,i,o){var a=e.call(this,n)||this;return"undefined"!==typeof Object.setPrototypeOf&&Object.setPrototypeOf(a,t.prototype),a.code=r,a.statusCode=i,a.cause=o,a}return r.__extends(t,e),t.prototype.toString=function(){return a(this)},t}(Error);t.PartialErrorInfo=u},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),function(){if("function"==typeof ArrayBuffer){var e=i.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)};n.prototype=e}}(),i.lib.WordArray)}()},function(e,t,n){(function(t){e.exports=function(){var e=e||function(e,r){var i;if("undefined"!==typeof window&&window.crypto&&(i=window.crypto),!i&&"undefined"!==typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&"undefined"!==typeof t&&t.crypto&&(i=t.crypto),!i)try{i=n(44)}catch(g){}var o=function(){if(i){if("function"===typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"===typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},u=s.lib={},l=u.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=u.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=r?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new c.init(t,e)}}),f=s.enc={},d=f.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},h=f.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},p=f.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},v=u.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),u=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*u,o);if(u){for(var f=0;f<u;f+=a)this._doProcessBlock(i,f);n=i.splice(0,u),r.sigBytes-=l}return new c.init(n,l)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(u.Hasher=v.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math);return e}()}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(2)),a=r.__importDefault(n(3));function s(e,t,n){try{t.apply(e,n)}catch(r){o.default.logAction(o.default.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+r+"; stack = "+(r&&r.stack))}}function u(e,t,n){for(var r,o,a,s=0;s<e.length;s++)if(r=e[s],n&&(r=r[n]),i.isArray(r)){for(;-1!==(o=i.arrIndexOf(r,t));)r.splice(o,1);n&&0===r.length&&delete e[s][n]}else if(i.isObject(r))for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&i.isArray(r[a])&&u([r],t,a)}var l=function(){function e(){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}return e.prototype.on=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if("function"!==typeof r)throw new Error("EventListener.on(): Invalid arguments: "+a.default.Config.inspect(t));this.any.push(r)}if(2===t.length){var o=t[0],s=t[1];if("function"!==typeof s)throw new Error("EventListener.on(): Invalid arguments: "+a.default.Config.inspect(t));if(i.isEmptyArg(o))this.any.push(s);else if(i.isArray(o))o.forEach((function(t){e.on(t,s)}));else{if("string"!==typeof o)throw new Error("EventListener.on(): Invalid arguments: "+a.default.Config.inspect(t));(this.events[o]||(this.events[o]=[])).push(s)}}},e.prototype.off=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(0==n.length||i.isEmptyArg(n[0])&&i.isEmptyArg(n[1]))return this.any=[],this.events=Object.create(null),this.anyOnce=[],void(this.eventsOnce=Object.create(null));var o=n[0],s=n[1],l=null,c=null;if(1!==n.length&&s){if("function"!==typeof s)throw new Error("EventEmitter.off(): invalid arguments:"+a.default.Config.inspect(n));c=(e=[o,s])[0],l=e[1]}else"function"===typeof o?l=o:c=o;if(l&&i.isEmptyArg(c))u([this.any,this.events,this.anyOnce,this.eventsOnce],l);else if(i.isArray(c))c.forEach((function(e){t.off(e,l)}));else{if("string"!==typeof c)throw new Error("EventEmitter.off(): invalid arguments:"+a.default.Config.inspect(n));l?u([this.events,this.eventsOnce],l,c):(delete this.events[c],delete this.eventsOnce[c])}},e.prototype.listeners=function(e){if(e){var t=this.events[e]||[];return this.eventsOnce[e]&&Array.prototype.push.apply(t,this.eventsOnce[e]),t.length?t:null}return this.any.length?this.any:null},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={event:e},o=[];this.anyOnce.length&&(Array.prototype.push.apply(o,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(o,this.any);var a=this.eventsOnce[e];a&&(Array.prototype.push.apply(o,a),delete this.eventsOnce[e]);var u=this.events[e];u&&Array.prototype.push.apply(o,u),i.arrForEach(o,(function(e){s(r,e,t)}))},e.prototype.once=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length;if((0===r||1===r&&"function"!==typeof t[0])&&a.default.Config.Promise){var o=t[0];return new a.default.Config.Promise((function(t){e.once(o,t)}))}var s=t[0],u=t[1];if(1===t.length&&"function"===typeof s)this.anyOnce.push(s);else if(i.isEmptyArg(s)){if("function"!==typeof u)throw new Error("EventEmitter.once(): Invalid arguments:"+a.default.Config.inspect(t));this.anyOnce.push(u)}else if(i.isArray(s)){var l=this,c=function e(){var n=Array.prototype.slice.call(arguments);if(i.arrForEach(s,(function(t){l.off(t,e)})),"function"!==typeof u)throw new Error("EventEmitter.once(): Invalid arguments:"+a.default.Config.inspect(t));u.apply(this,n)};i.arrForEach(s,(function(e){l.on(e,c)}))}else{if("string"!==typeof s)throw new Error("EventEmitter.once(): Invalid arguments:"+a.default.Config.inspect(t));var f=this.eventsOnce[s]||(this.eventsOnce[s]=[]);if(u){if("function"!==typeof u)throw new Error("EventEmitter.once(): Invalid arguments:"+a.default.Config.inspect(t));f.push(u)}}},e.prototype.whenState=function(t,n,r){for(var i=this,o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];var l={event:t};if("string"!==typeof t||"string"!==typeof n)throw"whenState requires a valid event String argument";if("function"!==typeof r&&a.default.Config.Promise)return new a.default.Config.Promise((function(r){e.prototype.whenState.apply(i,[t,n,r].concat(o))}));t===n?s(l,r,o):this.once(t,r)},e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaults=t.normaliseOptions=t.objectifyOptions=t.getAgentString=t.getHosts=t.getFallbackHosts=t.environmentFallbackHosts=t.getHttpScheme=t.getPort=t.getHost=void 0;var r=n(0),i=r.__importDefault(n(3)),o=r.__importStar(n(1)),a=r.__importDefault(n(2)),s=r.__importDefault(n(4)),u=n(43),l="ably-js/"+u.version,c={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,preferenceConnectTimeout:6e3,parallelUpgradeDelay:6e3},httpMaxRetryCount:3,maxMessageSize:65536,version:u.version,protocolVersion:2,agent:l,getHost:f,getPort:d,getHttpScheme:h,environmentFallbackHosts:p,getFallbackHosts:v,getHosts:m,checkHost:g,objectifyOptions:y,normaliseOptions:_};function f(e,t,n){return t=n?t==e.restHost&&e.realtimeHost||t||e.realtimeHost:t||e.restHost}function d(e,t){return t||e.tls?e.tlsPort:e.port}function h(e){return e.tls?"https://":"http://"}function p(e){return[e+"-a-fallback.ably-realtime.com",e+"-b-fallback.ably-realtime.com",e+"-c-fallback.ably-realtime.com",e+"-d-fallback.ably-realtime.com",e+"-e-fallback.ably-realtime.com"]}function v(e){var t=e.fallbackHosts,n="undefined"!==typeof e.httpMaxRetryCount?e.httpMaxRetryCount:c.httpMaxRetryCount;return t?o.arrChooseN(t,n):[]}function m(e){return[e.restHost].concat(v(e))}function g(e){if("string"!==typeof e)throw new s.default("host must be a string; was a "+typeof e,4e4,400);if(!e.length)throw new s.default("host must not be zero-length",4e4,400)}function y(e){return"string"==typeof e?-1==e.indexOf(":")?{token:e}:{key:e}:e}function _(e){if(e.host&&(a.default.deprecated("host","restHost"),e.restHost=e.host),e.wsHost&&(a.default.deprecated("wsHost","realtimeHost"),e.realtimeHost=e.wsHost),e.queueEvents&&(a.default.deprecated("queueEvents","queueMessages"),e.queueMessages=e.queueEvents),e.fallbackHostsUseDefault){if(e.fallbackHosts){var t="fallbackHosts and fallbackHostsUseDefault cannot both be set";throw a.default.logAction(a.default.LOG_ERROR,"Defaults.normaliseOptions",t),new s.default(t,4e4,400)}if(e.port||e.tlsPort)throw t="fallbackHostsUseDefault cannot be set when port or tlsPort are set",a.default.logAction(a.default.LOG_ERROR,"Defaults.normaliseOptions",t),new s.default(t,4e4,400);e.environment?a.default.deprecatedWithMsg("fallbackHostsUseDefault","There is no longer a need to set this when the environment option is also set since the library will now generate the correct fallback hosts using the environment option."):a.default.deprecated("fallbackHostsUseDefault","fallbackHosts: Ably.Defaults.FALLBACK_HOSTS"),e.fallbackHosts=c.FALLBACK_HOSTS}!0===e.recover&&(a.default.deprecated("{recover: true}","{recover: function(lastConnectionDetails, cb) { cb(true); }}"),e.recover=function(e,t){t(!0)}),"function"===typeof e.recover&&!0===e.closeOnUnload&&(a.default.logAction(a.default.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),e.recover=void 0),"closeOnUnload"in e||(e.closeOnUnload=!e.recover),e.transports&&o.arrIn(e.transports,"xhr")&&(a.default.deprecated('transports: ["xhr"]','transports: ["xhr_streaming"]'),o.arrDeleteValue(e.transports,"xhr"),e.transports.push("xhr_streaming")),"queueMessages"in e||(e.queueMessages=!0);var n=e.environment&&String(e.environment).toLowerCase()||c.ENVIRONMENT,u=!n||"production"===n;e.fallbackHosts||e.restHost||e.realtimeHost||e.port||e.tlsPort||(e.fallbackHosts=u?c.FALLBACK_HOSTS:p(n));var l=e.restHost||(u?c.REST_HOST:n+"-"+c.REST_HOST),f=function(e,t,n){return e.realtimeHost?e.realtimeHost:e.restHost?(a.default.logAction(a.default.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+e.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+e.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),e.restHost):t?c.REALTIME_HOST:n+"-"+c.REALTIME_HOST}(e,u,n);o.arrForEach((e.fallbackHosts||[]).concat(l,f),g),e.port=e.port||c.PORT,e.tlsPort=e.tlsPort||c.TLS_PORT,"tls"in e||(e.tls=!0);var d=function(e){var t={};for(var n in c.TIMEOUTS)t[n]=e[n]||c.TIMEOUTS[n];return t}(e);e.useBinaryProtocol="useBinaryProtocol"in e?i.default.Config.supportsBinary&&e.useBinaryProtocol:i.default.Config.preferBinary,e.clientId&&((e.headers=e.headers||{})["X-Ably-ClientId"]=i.default.BufferUtils.base64Encode(i.default.BufferUtils.utf8Encode(e.clientId))),"idempotentRestPublishing"in e||(e.idempotentRestPublishing=!0),e.promises&&!i.default.Config.Promise&&(a.default.logAction(a.default.LOG_ERROR,"Defaults.normaliseOptions","{promises: true} was specified, but no Promise constructor found; disabling promises"),e.promises=!1);var h=null,v=e.connectivityCheckUrl;if(e.connectivityCheckUrl){var m=e.connectivityCheckUrl.split("?"),y=m[0],_=m[1];h=_?o.parseQueryString(_):{},-1===y.indexOf("://")&&(y="https://"+y),v=y}return r.__assign(r.__assign({},e),{useBinaryProtocol:"useBinaryProtocol"in e?i.default.Config.supportsBinary&&e.useBinaryProtocol:i.default.Config.preferBinary,realtimeHost:f,restHost:l,maxMessageSize:e.maxMessageSize||c.maxMessageSize,timeouts:d,connectivityCheckParams:h,connectivityCheckUrl:v})}t.getHost=f,t.getPort=d,t.getHttpScheme=h,t.environmentFallbackHosts=p,t.getFallbackHosts=v,t.getHosts=m,t.getAgentString=function(e){var t=c.agent;if(e.agents)for(var n in e.agents)t+=" "+n+"/"+e.agents[n];return t},t.objectifyOptions=y,t.normaliseOptions=_,t.default=c,t.getDefaults=function(e){return Object.assign(c,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importDefault(n(3)),o=r.__importDefault(n(2)),a=r.__importDefault(n(4)),s=r.__importStar(n(1));function u(e){var t=0;return e.name&&(t+=e.name.length),e.clientId&&(t+=e.clientId.length),e.extras&&(t+=JSON.stringify(e.extras).length),e.data&&(t+=s.dataSizeBytes(e.data)),t}var l=function(){function e(){}return e.prototype.toJSON=function(){var e=this.encoding,t=this.data;return t&&i.default.BufferUtils.isBuffer(t)&&(arguments.length>0?(e=e?e+"/base64":"base64",t=i.default.BufferUtils.base64Encode(t)):t=i.default.BufferUtils.toBuffer(t)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:e,data:t}},e.prototype.toString=function(){var e="[Message";return this.name&&(e+="; name="+this.name),this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.extras&&(e+="; extras ="+JSON.stringify(this.extras)),this.data&&("string"==typeof this.data?e+="; data="+this.data:i.default.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+i.default.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),this.extras&&(e+="; extras="+JSON.stringify(this.extras)),e+="]"},e.encrypt=function(e,t,n){var r=e.data,o=e.encoding,a=t.channelCipher;o=o?o+"/":"",i.default.BufferUtils.isBuffer(r)||(r=i.default.BufferUtils.utf8Encode(String(r)),o+="utf-8/"),a.encrypt(r,(function(t,r){t?n(t):(e.data=r,e.encoding=o+"cipher+"+a.algorithm,n(null,e))}))},e.encode=function(t,n,r){var o=t.data;if("string"!=typeof o&&!i.default.BufferUtils.isBuffer(o)&&null!==o&&void 0!==o){if(!s.isObject(o)&&!s.isArray(o))throw new a.default("Data type is unsupported",40013,400);t.data=JSON.stringify(o),t.encoding=t.encoding?t.encoding+"/json":"json"}null!=n&&n.cipher?e.encrypt(t,n,r):r(null,t)},e.encodeArray=function(t,n,r){for(var i=0,o=0;o<t.length;o++)e.encode(t[o],n,(function(e){e?r(e):++i==t.length&&r(null,t)}))},e.decode=function(e,t){var n=function(e){return e&&e.channelOptions?e:{channelOptions:e,plugins:{},baseEncodedPreviousPayload:void 0}}(t),r=e.data,o=e.encoding;if(o){var s=o.split("/"),u=void 0,l=s.length,c=e.data,f="";try{for(;(u=l)>0;){var d=s[--l].match(/([-\w]+)(\+([\w-]+))?/);if(!d)break;switch(f=d[1]){case"base64":c=i.default.BufferUtils.base64Decode(String(c)),u==s.length&&(r=c);continue;case"utf-8":c=i.default.BufferUtils.utf8Decode(c);continue;case"json":c=JSON.parse(c);continue;case"cipher":if(null!=n.channelOptions&&n.channelOptions.cipher&&n.channelOptions.channelCipher){var h=d[3],p=n.channelOptions.channelCipher;if(h!=p.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");c=p.decrypt(c);continue}throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!n.plugins||!n.plugins.vcdiff)throw new a.default("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if("undefined"===typeof Uint8Array)throw new a.default("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{var v=n.baseEncodedPreviousPayload;"string"===typeof v&&(v=i.default.BufferUtils.utf8Encode(v)),v=i.default.BufferUtils.toBuffer(v),c=i.default.BufferUtils.toBuffer(c),r=c=i.default.BufferUtils.typedArrayToBuffer(n.plugins.vcdiff.decode(c,v))}catch(g){throw new a.default("Vcdiff delta decode failed with "+g,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(g){var m=g;throw new a.default("Error processing the "+f+" encoding, decoder returned \u2018"+m.message+"\u2019",m.code||40013,400)}finally{e.encoding=u<=0?null:s.slice(0,u).join("/"),e.data=c}}n.baseEncodedPreviousPayload=r},e.fromResponseBody=function(t,n,r){r&&(t=s.decodeBody(t,r));for(var i=0;i<t.length;i++){var a=t[i]=e.fromValues(t[i]);try{e.decode(a,n)}catch(u){o.default.logAction(o.default.LOG_ERROR,"Message.fromResponseBody()",u.toString())}}return t},e.fromValues=function(t){return Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e.fromValues(t[i]);return r},e.fromEncoded=function(t,n){var r=e.fromValues(t),a=function(e){if(e&&e.cipher){if(!i.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var t=i.default.Crypto.getCipher(e.cipher);return{cipher:t.cipherParams,channelCipher:t.cipher}}return null!==e&&void 0!==e?e:{}}(null!==n&&void 0!==n?n:null);try{e.decode(r,a)}catch(s){o.default.logAction(o.default.LOG_ERROR,"Message.fromEncoded()",s.toString())}return r},e.fromEncodedArray=function(t,n){return t.map((function(t){return e.fromEncoded(t,n)}))},e.getMessagesSize=function(e){for(var t,n=0,r=0;r<e.length;r++)n+=(t=e[r]).size||(t.size=u(t));return n},e.serialize=s.encodeBody,e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(4)),a=r.__importDefault(n(9)),s=r.__importDefault(n(14)),u={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},l=[];Object.keys(u).forEach((function(e){l[u[e]]=e}));var c={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},f=Object.keys(c);function d(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push(e[n].toString());return"[ "+t.join(", ")+" ]"}c.MODE_ALL=c.PRESENCE|c.PUBLISH|c.SUBSCRIBE|c.PRESENCE_SUBSCRIBE;var h="id channel channelSerial connectionId count msgSerial timestamp".split(" "),p=function(){function e(){var e=this;this.hasFlag=function(t){return(e.flags&c[t])>0}}return e.prototype.setFlag=function(e){return this.flags=this.flags|c[e]},e.prototype.getMode=function(){return this.flags&&this.flags&c.MODE_ALL},e.prototype.encodeModesToFlags=function(e){var t=this;e.forEach((function(e){return t.setFlag(e)}))},e.prototype.decodeModesFromFlags=function(){var t=this,n=[];return e.channelModes.forEach((function(e){t.hasFlag(e)&&n.push(e)})),n.length>0?n:void 0},e.fromValues=function(t){return Object.assign(new e,t)},e.Action=u,e.channelModes=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],e.ActionName=l,e.serialize=i.encodeBody,e.deserialize=function(t,n){var r=i.decodeBody(t,n);return e.fromDeserialized(r)},e.fromDeserialized=function(t){var n=t.error;n&&(t.error=o.default.fromValues(n));var r=t.messages;if(r)for(var i=0;i<r.length;i++)r[i]=a.default.fromValues(r[i]);var u=t.presence;if(u)for(i=0;i<u.length;i++)u[i]=s.default.fromValues(u[i],!0);return Object.assign(new e,t)},e.stringify=function(t){var n,r="[ProtocolMessage";void 0!==t.action&&(r+="; action="+e.ActionName[t.action]||0);for(var u=0;u<h.length;u++)n=h[u],void 0!==t[n]&&(r+="; "+n+"="+t[n]);if(t.messages&&(r+="; messages="+d(a.default.fromValuesArray(t.messages))),t.presence&&(r+="; presence="+d(s.default.fromValuesArray(t.presence))),t.error&&(r+="; error="+o.default.fromValues(t.error).toString()),t.auth&&t.auth.accessToken&&(r+="; token="+t.auth.accessToken),t.flags&&(r+="; flags="+f.filter(t.hasFlag).join(",")),t.params){var l="";i.forInOwnNonNullProperties(t.params,(function(e){l.length>0&&(l+="; "),l+=e+"="+t.params[e]})),l.length>0&&(r+="; params=["+l+"]")}return r+="]"},e}();t.default=p},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),function(){var e=i,t=e.lib.WordArray;function n(e,n,r){for(var i=[],o=0,a=0;a<n;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=s<<24-o%4*8,o++}return t.create(i,o)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return n(e,t,i)}}}(),i.enc.Base64)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(10)),a=r.__importDefault(n(25)),s=r.__importDefault(n(2)),u=r.__importDefault(n(8)),l=r.__importDefault(n(19)),c=r.__importDefault(n(16)),f=r.__importDefault(n(4)),d=r.__importDefault(n(20)),h=r.__importDefault(n(3));function p(e){return function(e){return!!e.code&&!c.default.isTokenErr(e)&&(!!i.arrIn([80015,80017,80030],e.code)||e.code>=4e4&&e.code<5e4)}(e)?[o.default.fromValues({action:o.default.Action.ERROR,error:e})]:[o.default.fromValues({action:o.default.Action.DISCONNECTED,error:e})]}var v=function(e){function t(t,n,r){var i=e.call(this,t,n,r,!0)||this;return i.onAuthUpdated=function(e){i.authParams={access_token:e.token}},i.stream=!("stream"in r)||r.stream,i.sendRequest=null,i.recvRequest=null,i.pendingCallback=null,i.pendingItems=null,i}return r.__extends(t,e),t.prototype.connect=function(){var e=this;s.default.logAction(s.default.LOG_MINOR,"CometTransport.connect()","starting"),a.default.prototype.connect.call(this);var t=this.params,n=t.options,r=u.default.getHost(n,t.host),o=u.default.getPort(n),l=n.tls?"https://":"http://";this.baseUri=l+r+":"+o+"/comet/";var c=this.baseUri+"connect";s.default.logAction(s.default.LOG_MINOR,"CometTransport.connect()","uri: "+c),this.auth.getAuthParams((function(t,n){if(t)e.disconnect(t);else if(!e.isDisposed){e.authParams=n;var r=e.params.getConnectParams(n);"stream"in r&&(e.stream=r.stream),s.default.logAction(s.default.LOG_MINOR,"CometTransport.connect()","connectParams:"+i.toQueryString(r));var o=!1,a=e.recvRequest=e.createRequest(c,null,r,null,e.stream?d.default.REQ_RECV_STREAM:d.default.REQ_RECV);a.on("data",(function(t){e.recvRequest&&(o||(o=!0,e.emit("preconnect")),e.onData(t))})),a.on("complete",(function(t){e.recvRequest||(t=t||new f.default("Request cancelled",80003,400)),e.recvRequest=null,o||t||(o=!0,e.emit("preconnect")),e.onActivity(),t?t.code?e.onData(p(t)):e.disconnect(t):h.default.Config.nextTick((function(){e.recv()}))})),a.exec()}}))},t.prototype.requestClose=function(){s.default.logAction(s.default.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)},t.prototype.requestDisconnect=function(){s.default.logAction(s.default.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)},t.prototype._requestCloseOrDisconnect=function(e){var t=this,n=e?this.closeUri:this.disconnectUri;if(n){var r=this.createRequest(n,null,this.authParams,null,d.default.REQ_SEND);r.on("complete",(function(n){n&&(s.default.logAction(s.default.LOG_ERROR,"CometTransport.request"+(e?"Close()":"Disconnect()"),"request returned err = "+i.inspectError(n)),t.finish("disconnected",n))})),r.exec()}},t.prototype.dispose=function(){var e=this;s.default.logAction(s.default.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(s.default.logAction(s.default.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",l.default.disconnected()),h.default.Config.nextTick((function(){e.emit("disposed")})))},t.prototype.onConnect=function(e){var t;if(!this.isDisposed){var n=null===(t=e.connectionDetails)||void 0===t?void 0:t.connectionKey;a.default.prototype.onConnect.call(this,e);var r=this.baseUri+n;s.default.logAction(s.default.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+r),this.sendUri=r+"/send",this.recvUri=r+"/recv",this.closeUri=r+"/close",this.disconnectUri=r+"/disconnect"}},t.prototype.send=function(e){if(this.sendRequest)return this.pendingItems=this.pendingItems||[],void this.pendingItems.push(e);var t=this.pendingItems||[];t.push(e),this.pendingItems=null,this.sendItems(t)},t.prototype.sendAnyPending=function(){var e=this.pendingItems;e&&(this.pendingItems=null,this.sendItems(e))},t.prototype.sendItems=function(e){var t=this,n=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(e),d.default.REQ_SEND);n.on("complete",(function(e,n){e&&s.default.logAction(s.default.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+i.inspectError(e)),t.sendRequest=null,e?e.code?t.onData(p(e)):t.disconnect(e):(n&&t.onData(n),t.pendingItems&&h.default.Config.nextTick((function(){t.sendRequest||t.sendAnyPending()})))})),n.exec()},t.prototype.recv=function(){var e=this;if(!this.recvRequest&&this.isConnected){var t=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?d.default.REQ_RECV_STREAM:d.default.REQ_RECV_POLL);t.on("data",(function(t){e.onData(t)})),t.on("complete",(function(t){e.recvRequest=null,e.onActivity(),t?t.code?e.onData(p(t)):e.disconnect(t):h.default.Config.nextTick((function(){e.recv()}))})),t.exec()}},t.prototype.onData=function(e){try{var t=this.decodeResponse(e);if(t&&t.length)for(var n=0;n<t.length;n++)this.onProtocolMessage(o.default.fromDeserialized(t[n]))}catch(r){s.default.logAction(s.default.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+r.stack)}},t.prototype.encodeRequest=function(e){return JSON.stringify(e)},t.prototype.decodeResponse=function(e){return"string"==typeof e?JSON.parse(e):e},t}(a.default);t.default=v},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importDefault(n(2)),o=r.__importDefault(n(3)),a=r.__importDefault(n(9)),s=r.__importStar(n(1));function u(e){return l.Actions.indexOf(e)}var l=function(){function e(){}return e.prototype.isSynthesized=function(){return!this.id||!this.connectionId||this.id.substring(this.connectionId.length,0)!==this.connectionId},e.prototype.parseId=function(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");var e=this.id.split(":");return{connectionId:e[0],msgSerial:parseInt(e[1],10),index:parseInt(e[2],10)}},e.prototype.toJSON=function(){var e=this.data,t=this.encoding;return e&&o.default.BufferUtils.isBuffer(e)&&(arguments.length>0?(t=t?t+"/base64":"base64",e=o.default.BufferUtils.base64Encode(e)):e=o.default.BufferUtils.toBuffer(e)),{id:this.id,clientId:this.clientId,action:u(this.action),data:e,encoding:t}},e.prototype.toString=function(){var e="[PresenceMessage";return e+="; action="+this.action,this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.data&&("string"==typeof this.data?e+="; data="+this.data:o.default.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+o.default.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),e+="]"},e.fromResponseBody=function(t,n,r){var o=[];r&&(t=s.decodeBody(t,r));for(var a=0;a<t.length;a++){var u=o[a]=e.fromValues(t[a],!0);try{e.decode(u,n)}catch(l){i.default.logAction(i.default.LOG_ERROR,"PresenceMessage.fromResponseBody()",l.toString())}}return o},e.fromValues=function(t,n){return n&&(t.action=e.Actions[t.action]),Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e.fromValues(t[i]);return r},e.fromEncoded=function(t,n){var r=e.fromValues(t,!0);try{e.decode(r,null!==n&&void 0!==n?n:{})}catch(o){i.default.logAction(i.default.LOG_ERROR,"PresenceMessage.fromEncoded()",o.toString())}return r},e.fromEncodedArray=function(t,n){return t.map((function(t){return e.fromEncoded(t,n)}))},e.Actions=["absent","present","enter","leave","update"],e.encode=a.default.encode,e.decode=a.default.decode,e.getMessagesSize=a.default.getMessagesSize,e}();t.default=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(7)),a=r.__importStar(n(4)),s=r.__importDefault(n(2)),u=r.__importDefault(n(8)),l=r.__importDefault(n(20)),c=r.__importDefault(n(3));function f(e,t){if(function(e,t){return i.arrIn(i.allToLowerCase(i.keysArray(t)),"x-ably-errorcode")}(0,t))return e.error&&a.default.fromValues(e.error)}var d=function(){},h=0,p={},v="undefined"!==typeof e&&e.XDomainRequest;function m(){var e;return v&&(e=function(){var e=navigator.userAgent.toString().match(/MSIE\s([\d.]+)/);return e&&Number(e[1])}())&&10===e}var g=function(e){function t(t,n,r,o,a,s,u){var l=e.call(this)||this;return(r=r||{}).rnd=i.cheapRandStr(),m()&&!r.envelope&&(r.envelope="json"),l.uri=t+i.toQueryString(r),l.headers=n||{},l.body=o,l.method=u?u.toUpperCase():i.isEmptyArg(o)?"GET":"POST",l.requestMode=a,l.timeouts=s,l.timedOut=!1,l.requestComplete=!1,l.id=String(++h),p[l.id]=l,l}return r.__extends(t,e),t.createRequest=function(e,n,r,o,a,s,l){var c=s||u.default.TIMEOUTS;return new t(e,n,i.copy(r),o,a,c,l)},t.prototype.complete=function(e,t,n,r,i){this.requestComplete||(this.requestComplete=!0,!e&&t&&this.emit("data",t),this.emit("complete",e,t,n,r,i),this.dispose())},t.prototype.abort=function(){this.dispose()},t.prototype.exec=function(){var e=this,t=this.headers,n=this.requestMode==l.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,r=this.timer=setTimeout((function(){e.timedOut=!0,u.abort()}),n),o=this.method,u=this.xhr=new XMLHttpRequest,d=t.accept,h=this.body,p="text";for(var v in d?0===d.indexOf("application/x-msgpack")&&(p="arraybuffer"):t.accept="application/json",h&&(t["content-type"]||(t["content-type"]="application/json")).indexOf("application/json")>-1&&"string"!=typeof h&&(h=JSON.stringify(h)),u.open(o,this.uri,!0),u.responseType=p,"authorization"in t&&(u.withCredentials=!0),t)u.setRequestHeader(v,t[v]);var m,g,y,_=function(t,n,r,i){var o,u=n+" (event type: "+t.type+")";(null===(o=null===e||void 0===e?void 0:e.xhr)||void 0===o?void 0:o.statusText)&&(u+=", current statusText is "+e.xhr.statusText),s.default.logAction(s.default.LOG_ERROR,"Request.on"+t.type+"()",u),e.complete(new a.PartialErrorInfo(u,r,i))};u.onerror=function(e){_(e,"XHR error occurred",null,400)},u.onabort=function(t){e.timedOut?_(t,"Request aborted due to request timeout expiring",null,408):_(t,"Request cancelled",null,400)},u.ontimeout=function(e){_(e,"Request timed out",null,408)};var b=0,w=!1,k=function(){var n;try{var r=function(e,t){return e.getResponseHeader&&e.getResponseHeader(t)}(u,"content-type");if(r?r.indexOf("application/json")>=0:"text"==u.responseType){var o="arraybuffer"===u.responseType?c.default.BufferUtils.utf8Decode(u.response):String(u.responseText);n=o.length?JSON.parse(o):o,w=!0}else n=u.response;void 0!==n.response?(g=n.statusCode,y=g<400,t=n.headers,n=n.response):t=function(e){for(var t=i.trim(e.getAllResponseHeaders()).split("\r\n"),n={},r=0;r<t.length;r++){var o=t[r].split(":").map(i.trim);n[o[0].toLowerCase()]=o[1]}return n}(u)}catch(l){return void e.complete(new a.PartialErrorInfo("Malformed response body from server: "+l.message,null,400))}if(y||i.isArray(n))e.complete(null,n,t,w,g);else{var s=f(n,t);s||(s=new a.PartialErrorInfo("Error response received from server: "+g+" body was: "+c.default.Config.inspect(n),null,g)),e.complete(s,n,t,w,g)}};function C(){for(var e,t,n=u.responseText,r=n.length-1;b<r&&(e=n.indexOf("\n",b))>-1;)t=n.slice(b,e),b=e+1,S(t)}var S=function(t){try{t=JSON.parse(t)}catch(n){return void e.complete(new a.PartialErrorInfo("Malformed response body from server: "+n.message,null,400))}e.emit("data",t)};u.onreadystatechange=function(){var t=u.readyState;t<3||0!==u.status&&(void 0===g&&(1223===(g=u.status)&&(g=204),clearTimeout(r),y=g<400,204!=g?m=e.requestMode==l.default.REQ_RECV_STREAM&&y&&function(e){return e.getResponseHeader&&(e.getResponseHeader("transfer-encoding")||!e.getResponseHeader("content-length"))}(u):e.complete(null,null,null,null,g)),3==t&&m?C():4==t&&(m?(C(),e.streamComplete=!0,c.default.Config.nextTick((function(){e.complete()}))):k()))},u.send(h)},t.prototype.dispose=function(){var e=this.xhr;if(e){e.onreadystatechange=e.onerror=e.onabort=e.ontimeout=d,this.xhr=null;var t=this.timer;t&&(clearTimeout(t),this.timer=null),this.requestComplete||e.abort()}delete p[this.id]},t}(o.default);t.default=g}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importDefault(n(2)),o=r.__importStar(n(1)),a=r.__importDefault(n(22)),s=r.__importDefault(n(4)),u=r.__importDefault(n(45)),l=n(11),c=r.__importDefault(n(17)),f=r.__importDefault(n(3)),d=Math.pow(2,17);function h(){}function p(e){return o.isErrorInfoOrPartialErrorInfo(e)?(e.code||(403===e.statusCode?e.code=40300:(e.code=40170,e.statusCode=401)),e):new s.default(o.inspectError(e),e.code||40170,e.statusCode||401)}var v=function(e,t){if(f.default.Config.createHmac){var n=f.default.Config.createHmac("SHA256",t);return n.update(e),n.digest("base64")}return(0,l.stringify)((0,u.default)(e,t))};function m(e){if(!e)return"";"string"==typeof e&&(e=JSON.parse(e));var t=Object.create(null),n=o.keysArray(e,!0);if(!n)return"";n.sort();for(var r=0;r<n.length;r++)t[n[r]]=e[n[r]].sort();return JSON.stringify(t)}function g(e){if(e.authCallback)i.default.logAction(i.default.LOG_MINOR,"Auth()","using token auth with authCallback");else if(e.authUrl)i.default.logAction(i.default.LOG_MINOR,"Auth()","using token auth with authUrl");else if(e.key)i.default.logAction(i.default.LOG_MINOR,"Auth()","using token auth with client-side signing");else{if(!e.tokenDetails){var t="authOptions must include valid authentication parameters";throw i.default.logAction(i.default.LOG_ERROR,"Auth()",t),new Error(t)}i.default.logAction(i.default.LOG_MINOR,"Auth()","using token auth with supplied token only")}}var y=0,_=function(){function e(e,t){if(this.authOptions={},this.client=e,this.tokenParams=t.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,function(e){return e.useTokenAuth||!function(e){return"useTokenAuth"in e&&!e.useTokenAuth}(e)&&(e.authCallback||e.authUrl||e.token||e.tokenDetails)}(t)){if(t.key&&!v){var n="client-side token request signing not supported";throw i.default.logAction(i.default.LOG_ERROR,"Auth()",n),new Error(n)}(function(e){return!e.key&&!e.authCallback&&!e.authUrl})(t)&&i.default.logAction(i.default.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(t.defaultTokenParams,t),g(this.authOptions)}else{if(!t.key)throw n="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)",i.default.logAction(i.default.LOG_ERROR,"Auth()",n),new s.default(n,40160,401);i.default.logAction(i.default.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(t)}}return e.prototype.authorize=function(e,t,n){var r,a=this;if("function"!=typeof e||n?"function"!=typeof t||n?r=t:(n=t,r=null):(n=e,r=e=null),!n&&this.client.options.promises)return o.promisify(this,"authorize",arguments);if(r&&r.key&&this.authOptions.key!==r.key)throw new s.default("Unable to update auth options with incompatible key",40102,401);r&&"force"in r&&(i.default.logAction(i.default.LOG_ERROR,"Auth.authorize","Deprecation warning: specifying {force: true} in authOptions is no longer necessary, authorize() now always gets a new token. Please remove this, as in version 1.0 and later, having a non-null authOptions will overwrite stored library authOptions, which may not be what you want"),o.isOnlyPropIn(r,"force")&&(r=null)),this._forceNewToken(e,r,(function(e,t){if(e)return a.client.connection&&a.client.connection.connectionManager.actOnErrorFromAuthorize(e),void(null===n||void 0===n||n(e));a.client.connection?a.client.connection.connectionManager.onAuthUpdated(t,n||h):null===n||void 0===n||n(null,t)}))},e.prototype.authorise=function(e,t,n){i.default.deprecated("Auth.authorise","Auth.authorize"),this.authorize(e,t,n)},e.prototype._forceNewToken=function(e,t,n){var r=this;this.tokenDetails=null,this._saveTokenOptions(e,t),g(this.authOptions),this._ensureValidAuthCredentials(!0,(function(e,t){delete r.tokenParams.timestamp,delete r.authOptions.queryTime,n(e,t)}))},e.prototype.requestToken=function(e,t,n){var r=this;if("function"!=typeof e||n?"function"!=typeof t||n||(n=t,t=null):(n=e,t=e=null),!n&&this.client.options.promises)return o.promisify(this,"requestToken",arguments);t=t||this.authOptions,e=e||o.copy(this.tokenParams);var a,u=n||h,l=this.client;if(t.authCallback)i.default.logAction(i.default.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),a=t.authCallback;else if(t.authUrl)i.default.logAction(i.default.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),a=function(e,n){var a,u=o.mixin({accept:"application/json, text/plain"},t.authHeaders),h=t.authMethod&&"post"===t.authMethod.toLowerCase(),p=t.authUrl.indexOf("?");p>-1&&(a=o.parseQueryString(t.authUrl.slice(p)),t.authUrl=t.authUrl.slice(0,p),h||(t.authParams=o.mixin(a,t.authParams)));var v=o.mixin({},t.authParams||{},e),m=function(e,t,r,a){var u;if(e?i.default.logAction(i.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+o.inspectError(e)):(u=r["content-type"],i.default.logAction(i.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+u+"; body: "+o.inspectBody(t))),e||a)return n(e,t);if(f.default.BufferUtils.isBuffer(t)&&(t=t.toString()),u){var l=u.indexOf("application/json")>-1,c=u.indexOf("text/plain")>-1||u.indexOf("application/jwt")>-1;if(l||c){if(l){if(t.length>d)return void n(new s.default("authUrl response exceeded max permitted length",40170,401));try{t=JSON.parse(t)}catch(h){return void n(new s.default("Unexpected error processing authURL response; err = "+h.message,40170,401))}}n(null,t,u)}else n(new s.default("authUrl responded with unacceptable content-type "+u+", should be either text/plain, application/jwt or application/json",40170,401))}else n(new s.default("authUrl response is missing a content-type header",40170,401))};if(i.default.logAction(i.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+t.authUrl+"; Params: "+JSON.stringify(v)+"; method: "+(h?"POST":"GET")),h){var g=u||{};g["content-type"]="application/x-www-form-urlencoded";var y=o.toQueryString(v).slice(1);r.client.http.doUri(c.default.Post,l,t.authUrl,g,y,a,m)}else r.client.http.doUri(c.default.Get,l,t.authUrl,u||{},null,v,m)};else{if(!t.key)return i.default.logAction(i.default.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),void u(new s.default("Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)",40171,403));i.default.logAction(i.default.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),a=function(e,n){r.createTokenRequest(e,t,n)}}"capability"in e&&(e.capability=m(e.capability));var v=!1,g=this.client.options.timeouts.realtimeRequestTimeout,y=setTimeout((function(){v=!0;var e="Token request callback timed out after "+g/1e3+" seconds";i.default.logAction(i.default.LOG_ERROR,"Auth.requestToken()",e),u(new s.default(e,40170,401))}),g);a(e,(function(e,n,a){if(!v){if(clearTimeout(y),e)return i.default.logAction(i.default.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+o.inspectError(e)),void u(p(e));if("string"!==typeof n){if("object"!==typeof n){var f="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof n;return i.default.logAction(i.default.LOG_ERROR,"Auth.requestToken()",f),void u(new s.default(f,40170,401))}var h=JSON.stringify(n).length;if(h>d&&!t.suppressMaxLengthCheck)u(new s.default("Token request/details object exceeded max permitted stringified size (was "+h+" bytes)",40170,401));else if("issued"in n)u(null,n);else{if(!("keyName"in n))return f="Expected token request callback to call back with a token string, token request object, or token details object",i.default.logAction(i.default.LOG_ERROR,"Auth.requestToken()",f),void u(new s.default(f,40170,401));!function(e,n){var a="/keys/"+e.keyName+"/requestToken",s=o.defaultPostHeaders(r.client.options);t.requestHeaders&&o.mixin(s,t.requestHeaders),i.default.logAction(i.default.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+a+"; Token params: "+JSON.stringify(e)),r.client.http.do(c.default.Post,l,(function(e){return l.baseUri(e)+a}),s,JSON.stringify(e),null,n)}(n,(function(e,t,n,r){if(e)return i.default.logAction(i.default.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+o.inspectError(e)),void u(p(e));r||(t=JSON.parse(t)),i.default.logAction(i.default.LOG_MINOR,"Auth.getToken()","token received"),u(null,t)}))}}else 0===n.length?u(new s.default("Token string is empty",40170,401)):n.length>d?u(new s.default("Token string exceeded max permitted length (was "+n.length+" bytes)",40170,401)):"undefined"===n||"null"===n?u(new s.default("Token string was literal null/undefined",40170,401)):"{"!==n[0]||a&&a.indexOf("application/jwt")>-1?u(null,{token:n}):u(new s.default("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401))}}))},e.prototype.createTokenRequest=function(e,t,n){var r=this;if("function"!=typeof e||n?"function"!=typeof t||n||(n=t,t=null):(n=e,t=e=null),!n&&this.client.options.promises)return o.promisify(this,"createTokenRequest",arguments);t=t||this.authOptions,e=e||o.copy(this.tokenParams);var a=t.key;if(a){var u=a.split(":"),l=u[0],c=u[1];if(c)if(""!==e.clientId){"capability"in e&&(e.capability=m(e.capability));var f,d=o.mixin({keyName:l},e),h=e.clientId||"",p=e.ttl||"",g=e.capability||"";f=function(){var e=d.nonce||(d.nonce=("000000"+Math.floor(1e16*Math.random())).slice(-16)),t=d.timestamp,r=d.keyName+"\n"+p+"\n"+g+"\n"+h+"\n"+t+"\n"+e+"\n";d.mac=d.mac||v(r,c),i.default.logAction(i.default.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),n(null,d)},d.timestamp?f():r.getTimestamp(t&&t.queryTime,(function(e,t){e?n(e):(d.timestamp=t,f())}))}else n(new s.default("clientId can\u2019t be an empty string",40012,400));else n(new s.default("Invalid key specified",40101,403))}else n(new s.default("No key specified",40101,403))},e.prototype.getAuthParams=function(e){"basic"==this.method?e(null,{key:this.key}):this._ensureValidAuthCredentials(!1,(function(t,n){if(t)e(t);else{if(!n)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");e(null,{access_token:n.token})}}))},e.prototype.getAuthHeaders=function(e){"basic"==this.method?e(null,{authorization:"Basic "+this.basicKey}):this._ensureValidAuthCredentials(!1,(function(t,n){if(t)e(t);else{if(!n)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");e(null,{authorization:"Bearer "+o.toBase64(n.token)})}}))},e.prototype.getTimestamp=function(e,t){this.isTimeOffsetSet()||!e&&!this.authOptions.queryTime?t(null,this.getTimestampUsingOffset()):this.client.time(t)},e.prototype.getTimestampUsingOffset=function(){return o.now()+(this.client.serverTimeOffset||0)},e.prototype.isTimeOffsetSet=function(){return null!==this.client.serverTimeOffset},e.prototype._saveBasicOptions=function(e){this.method="basic",this.key=e.key,this.basicKey=o.toBase64(e.key),this.authOptions=e||{},"clientId"in e&&this._userSetClientId(e.clientId)},e.prototype._saveTokenOptions=function(e,t){this.method="token",e&&(this.tokenParams=e),t&&(t.token&&(t.tokenDetails="string"===typeof t.token?{token:t.token}:t.token),t.tokenDetails&&(this.tokenDetails=t.tokenDetails),"clientId"in t&&this._userSetClientId(t.clientId),this.authOptions=t)},e.prototype._ensureValidAuthCredentials=function(e,t){var n=this,r=this.tokenDetails;if(r){if(this._tokenClientIdMismatch(r.clientId))return void t(new s.default("Mismatch between clientId in token ("+r.clientId+") and current clientId ("+this.clientId+")",40102,403));if(!this.isTimeOffsetSet()||!r.expires||r.expires>=this.getTimestampUsingOffset())return i.default.logAction(i.default.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+r.expires),void t(null,r);i.default.logAction(i.default.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}if((this.waitingForTokenRequest||(this.waitingForTokenRequest=a.default.create())).push(t),null===this.currentTokenRequestId||e){var o=this.currentTokenRequestId=y++;this.requestToken(this.tokenParams,this.authOptions,(function(e,t){if(n.currentTokenRequestId>o)i.default.logAction(i.default.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one");else{n.currentTokenRequestId=null;var r=n.waitingForTokenRequest||h;n.waitingForTokenRequest=null,e?r(e):r(null,n.tokenDetails=t)}}))}},e.prototype._userSetClientId=function(e){if("string"!==typeof e&&null!==e)throw new s.default("clientId must be either a string or null",40012,400);if("*"===e)throw new s.default('Can\u2019t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);var t=this._uncheckedSetClientId(e);if(t)throw t},e.prototype._uncheckedSetClientId=function(e){if(this._tokenClientIdMismatch(e)){var t="Unexpected clientId mismatch: client has "+this.clientId+", requested "+e,n=new s.default(t,40102,401);return i.default.logAction(i.default.LOG_ERROR,"Auth._uncheckedSetClientId()",t),n}return this.clientId=this.tokenParams.clientId=e,null},e.prototype._tokenClientIdMismatch=function(e){return!(!this.clientId||"*"===this.clientId||!e||"*"===e||this.clientId===e)},e.isTokenErr=function(e){return e.code&&e.code>=40140&&e.code<40150},e}();t.default=_},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Get="get",e.Delete="delete",e.Post="post",e.Put="put",e.Patch="patch"}(r||(r={})),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpPaginatedResponse=t.PaginatedResult=void 0;var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(2)),a=r.__importDefault(n(24));function s(e){var t=e.match(/^\.\/(\w+)\?(.*)$/);return t&&t[2]&&i.parseQueryString(t[2])}var u=function(){function e(e,t,n,r,i,o){this.rest=e,this.path=t,this.headers=n,this.envelope=null!==r&&void 0!==r?r:null,this.bodyHandler=i,this.useHttpPaginatedResponse=o||!1}return e.prototype.get=function(e,t){var n=this;a.default.get(this.rest,this.path,this.headers,e,this.envelope,(function(e,r,i,o,a){n.handlePage(e,r,i,o,a,t)}))},e.prototype.delete=function(e,t){var n=this;a.default.delete(this.rest,this.path,this.headers,e,this.envelope,(function(e,r,i,o,a){n.handlePage(e,r,i,o,a,t)}))},e.prototype.post=function(e,t,n){var r=this;a.default.post(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,i,o,a){n&&r.handlePage(e,t,i,o,a,n)}))},e.prototype.put=function(e,t,n){var r=this;a.default.put(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,i,o,a){n&&r.handlePage(e,t,i,o,a,n)}))},e.prototype.patch=function(e,t,n){var r=this;a.default.patch(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,i,o,a){n&&r.handlePage(e,t,i,o,a,n)}))},e.prototype.handlePage=function(e,t,n,r,a,u){if(e&&function(e,t,n){return!(n&&(t||"number"===typeof e.code))}(e,t,this.useHttpPaginatedResponse))return o.default.logAction(o.default.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+i.inspectError(e)),void(null===u||void 0===u||u(e));var f,d,h;try{f=this.bodyHandler(t,n||{},r)}catch(p){return void(null===u||void 0===u||u(e||p))}n&&(d=n.Link||n.link)&&(h=function(e){"string"==typeof e&&(e=e.split(","));for(var t={},n=0;n<e.length;n++){var r=e[n].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(r){var i=s(r[1]);i&&(t[r[2]]=i)}}return t}(d)),this.useHttpPaginatedResponse?u(null,new c(this,f,n||{},a,h,e)):u(null,new l(this,f,h))},e}(),l=function(){function e(e,t,n){var r=this;this.resource=e,this.items=t;var o=this;n&&("first"in n&&(this.first=function(e){if(!e&&o.resource.rest.options.promises)return i.promisify(o,"first",[]);o.get(n.first,e)}),"current"in n&&(this.current=function(e){if(!e&&o.resource.rest.options.promises)return i.promisify(o,"current",[]);o.get(n.current,e)}),this.next=function(e){if(!e&&o.resource.rest.options.promises)return i.promisify(o,"next",[]);"next"in n?o.get(n.next,e):e(null)},this.hasNext=function(){return"next"in n},this.isLast=function(){var e;return!(null===(e=r.hasNext)||void 0===e?void 0:e.call(r))})}return e.prototype.get=function(e,t){var n=this.resource;a.default.get(n.rest,n.path,n.headers,e,n.envelope,(function(e,r,i,o,a){n.handlePage(e,r,i,o,a,t)}))},e}();t.PaginatedResult=l;var c=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,o)||this;return s.statusCode=i,s.success=i<300&&i>=200,s.headers=r,s.errorCode=a&&a.code,s.errorMessage=a&&a.message,s}return r.__extends(t,e),t.prototype.toJSON=function(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}},t}(l);t.HttpPaginatedResponse=c,t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRetriable=void 0;var r=n(0).__importDefault(n(4)),i={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},o={disconnected:function(){return r.default.fromValues({statusCode:400,code:i.DISCONNECTED,message:"Connection to server temporarily unavailable"})},suspended:function(){return r.default.fromValues({statusCode:400,code:i.SUSPENDED,message:"Connection to server unavailable"})},failed:function(){return r.default.fromValues({statusCode:400,code:i.FAILED,message:"Connection failed or disconnected by server"})},closing:function(){return r.default.fromValues({statusCode:400,code:i.CLOSING,message:"Connection closing"})},closed:function(){return r.default.fromValues({statusCode:400,code:i.CLOSED,message:"Connection closed"})},unknownConnectionErr:function(){return r.default.fromValues({statusCode:500,code:i.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"})},unknownChannelErr:function(){return r.default.fromValues({statusCode:500,code:i.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})}};t.isRetriable=function(e){return!e.statusCode||!e.code||e.statusCode>=500||Object.values(i).includes(e.code)},t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.REQ_SEND=0]="REQ_SEND",e[e.REQ_RECV=1]="REQ_RECV",e[e.REQ_RECV_POLL=2]="REQ_RECV_POLL",e[e.REQ_RECV_STREAM=3]="REQ_RECV_STREAM"}(r||(r={})),t.default=r},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),n(5),n(58),n(11),n(40),n(31),n(23),n(26),n(27),n(59),n(60),i)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(2)),i=function(){function e(e){this.members=e||[]}return e.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,i=this.members;n<i.length;n++){var o=i[n];if(o)try{o.apply(void 0,e)}catch(a){r.default.logAction(r.default.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+a+"; stack = "+a.stack)}}},e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.members).push.apply(e,t)},e.create=function(t){var n=new e(t);return Object.assign((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.call.apply(n,e)}),{push:function(e){return n.push(e)}})},e}();t.default=i},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),void function(){var e=i,t=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,u=a.words,l=0;l<r;l++)s[l]^=1549556828,u[l]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importDefault(n(3)),o=r.__importStar(n(1)),a=r.__importDefault(n(2)),s=r.__importDefault(n(16)),u=r.__importDefault(n(17)),l=n(4);function c(e,t,n,r,i){e.http.supportsAuthHeaders?e.auth.getAuthHeaders((function(e,a){e?r(e):i(o.mixin(a,t),n)})):e.auth.getAuthParams((function(e,a){e?r(e):i(t,o.mixin(a,n))}))}function f(e){var t=[];if(e)for(var n in e)t.push(n+"="+e[n]);return t.join("&")}function d(e,t){return e+(t?"?":"")+f(t)}var h=function(){function e(){}return e.get=function(t,n,r,i,o,a){e.do(u.default.Get,t,n,null,r,i,o,a)},e.delete=function(t,n,r,i,o,a){e.do(u.default.Delete,t,n,null,r,i,o,a)},e.post=function(t,n,r,i,o,a,s){e.do(u.default.Post,t,n,r,i,o,a,s)},e.patch=function(t,n,r,i,o,a,s){e.do(u.default.Patch,t,n,r,i,o,a,s)},e.put=function(t,n,r,i,o,a,s){e.do(u.default.Put,t,n,r,i,o,a,s)},e.do=function(e,t,n,r,u,h,p,v){a.default.shouldLog(a.default.LOG_MICRO)&&(v=function(e,t,n,r){return function(s,u,l,c,h){s?a.default.logAction(a.default.LOG_MICRO,"Resource."+t+"()","Received Error; "+d(n,r)+"; Error: "+o.inspectError(s)):a.default.logAction(a.default.LOG_MICRO,"Resource."+t+"()","Received; "+d(n,r)+"; Headers: "+f(l)+"; StatusCode: "+h+"; Body: "+(i.default.BufferUtils.isBuffer(u)?u.toString():u)),e&&e(s,u,l,c,h)}}(v,e,n,h)),p&&(v=v&&function(e,t){return function(n,r,i,a,s){if(!n||r){if(!a)try{r=o.decodeBody(r,t)}catch(p){return void(o.isErrorInfoOrPartialErrorInfo(p)?e(p):e(new l.PartialErrorInfo(o.inspectError(p),null)))}if(r){var u=r,c=u.statusCode,f=u.response,d=u.headers;if(void 0!==c){if(c<200||c>=300){var h=f&&f.error||n;return h||((h=new Error("Error in unenveloping "+r)).statusCode=c),void e(h,f,d,!0,c)}e(n,f,d,!0,c)}else e(n,r,i,!0,s)}else e(new l.PartialErrorInfo("unenvelope(): Response body is missing",null))}else e(n)}}(v,p),(h=h||{}).envelope=p),c(t,u,h,v,(function u(l,f){var h;if(a.default.shouldLog(a.default.LOG_MICRO)&&a.default.logAction(a.default.LOG_MICRO,"Resource."+e+"()","Sending; "+d(n,f)),a.default.shouldLog(a.default.LOG_MICRO)){var p=r;if((null===(h=l["content-type"])||void 0===h?void 0:h.indexOf("msgpack"))>0)try{p=i.default.Config.msgpack.decode(r)}catch(m){a.default.logAction(a.default.LOG_MICRO,"Resource."+e+"()","Sending MsgPack Decoding Error: "+o.inspectError(m))}a.default.logAction(a.default.LOG_MICRO,"Resource."+e+"()","Sending; "+d(n,f)+"; Body: "+p)}t.http.do(e,t,n,l,r,f,(function(e,n,r,i,o){e&&s.default.isTokenErr(e)?t.auth.authorize(null,null,(function(e){e?v(e):c(t,r,f,v,u)})):v(e,n,r,i,o)}))}))},e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importDefault(n(10)),o=r.__importStar(n(1)),a=r.__importDefault(n(7)),s=r.__importDefault(n(2)),u=r.__importDefault(n(19)),l=r.__importDefault(n(4)),c=r.__importDefault(n(3)),f=i.default.Action,d=i.default.fromValues({action:f.CLOSE}),h=i.default.fromValues({action:f.DISCONNECT}),p=function(e){function t(t,n,r,i){var o=e.call(this)||this;return i&&(r.format=void 0,r.heartbeats=!0),o.connectionManager=t,t.registerProposedTransport(o),o.auth=n,o.params=r,o.timeouts=r.options.timeouts,o.format=r.format,o.isConnected=!1,o.isFinished=!1,o.isDisposed=!1,o.maxIdleInterval=null,o.idleTimer=null,o.lastActivity=null,o}return r.__extends(t,e),t.prototype.connect=function(){},t.prototype.close=function(){this.isConnected&&this.requestClose(),this.finish("closed",u.default.closed())},t.prototype.disconnect=function(e){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",e||u.default.disconnected())},t.prototype.fail=function(e){this.isConnected&&this.requestDisconnect(),this.finish("failed",e||u.default.failed())},t.prototype.finish=function(e,t){var n;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout(null!==(n=this.idleTimer)&&void 0!==n?n:void 0),this.idleTimer=null,this.emit(e,t),this.dispose())},t.prototype.onProtocolMessage=function(e){switch(s.default.shouldLog(s.default.LOG_MICRO)&&s.default.logAction(s.default.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+i.default.stringify(e)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),e.action){case f.HEARTBEAT:s.default.logAction(s.default.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",e.id);break;case f.CONNECTED:this.onConnect(e),this.emit("connected",e.error,e.connectionId,e.connectionDetails,e);break;case f.CLOSED:this.onClose(e);break;case f.DISCONNECTED:this.onDisconnect(e);break;case f.ACK:this.emit("ack",e.msgSerial,e.count);break;case f.NACK:this.emit("nack",e.msgSerial,e.count,e.error);break;case f.SYNC:this.connectionManager.onChannelMessage(e,this);break;case f.ACTIVATE:break;case f.AUTH:this.auth.authorize((function(e){e&&s.default.logAction(s.default.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+o.inspectError(e))}));break;case f.ERROR:if(s.default.logAction(s.default.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+c.default.Config.inspect(e.error)+(e.channel?", channel: "+e.channel:"")),void 0===e.channel){this.onFatalError(e);break}this.connectionManager.onChannelMessage(e,this);break;default:this.connectionManager.onChannelMessage(e,this)}},t.prototype.onConnect=function(e){if(this.isConnected=!0,!e.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");var t=e.connectionDetails.maxIdleInterval;t&&(this.maxIdleInterval=t+this.timeouts.realtimeRequestTimeout,this.onActivity())},t.prototype.onDisconnect=function(e){var t=e&&e.error;s.default.logAction(s.default.LOG_MINOR,"Transport.onDisconnect()","err = "+o.inspectError(t)),this.finish("disconnected",t)},t.prototype.onFatalError=function(e){var t=e&&e.error;s.default.logAction(s.default.LOG_MINOR,"Transport.onFatalError()","err = "+o.inspectError(t)),this.finish("failed",t)},t.prototype.onClose=function(e){var t=e&&e.error;s.default.logAction(s.default.LOG_MINOR,"Transport.onClose()","err = "+o.inspectError(t)),this.finish("closed",t)},t.prototype.requestClose=function(){s.default.logAction(s.default.LOG_MINOR,"Transport.requestClose()",""),this.send(d)},t.prototype.requestDisconnect=function(){s.default.logAction(s.default.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(h)},t.prototype.ping=function(e){var t={action:i.default.Action.HEARTBEAT};e&&(t.id=e),this.send(i.default.fromValues(t))},t.prototype.dispose=function(){s.default.logAction(s.default.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()},t.prototype.onActivity=function(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=o.now(),this.setIdleTimer(this.maxIdleInterval+100))},t.prototype.setIdleTimer=function(e){var t=this;this.idleTimer||(this.idleTimer=setTimeout((function(){t.onIdleTimerExpire()}),e))},t.prototype.onIdleTimerExpire=function(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;var e=o.now()-this.lastActivity,t=this.maxIdleInterval-e;if(t<=0){var n="No activity seen from realtime in "+e+"ms; assuming connection has dropped";s.default.logAction(s.default.LOG_ERROR,"Transport.onIdleTimerExpire()",n),this.disconnect(new l.default(n,80003,408))}else this.setIdleTimer(t+100)},t.tryConnect=function(e,t,n,r,i){var o,a=new e(t,n,r),u=function(e){clearTimeout(o),i({event:this.event,error:e})},c=t.options.timeouts.realtimeRequestTimeout;o=setTimeout((function(){a.off(["preconnect","disconnected","failed"]),a.dispose(),u.call({event:"disconnected"},new l.default("Timeout waiting for transport to indicate itself viable",5e4,500))}),c),a.on(["failed","disconnected"],u),a.on("preconnect",(function(){s.default.logAction(s.default.LOG_MINOR,"Transport.tryConnect()","viable transport "+a),clearTimeout(o),a.off(["failed","disconnected"],u),i(null,a)})),a.connect()},t}(a.default);t.default=p},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),n(40),n(23),function(){var e=i,t=e.lib,n=t.Base,r=t.WordArray,o=e.algo,a=o.MD5,s=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,i=this.cfg,o=i.hasher.create(),a=r.create(),s=a.words,u=i.keySize,l=i.iterations;s.length<u;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var c=1;c<l;c++)n=o.finalize(n),o.reset();a.concat(n)}return a.sigBytes=4*u,a}});e.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),i.EvpKDF)}()},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),n(26),void(i.lib.Cipher||function(e){var t=i,n=t.lib,r=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,s=t.enc,u=(s.Utf8,s.Base64),l=t.algo.EvpKDF,c=n.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:g}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),f=(n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=f.CBC=function(){var t=d.extend();function n(t,n,r){var i,o=this._iv;o?(i=o,this._iv=e):i=this._prevBlock;for(var a=0;a<r;a++)t[n+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=e.slice(t,t+i);r.decryptBlock(e,t),n.call(this,e,t,i),this._prevBlock=o}}),t}(),p=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(i);var u=o.create(a,r);e.concat(u)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:h,padding:p}),reset:function(){var e;c.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?o.create([1398893684,1701076831]).concat(n).concat(t):t).toString(u)},parse:function(e){var t,n=u.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=o.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),v.create({ciphertext:n,salt:t})}},g=n.SerializableCipher=r.extend({cfg:r.extend({format:m}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),a=i.cfg;return v.create({ciphertext:o,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=o.random(8));var i=l.create({keySize:t+n}).compute(e,r),a=o.create(i.words.slice(t),4*n);return i.sigBytes=4*t,v.create({key:i,iv:a,salt:r})}},_=n.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:y}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var o=g.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,g.decrypt.call(this,e,t,i.key,r)}})}()))}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.createRequest=void 0;var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(12)),a=r.__importDefault(n(3)),s=r.__importDefault(n(7)),u=n(4),l=r.__importDefault(n(8)),c=r.__importDefault(n(2)),f=r.__importDefault(n(20)),d=i.getGlobalObject(),h=function(){},p=d._ablyjs_jsonp={};p._=function(e){return p["_"+e]||h};var v=1,m="jsonp";function g(e,t,n,r,o,a,s){return a=a||l.default.TIMEOUTS,new _(void 0,e,t,i.copy(n),r,o,a,s)}t.createRequest=g;var y=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.shortName=m,r.stream=!1,i}return r.__extends(t,e),t.isAvailable=function(){return a.default.Config.jsonpSupported&&a.default.Config.allowComet},t.prototype.toString=function(){return"JSONPTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},t.prototype.createRequest=function(e,t,n,r,i,o,a){return g(e,t,n,r,i,o=(null===this||void 0===this?void 0:this.timeouts)||o||l.default.TIMEOUTS,a)},t}(o.default),_=function(e){function t(t,n,r,o,a,s,u,l){var c=e.call(this)||this;return void 0===t&&(t=v++),c.id=t,c.uri=n,c.params=o||{},c.params.rnd=i.cheapRandStr(),r&&(r["X-Ably-Version"]&&(c.params.v=r["X-Ably-Version"]),r["X-Ably-Lib"]&&(c.params.lib=r["X-Ably-Lib"])),c.body=a,c.method=l,c.requestMode=s,c.timeouts=u,c.requestComplete=!1,c}return r.__extends(t,e),t.prototype.exec=function(){var e=this,t=this.id,n=this.body,r=this.method,o=this.uri,s=this.params;s.callback="_ablyjs_jsonp._("+t+")",s.envelope="jsonp",n&&(s.body=n),r&&"get"!==r&&(s.method=r);var l=this.script=document.createElement("script"),d=o+i.toQueryString(s);l.src=d,l.src.split("/").slice(-1)[0]!==d.split("/").slice(-1)[0]&&c.default.logAction(c.default.LOG_ERROR,"JSONP Request.exec()","Warning: the browser appears to have truncated the script URI. This will likely result in the request failing due to an unparseable body param"),l.async=!0,l.type="text/javascript",l.charset="UTF-8",l.onerror=function(t){e.complete(new u.PartialErrorInfo("JSONP script error (event: "+a.default.Config.inspect(t)+")",null,400))},p["_"+t]=function(t){if(t.statusCode){var n=t.response;if(204==t.statusCode)e.complete(null,null,null,t.statusCode);else if(n)if(t.statusCode<400||i.isArray(n))e.complete(null,n,t.headers,t.statusCode);else{var r=n.error||new u.PartialErrorInfo("Error response received from server",null,t.statusCode);e.complete(r)}else e.complete(new u.PartialErrorInfo("Invalid server response: no envelope detected",null,500))}else e.complete(null,t)};var h=this.requestMode==f.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout;this.timer=setTimeout(this.abort.bind(this),h);var v=document.getElementsByTagName("head")[0];v.insertBefore(l,v.firstChild)},t.prototype.complete=function(e,t,n,r){if(n=n||{},!this.requestComplete){this.requestComplete=!0;var i=void 0;t&&(i="string"==typeof t?"text/plain":"application/json",n["content-type"]=i,this.emit("data",t)),this.emit("complete",e,t,n,!0,r),this.dispose()}},t.prototype.abort=function(){this.dispose()},t.prototype.dispose=function(){var e=this.timer;e&&(clearTimeout(e),this.timer=null);var t=this.script;t.parentNode&&t.parentNode.removeChild(t),delete p[this.id],this.emit("disposed")},t}(s.default);t.Request=_,t.default=function(e){return d.JSONPTransport=y,y.isAvailable()&&(e.supportedTransports[m]=y),y}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(2)),a=r.__importDefault(n(8)),s=r.__importDefault(n(16)),u=r.__importDefault(n(46)),l=r.__importDefault(n(18)),c=r.__importDefault(n(32)),f=r.__importDefault(n(4)),d=r.__importDefault(n(49)),h=r.__importDefault(n(17)),p=r.__importDefault(n(3)),v=r.__importDefault(n(9)),m=r.__importDefault(n(14)),g=function(){},y=function(){function e(e){if(!e){var t="no options provided";throw o.default.logAction(o.default.LOG_ERROR,"Rest()",t),new Error(t)}var n=a.default.objectifyOptions(e);n.log&&o.default.setLog(n.log.level,n.log.handler),o.default.logAction(o.default.LOG_MICRO,"Rest()","initialized with clientOptions "+p.default.Config.inspect(e));var r=this.options=a.default.normaliseOptions(n);if(r.key){var i=r.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!i)throw t="invalid key parameter",o.default.logAction(o.default.LOG_ERROR,"Rest()",t),new f.default(t,40400,404);r.keyName=i[1],r.keySecret=i[2]}if("clientId"in r){if("string"!==typeof r.clientId&&null!==r.clientId)throw new f.default("clientId must be either a string or null",40012,400);if("*"===r.clientId)throw new f.default('Can\u2019t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}o.default.logAction(o.default.LOG_MINOR,"Rest()","started; version = "+a.default.version),this.baseUri=this.authority=function(e){return a.default.getHttpScheme(r)+e+":"+a.default.getPort(r,!1)},this._currentFallback=null,this.serverTimeOffset=null,this.http=new p.default.Http(r),this.auth=new s.default(this,r),this.channels=new _(this),this.push=new u.default(this)}return e.prototype.stats=function(e,t){if(void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.options.promises)return i.promisify(this,"stats",[e]);t=g}var n=i.defaultGetHeaders(this.options),r=this.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,o=this.http.supportsLinkHeaders?void 0:r;this.options.headers&&i.mixin(n,this.options.headers),new l.default(this,"/stats",n,o,(function(e,t,n){for(var r=n?e:JSON.parse(e),i=0;i<r.length;i++)r[i]=d.default.fromValues(r[i]);return r})).get(e,t)},e.prototype.time=function(e,t){var n=this;if(void 0===t)if("function"==typeof e)t=e,e=null;else if(this.options.promises)return i.promisify(this,"time",[e]);var r=t||g,o=i.defaultGetHeaders(this.options);this.options.headers&&i.mixin(o,this.options.headers),this.http.do(h.default.Get,this,(function(e){return n.authority(e)+"/time"}),o,null,e,(function(e,t,o,a){if(e)r(e);else{a||(t=JSON.parse(t));var s=t[0];s?(n.serverTimeOffset=s-i.now(),r(null,s)):r(new f.default("Internal error (unexpected result type from GET /time)",5e4,500))}}))},e.prototype.request=function(e,t,n,r,o,a){var s=this.options.useBinaryProtocol,u=s?p.default.Config.msgpack.encode:JSON.stringify,c=s?p.default.Config.msgpack.decode:JSON.parse,d=s?i.Format.msgpack:i.Format.json,h=this.http.supportsLinkHeaders?void 0:d;n=n||{};var v=e.toLowerCase(),m="get"==v?i.defaultGetHeaders(this.options,d):i.defaultPostHeaders(this.options,d);if(void 0===a){if(this.options.promises)return i.promisify(this,"request",[e,t,n,r,o]);a=g}"string"!==typeof r&&(r=u(r)),this.options.headers&&i.mixin(m,this.options.headers),o&&i.mixin(m,o);var y=new l.default(this,t,m,h,(function(e,t,n){return i.ensureArray(n?e:c(e))}),!0);if(!i.arrIn(p.default.Http.methods,v))throw new f.default("Unsupported method "+v,40500,405);i.arrIn(p.default.Http.methodsWithBody,v)?y[v](n,r,a):y[v](n,a)},e.prototype.setLog=function(e){o.default.setLog(e.level,e.handler)},e.Promise=function(t){return(t=a.default.objectifyOptions(t)).promises=!0,new e(t)},e.Callbacks=e,e.Platform=p.default,e.Message=v.default,e.PresenceMessage=m.default,e}(),_=function(){function e(e){this.rest=e,this.all=Object.create(null)}return e.prototype.get=function(e,t){e=String(e);var n=this.all[e];return n?t&&n.setOptions(t):this.all[e]=n=new c.default(this.rest,e,t),n},e.prototype.release=function(e){delete this.all[String(e)]},e}();t.default=y},function(e,t,n){e.exports=n(6).enc.Utf8},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),function(e){var t=i,n=t.lib,r=n.WordArray,o=n.Hasher,a=t.algo,s=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var l=[],c=a.SHA256=o.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],f=n[6],d=n[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var p=l[h-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=l[h-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;l[h]=v+l[h-7]+g+l[h-16]}var y=r&i^r&o^i&o,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&f)+u[h]+l[h];d=f,f=c,c=s,s=a+b|0,a=o,o=i,i=r,r=b+(_+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+c|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(c),t.HmacSHA256=o._createHmacHelper(c)}(Math),i.SHA256)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(7)),a=r.__importDefault(n(2)),s=r.__importDefault(n(33)),u=r.__importDefault(n(9)),l=r.__importDefault(n(4)),c=r.__importDefault(n(18)),f=r.__importDefault(n(24)),d=r.__importDefault(n(3));function h(){}function p(e){var t=e||{};if(t.cipher){if(!d.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var n=d.default.Crypto.getCipher(t.cipher);t.cipher=n.cipherParams,t.channelCipher=n.cipher}else"cipher"in t&&(t.cipher=void 0,t.channelCipher=null);return t}var v=function(e){function t(t,n,r){var i=e.call(this)||this;return a.default.logAction(a.default.LOG_MINOR,"Channel()","started; name = "+n),i.rest=t,i.name=n,i.basePath="/channels/"+encodeURIComponent(n),i.presence=new s.default(i),i.channelOptions=p(r),i}return r.__extends(t,e),t.prototype.setOptions=function(e){this.channelOptions=p(e)},t.prototype.history=function(e,t){if(a.default.logAction(a.default.LOG_MICRO,"Channel.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.rest.options.promises)return i.promisify(this,"history",arguments);t=h}this._history(e,t)},t.prototype._history=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,o=this.rest.http.supportsLinkHeaders?void 0:r,a=i.defaultGetHeaders(n.options,r);n.options.headers&&i.mixin(a,n.options.headers);var s=this.channelOptions;new c.default(n,this.basePath+"/messages",a,o,(function(e,t,n){return u.default.fromResponseBody(e,s,n?void 0:r)})).get(e,t)},t.prototype.publish=function(){var e,t,n=this,r=arguments[0],o=arguments[1],a=arguments[arguments.length-1];if("function"!==typeof a){if(this.rest.options.promises)return i.promisify(this,"publish",arguments);a=h}if("string"===typeof r||null===r)e=[u.default.fromValues({name:r,data:o})],t=arguments[2];else if(i.isObject(r))e=[u.default.fromValues(r)],t=arguments[1];else{if(!i.isArray(r))throw new l.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);e=u.default.fromValuesArray(r),t=arguments[1]}"object"===typeof t&&t||(t={});var s=this.rest,c=s.options,f=c.useBinaryProtocol?i.Format.msgpack:i.Format.json,d=s.options.idempotentRestPublishing,p=i.defaultPostHeaders(s.options,f);if(c.headers&&i.mixin(p,c.headers),d&&function(e){return i.arrEvery(e,(function(e){return!e.id}))}(e)){var v=i.randomString(9);i.arrForEach(e,(function(e,t){e.id=v+":"+t.toString()}))}u.default.encodeArray(e,this.channelOptions,(function(r){if(r)a(r);else{var i=u.default.getMessagesSize(e),o=c.maxMessageSize;i>o?a(new l.default("Maximum size of messages that can be published at once exceeded ( was "+i+" bytes; limit is "+o+" bytes)",40009,400)):n._publish(u.default.serialize(e,f),p,t,a)}}))},t.prototype._publish=function(e,t,n,r){f.default.post(this.rest,this.basePath+"/messages",e,t,n,null,r)},t.prototype.status=function(e){if("function"!==typeof e&&this.rest.options.promises)return i.promisify(this,"status",[]);var t=this.rest.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,n=i.defaultPostHeaders(this.rest.options,t);f.default.get(this.rest,this.basePath,n,{},t,e||h)},t}(o.default);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(7)),a=r.__importDefault(n(2)),s=r.__importDefault(n(18)),u=r.__importDefault(n(14));function l(){}var c=function(e){function t(t){var n=e.call(this)||this;return n.channel=t,n.basePath=t.basePath+"/presence",n}return r.__extends(t,e),t.prototype.get=function(e,t){if(a.default.logAction(a.default.LOG_MICRO,"Presence.get()","channel = "+this.channel.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.rest.options.promises)return i.promisify(this,"get",arguments);t=l}var n=this.channel.rest,r=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,o=this.channel.rest.http.supportsLinkHeaders?void 0:r,c=i.defaultGetHeaders(n.options,r);n.options.headers&&i.mixin(c,n.options.headers);var f=this.channel.channelOptions;new s.default(n,this.basePath,c,o,(function(e,t,n){return u.default.fromResponseBody(e,f,n?void 0:r)})).get(e,t)},t.prototype.history=function(e,t){return a.default.logAction(a.default.LOG_MICRO,"Presence.history()","channel = "+this.channel.name),this._history(e,t)},t.prototype._history=function(e,t){if(void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.rest.options.promises)return i.promisify(this,"_history",[e]);t=l}var n=this.channel.rest,r=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,o=this.channel.rest.http.supportsLinkHeaders?void 0:r,a=i.defaultGetHeaders(n.options,r);n.options.headers&&i.mixin(a,n.options.headers);var c=this.channel.channelOptions;new s.default(n,this.basePath+"/history",a,o,(function(e,t,n){return u.default.fromResponseBody(e,c,n?void 0:r)})).get(e,t)},t}(o.default);t.default=c},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.TransportParams=void 0;var r=n(0),i=r.__importDefault(n(10)),o=r.__importStar(n(1)),a=r.__importStar(n(52)),s=r.__importStar(n(8)),u=r.__importDefault(n(3)),l=r.__importDefault(n(7)),c=r.__importDefault(n(35)),f=r.__importDefault(n(2)),d=r.__importDefault(n(36)),h=r.__importStar(n(19)),p=r.__importStar(n(4)),v=r.__importDefault(n(16)),m=r.__importDefault(n(9)),g=r.__importDefault(n(22)),y=r.__importDefault(n(53)),_=r.__importDefault(n(25)),b=r.__importDefault(n(37)),w=function(){var e;return"undefined"!==typeof u.default.WebStorage&&(null===(e=u.default.WebStorage)||void 0===e?void 0:e.localSupported)},k=function(){var e;return"undefined"!==typeof u.default.WebStorage&&(null===(e=u.default.WebStorage)||void 0===e?void 0:e.sessionSupported)},C=i.default.Action,S=function(){},E="ably-transport-preference",O="ably-connection-recovery";function x(e){try{return JSON.parse(e)}catch(t){return null}}var T=function(){function e(e,t,n,r){this.options=e,this.host=t,this.mode=n,this.connectionKey=r,this.format=e.useBinaryProtocol?o.Format.msgpack:o.Format.json}return e.prototype.getConnectParams=function(e){var t=e?o.copy(e):{},n=this.options;switch(this.mode){case"upgrade":t.upgrade=this.connectionKey;break;case"resume":t.resume=this.connectionKey;break;case"recover":var r=x(n.recover);r&&(t.recover=r.connectionKey)}return void 0!==n.clientId&&(t.clientId=n.clientId),!1===n.echoMessages&&(t.echo="false"),void 0!==this.format&&(t.format=this.format),void 0!==this.stream&&(t.stream=this.stream),void 0!==this.heartbeats&&(t.heartbeats=this.heartbeats),t.v=s.default.protocolVersion,t.agent=encodeURIComponent((0,s.getAgentString)(this.options)),void 0!==n.transportParams&&o.mixin(t,n.transportParams),t},e.prototype.toString=function(){var e="[mode="+this.mode;return this.host&&(e+=",host="+this.host),this.connectionKey&&(e+=",connectionKey="+this.connectionKey),this.format&&(e+=",format="+this.format),e+="]"},e}();t.TransportParams=T;var R=function(t){function n(e,r){var i=t.call(this)||this;i.disconnectedRetryCount=0,n.initTransports(),i.realtime=e,i.options=r;var a=r.timeouts,l=a.preferenceConnectTimeout+a.realtimeRequestTimeout;if(i.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:l,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},synchronizing:{state:"connected",terminal:!1,queueEvents:!0,sendEvents:!1,forceQueueEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:a.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:a.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:a.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},i.state=i.states.initialized,i.errorReason=null,i.queuedMessages=new c.default,i.msgSerial=0,i.connectionDetails=void 0,i.connectionId=void 0,i.connectionKey=void 0,i.connectionStateTtl=a.connectionStateTtl,i.maxIdleInterval=null,i.transports=o.intersect(r.transports||s.default.defaultTransports,n.supportedTransports),i.baseTransport=o.intersect(s.default.baseTransportOrder,i.transports)[0],i.upgradeTransports=o.intersect(i.transports,s.default.upgradeTransports),i.transportPreference=null,i.httpHosts=s.default.getHosts(r),i.activeProtocol=null,i.proposedTransports=[],i.pendingTransports=[],i.host=null,i.lastAutoReconnectAttempt=null,i.lastActivity=null,i.forceFallbackHost=!1,i.connectCounter=0,f.default.logAction(f.default.LOG_MINOR,"Realtime.ConnectionManager()","started"),f.default.logAction(f.default.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(r.transports||s.default.defaultTransports)+"]"),f.default.logAction(f.default.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+i.transports+"]"),f.default.logAction(f.default.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+i.httpHosts+"]"),!i.transports.length){var d="no requested transports available";throw f.default.logAction(f.default.LOG_ERROR,"realtime.ConnectionManager()",d),new Error(d)}var h=u.default.Config.addEventListener;return h&&(k()&&"function"===typeof r.recover&&h("beforeunload",i.persistConnection.bind(i)),!0===r.closeOnUnload&&h("beforeunload",(function(){f.default.logAction(f.default.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),i.requestState({state:"closing"})})),h("online",(function(){i.state==i.states.disconnected||i.state==i.states.suspended?(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager caught browser \u2018online\u2019 event","reattempting connection"),i.requestState({state:"connecting"})):i.state==i.states.connecting&&(i.pendingTransports.forEach((function(e){e.off()})),i.disconnectAllTransports(),i.startConnect())})),h("offline",(function(){i.state==i.states.connected&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager caught browser \u2018offline\u2019 event","disconnecting active transport"),i.disconnectAllTransports())}))),i}return r.__extends(n,t),n.initTransports=function(){(0,y.default)(n),o.arrForEach(u.default.Transports,(function(e){e(n)}))},n.prototype.createTransportParams=function(e,t){return new T(this.options,e,t,this.connectionKey)},n.prototype.getTransportParams=function(e){var t=this;!function(e){if(t.connectionKey)e("resume");else if("string"!==typeof t.options.recover){var n=t.options.recover,r=function(){var e,t;return k()&&(null===(t=null===(e=u.default.WebStorage)||void 0===e?void 0:e.getSession)||void 0===t?void 0:t.call(e,O))}();if(r&&"function"===typeof n)return f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data"),void n(r,(function(n){n?(t.options.recover=r.recoveryKey,e("recover")):e("clean")}));e("clean")}else e("recover")}((function(n){var r=t.createTransportParams(null,n);if("recover"===n){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+t.options.recover);var i=x(t.options.recover);i&&(t.msgSerial=i.msgSerial)}else f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+r.toString());e(r)}))},n.prototype.tryATransport=function(e,t,r){var i=this;f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+t),_.default.tryConnect(n.supportedTransports[t],this,this.realtime.auth,e,(function(n,o){var a=i.state;return a==i.states.closing||a==i.states.closed||a==i.states.failed?(o&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+a.state+" while we were attempting the transport; closing "+o),o.close()),void r(!0)):n?(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+t+" "+n.event+", err: "+n.error.toString()),void(!v.default.isTokenErr(n.error)||i.errorReason&&v.default.isTokenErr(i.errorReason)?"failed"===n.event?(i.notifyState({state:"failed",error:n.error}),r(!0)):"disconnected"===n.event&&((0,h.isRetriable)(n.error)?r(!1):(i.notifyState({state:i.states.connecting.failState,error:n.error}),r(!0))):(i.errorReason=n.error,i.realtime.auth._forceNewToken(null,null,(function(n){n?i.actOnErrorFromAuthorize(n):i.tryATransport(e,t,r)}))))):(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+t+"; setting pending"),i.setTransportPending(o,e),void r(null,o))}))},n.prototype.setTransportPending=function(e,t){var n=this,r=t.mode;f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+e+"; mode = "+r),o.arrDeleteValue(this.proposedTransports,e),this.pendingTransports.push(e);var i=u.default.Defaults.transportPreferenceOrder[u.default.Defaults.transportPreferenceOrder.length-1];e.once("connected",(function(a,s,l){"upgrade"==r&&n.activeProtocol?e.shortName!==i&&o.arrIn(n.getUpgradePossibilities(),i)&&n.activeProtocol?setTimeout((function(){n.scheduleTransportActivation(a,e,s,l)}),n.options.timeouts.parallelUpgradeDelay):n.scheduleTransportActivation(a,e,s,l):(n.activateTransport(a,e,s,l),u.default.Config.nextTick((function(){n.connectImpl(t)}))),"recover"===r&&n.options.recover&&(n.options.recover=null,n.unpersistConnection())}));var a=this;e.on(["disconnected","closed","failed"],(function(t){a.deactivateTransport(e,this.event,t)})),this.emit("transport.pending",e)},n.prototype.scheduleTransportActivation=function(e,t,n,r){var a,s,l=this,c=this.activeProtocol&&this.activeProtocol.getTransport(),d=function(){t.disconnect(),o.arrDeleteValue(l.pendingTransports,t)};if(this.state!==this.states.connected&&this.state!==this.states.connecting)return f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),void d();if(c&&(a=t,s=c,!(o.arrIndexOf(u.default.Defaults.transportPreferenceOrder,a.shortName)>o.arrIndexOf(u.default.Defaults.transportPreferenceOrder,s.shortName))))return f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+" is no better than current active transport "+c.shortName+" - abandoning upgrade"),void d();f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Scheduling transport upgrade; transport = "+t);var h=null;if(!t.isConnected)return f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+"is no longer connected; abandoning upgrade"),void d();if(this.state===this.states.connected)f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Currently connected, so temporarily pausing events until the upgrade is complete"),this.state=this.states.synchronizing,h=this.activeProtocol;else if(this.state!==this.states.connecting)return f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),void d();f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Syncing transport; transport = "+t);var p=function(){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Activating transport; transport = "+t),t.send(i.default.fromValues({action:C.ACTIVATE})),l.activateTransport(e,t,n,r),l.state===l.states.synchronizing?(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, sending queued messages on upgraded transport; transport = "+t),l.state=l.states.connected):f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, but state is now "+l.state.state+", so leaving unchanged"),l.state.sendEvents&&l.sendQueuedMessages()};h?h.onceIdle(p):p()},n.prototype.activateTransport=function(e,t,n,r){var i=this;f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+t),e&&f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+e),n&&f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+n),r&&f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(r)),this.persistTransportPreference(t);var s=this.state,l=this.states.connected.state;if(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+s.state),s.state==this.states.closing.state||s.state==this.states.closed.state||s.state==this.states.failed.state)return f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),t.disconnect(),!1;if(o.arrDeleteValue(this.pendingTransports,t),!t.isConnected)return f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+t+" since it appears to no longer be connected"),!1;var c=this.activeProtocol;this.activeProtocol=new a.default(t),this.host=t.params.host;var h=r.connectionKey;if(h&&this.connectionKey!=h&&this.setConnection(n,r,!!e),this.onConnectionDetailsUpdate(r,t),u.default.Config.nextTick((function(){t.on("connected",(function(e,n,r){i.onConnectionDetailsUpdate(r,t),i.emit("update",new d.default(l,l,null,e))}))})),s.state===this.states.connected.state?e&&(this.errorReason=this.realtime.connection.errorReason=e,this.emit("update",new d.default(l,l,null,e))):(this.notifyState({state:"connected",error:e}),this.errorReason=this.realtime.connection.errorReason=e||null),this.emit("transport.active",t),c)if(c.messageQueue.count()>0&&f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+c.transport.shortName+", new one is "+t.shortName+") finishing with "+c.messageQueue.count()+" messages still pending"),c.transport===t){var p="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+t.shortName+"; stack = "+(new Error).stack;f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.activateTransport()",p)}else c.finish();return o.safeArrForEach(this.pendingTransports,(function(e){if(e===t){var n="Assumption violated: activating a transport that is still marked as a pending transport; transport = "+t.shortName+"; stack = "+(new Error).stack;f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.activateTransport()",n),o.arrDeleteValue(i.pendingTransports,t)}else e.disconnect()})),o.safeArrForEach(this.proposedTransports,(function(e){e===t?(f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.activateTransport()","Assumption violated: activating a transport that is still marked as a proposed transport; transport = "+t.shortName+"; stack = "+(new Error).stack),o.arrDeleteValue(i.proposedTransports,t)):e.dispose()})),!0},n.prototype.deactivateTransport=function(e,t,n){var r=this.activeProtocol,i=r&&r.getTransport()===e,a=o.arrDeleteValue(this.pendingTransports,e),s=o.arrDeleteValue(this.proposedTransports,e),l=this.noTransportsScheduledForActivation();if(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+e),f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+t+(i?"; was active":a?"; was pending":s?"; was proposed":"")+(l?"":"; another transport is scheduled for activation")),n&&n.message&&f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+n.message),i&&(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(r.getPendingMessages()),u.default.Config.nextTick((function(){r.clearPendingMessages()})),this.activeProtocol=this.host=null),this.emit("transport.inactive",e),i&&l||i&&"failed"===t||"closed"===t||null===r&&a&&0===this.pendingTransports.length){if("disconnected"===t&&n&&n.statusCode>500&&this.httpHosts.length>1)return this.unpersistTransportPreference(),this.forceFallbackHost=!0,void this.notifyState({state:t,error:n,retryImmediately:!0});var c="failed"===t&&v.default.isTokenErr(n)?"disconnected":t;this.notifyState({state:c,error:n})}else i&&"disconnected"===t&&this.state!==this.states.synchronizing&&(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","wasActive but another transport is connected and scheduled for activation, so going into the connecting state until it activates"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),this.notifyState({state:"connecting",error:n}))},n.prototype.noTransportsScheduledForActivation=function(){return o.isEmpty(this.pendingTransports)||this.pendingTransports.every((function(e){return!e.isConnected}))},n.prototype.setConnection=function(e,t,n){var r=this.connectionId;(r&&r!==e||!r&&n)&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==e&&f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=e,this.realtime.connection.key=this.connectionKey=t.connectionKey},n.prototype.clearConnection=function(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()},n.prototype.createRecoveryKey=function(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null},n.prototype.checkConnectionStateFreshness=function(){if(this.lastActivity&&this.connectionId){var e=o.now()-this.lastActivity;e>this.connectionStateTtl+this.maxIdleInterval&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+e+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}},n.prototype.persistConnection=function(){if(k()){var t=this.createRecoveryKey();t&&function(e){var t,n;k()&&(null===(n=null===(t=u.default.WebStorage)||void 0===t?void 0:t.setSession)||void 0===n||n.call(t,O,e))}({recoveryKey:t,disconnectedAt:o.now(),location:e.location,clientId:this.realtime.auth.clientId})}},n.prototype.unpersistConnection=function(){!function(){var e,t;k()&&(null===(t=null===(e=u.default.WebStorage)||void 0===e?void 0:e.removeSession)||void 0===t||t.call(e,O))}()},n.prototype.getError=function(){return this.errorReason||this.getStateError()},n.prototype.getStateError=function(){var e,t;return null===(t=(e=h.default)[this.state.state])||void 0===t?void 0:t.call(e)},n.prototype.activeState=function(){return this.state.queueEvents||this.state.sendEvents},n.prototype.enactStateChange=function(e){var t="failed"===e.current?f.default.LOG_ERROR:f.default.LOG_MAJOR;f.default.logAction(t,"Connection state",e.current+(e.reason?"; reason: "+e.reason:"")),f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+e.current+"; reason = "+(e.reason&&e.reason.message));var n=this.state=this.states[e.current];e.reason&&(this.errorReason=e.reason,this.realtime.connection.errorReason=e.reason),(n.terminal||"suspended"===n.state)&&this.clearConnection(),this.emit("connectionstate",e)},n.prototype.startTransitionTimer=function(e){var t=this;f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+e.state),this.transitionTimer&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout((function(){t.transitionTimer&&(t.transitionTimer=null,f.default.logAction(f.default.LOG_MINOR,"ConnectionManager "+e.state+" timer expired","requesting new state: "+e.failState),t.notifyState({state:e.failState}))}),e.retryDelay)},n.prototype.cancelTransitionTimer=function(){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)},n.prototype.startSuspendTimer=function(){var e=this;this.suspendTimer||(this.suspendTimer=setTimeout((function(){e.suspendTimer&&(e.suspendTimer=null,f.default.logAction(f.default.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),e.states.connecting.failState="suspended",e.notifyState({state:"suspended"}))}),this.connectionStateTtl))},n.prototype.checkSuspendTimer=function(e){"disconnected"!==e&&"suspended"!==e&&"connecting"!==e&&this.cancelSuspendTimer()},n.prototype.cancelSuspendTimer=function(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)},n.prototype.startRetryTimer=function(e){var t=this;this.retryTimer=setTimeout((function(){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),t.retryTimer=null,t.requestState({state:"connecting"})}),e)},n.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},n.prototype.notifyState=function(e){var t,n,r=this,i=e.state,a="disconnected"===i&&(this.state===this.states.connected||this.state===this.states.synchronizing||e.retryImmediately||this.state===this.states.connecting&&e.error&&v.default.isTokenErr(e.error)&&!(this.errorReason&&v.default.isTokenErr(this.errorReason)));if(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+i+(a?"; will retry connection immediately":"")),i!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(e.state),"suspended"!==i&&"connected"!==i||(this.disconnectedRetryCount=0),!this.state.terminal)){var s=this.states[e.state],l=s.retryDelay;"disconnected"===s.state&&(this.disconnectedRetryCount++,l=s.retryDelay*o.getBackoffCoefficient(this.disconnectedRetryCount)*o.getJitterCoefficient());var c=new d.default(this.state.state,s.state,l,e.error||(null===(n=(t=h.default)[s.state])||void 0===n?void 0:n.call(t)));if(a){var p=function(){r.state===r.states.disconnected&&(r.lastAutoReconnectAttempt=o.now(),r.requestState({state:"connecting"}))},m=this.lastAutoReconnectAttempt&&o.now()-this.lastAutoReconnectAttempt+1;m&&m<1e3?(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+m+"ms ago, waiting another "+(1e3-m)+"ms before trying again"),setTimeout(p,1e3-m)):u.default.Config.nextTick(p)}else"disconnected"!==i&&"suspended"!==i||this.startRetryTimer(l);("disconnected"===i&&!a||"suspended"===i||s.terminal)&&u.default.Config.nextTick((function(){r.disconnectAllTransports()})),"connected"!=i||this.activeProtocol||f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(c),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(i,c.reason),this.failQueuedMessages(c.reason))}},n.prototype.requestState=function(e){var t,n,r=this,i=e.state;if(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+i+"; current state: "+this.state.state),i!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(i),("connecting"!=i||"connected"!=this.state.state)&&("closing"!=i||"closed"!=this.state.state))){var o=this.states[i],a=new d.default(this.state.state,o.state,null,e.error||(null===(n=(t=h.default)[o.state])||void 0===n?void 0:n.call(t)));this.enactStateChange(a),"connecting"==i&&u.default.Config.nextTick((function(){r.startConnect()})),"closing"==i&&this.closeImpl()}},n.prototype.startConnect=function(){var e=this;if(this.state===this.states.connecting){var t=this.realtime.auth,n=++this.connectCounter,r=function(){e.checkConnectionStateFreshness(),e.getTransportParams((function(t){if("recover"===t.mode&&t.options.recover){var r=x(t.options.recover);r&&e.realtime.channels.recoverChannels(r.channelSerials)}n===e.connectCounter&&e.connectImpl(t,n)}))};if(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),"basic"===t.method)r();else{var i=function(t){n===e.connectCounter&&(t?e.actOnErrorFromAuthorize(t):r())};this.errorReason&&v.default.isTokenErr(this.errorReason)?t._forceNewToken(null,null,i):t._ensureValidAuthCredentials(!1,i)}}else f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state)},n.prototype.connectImpl=function(e,t){var n=this.state.state;n!==this.states.connecting.state&&n!==this.states.connected.state?f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect (or connected to upgrade), but was "+n):this.pendingTransports.length?f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.connectImpl()","Transports "+this.pendingTransports[0].toString()+" currently pending; taking no action"):n==this.states.connected.state?this.upgradeIfNeeded(e):this.transports.length>1&&this.getTransportPreference()?this.connectPreference(e,t):this.connectBase(e,t)},n.prototype.connectPreference=function(e,t){var n=this,r=this.getTransportPreference(),i=!1;o.arrIn(this.transports,r)||(this.unpersistTransportPreference(),this.connectImpl(e,t)),f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.connectPreference()","Trying to connect with stored transport preference "+r);var a=setTimeout((function(){i=!0,n.state.state!==n.states.connected.state&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.connectPreference()","Shortcircuit connection attempt with "+r+" failed; clearing preference and trying from scratch"),n.disconnectAllTransports(),n.unpersistTransportPreference()),n.connectImpl(e,t)}),this.options.timeouts.preferenceConnectTimeout);e.host=this.httpHosts[0],this.tryATransport(e,r,(function(r,s){clearTimeout(a),i&&s?(s.off(),s.disconnect(),o.arrDeleteValue(n.pendingTransports,s)):s||r||(n.unpersistTransportPreference(),n.connectImpl(e,t))}))},n.prototype.connectBase=function(e,t){var n=this,r=function(e){n.notifyState({state:n.states.connecting.failState,error:e})},i=this.httpHosts.slice(),a=function(e,r){t===n.connectCounter&&(r||e||u())};f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.connectBase()","Trying to connect with base transport "+this.baseTransport);var s=i.shift();if(s){e.host=s;var u=function(){i.length?n.realtime.http.checkConnectivity?n.realtime.http.checkConnectivity((function(s,u){t===n.connectCounter&&(s?r(s):u?(e.host=o.arrPopRandomElement(i),n.tryATransport(e,n.baseTransport,a)):r(new p.default("Unable to connect (network unreachable)",80003,404)))})):r(new p.PartialErrorInfo("Internal error: Http.checkConnectivity not set",null,500)):r(new p.default("Unable to connect (and no more fallback hosts to try)",80003,404))};if(this.forceFallbackHost&&i.length)return this.forceFallbackHost=!1,void u();this.tryATransport(e,this.baseTransport,a)}else r(new p.default("Unable to connect (no available host)",80003,404))},n.prototype.getUpgradePossibilities=function(){var e=this.activeProtocol.getTransport().shortName,t=o.arrIndexOf(this.upgradeTransports,e);return this.upgradeTransports.slice(t+1)},n.prototype.upgradeIfNeeded=function(e){var t=this,n=this.getUpgradePossibilities();f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.upgradeIfNeeded()","upgrade possibilities: "+u.default.Config.inspect(n)),n.length&&o.arrForEach(n,(function(n){var r=t.createTransportParams(e.host,"upgrade");t.tryATransport(r,n,S)}))},n.prototype.closeImpl=function(){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),o.safeArrForEach(this.pendingTransports,(function(e){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+e),e&&e.close()})),o.safeArrForEach(this.proposedTransports,(function(e){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.closeImpl()","Disposing of proposed transport: "+e),e&&e.dispose()})),this.activeProtocol&&(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})},n.prototype.onAuthUpdated=function(e,t){var n,r=this;switch(this.state.state){case"connected":if(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport"),(this.pendingTransports.length||this.proposedTransports.length)&&this.state!==this.states.synchronizing){this.disconnectAllTransports(!0);var o=this.activeProtocol.getTransport().params;u.default.Config.nextTick((function(){"connected"===r.state.state&&r.upgradeIfNeeded(o)}))}var a=null===(n=this.activeProtocol)||void 0===n?void 0:n.getTransport();a&&a.onAuthUpdated&&a.onAuthUpdated(e);var s=i.default.fromValues({action:C.AUTH,auth:{accessToken:e.token}});this.send(s);var l=function(){r.off(c),t(null,e)},c=function e(n){"failed"===n.current&&(r.off(l),r.off(e),t(n.reason||r.getStateError()))};this.once("connectiondetails",l),this.on("connectionstate",c);break;case"connecting":f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed"),this.on("connectionstate",(function n(i){switch(i.current){case"connected":r.off(n),t(null,e);break;case"failed":case"closed":case"suspended":r.off(n),t(i.reason||r.getStateError())}})),"connecting"===this.state.state?this.startConnect():this.requestState({state:"connecting"})}},n.prototype.disconnectAllTransports=function(e){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"+(e?" except the active transport":"")),this.connectCounter++,o.safeArrForEach(this.pendingTransports,(function(e){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+e),e&&e.disconnect()})),this.pendingTransports=[],o.safeArrForEach(this.proposedTransports,(function(e){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disposing of proposed transport: "+e),e&&e.dispose()})),this.proposedTransports=[],this.activeProtocol&&!e&&(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())},n.prototype.send=function(e,t,n){n=n||S;var r=this.state;if(r.sendEvents)return f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.send()","sending event"),void this.sendImpl(new a.PendingMessage(e,n));if(!(t&&r.queueEvents||r.forceQueueEvents)){var o="rejecting event, queueEvent was "+t+", state was "+r.state;return f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.send()",o),void n(this.errorReason||new p.default(o,9e4,400))}f.default.shouldLog(f.default.LOG_MICRO)&&f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+i.default.stringify(e)),this.queue(e,n)},n.prototype.sendImpl=function(e){var t=e.message;e.ackRequired&&!e.sendAttempted&&(t.msgSerial=this.msgSerial++);try{this.activeProtocol.send(e)}catch(n){f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+n.stack)}},n.prototype.queue=function(e,t){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.queue()","queueing event");var n=this.queuedMessages.last(),r=this.options.maxMessageSize;n&&!n.sendAttempted&&function(e,t,n){var r;if(e.channel!==t.channel)return!1;if((r=e.action)!==C.PRESENCE&&r!==C.MESSAGE)return!1;if(r!==t.action)return!1;var i=r===C.PRESENCE?"presence":"messages",a=e[i].concat(t[i]);return!(m.default.getMessagesSize(a)>n)&&!!o.allSame(a,"clientId")&&!!o.arrEvery(a,(function(e){return!e.id}))&&(e[i]=a,!0)}(n.message,e,r)?(n.merged||(n.callback=g.default.create([n.callback]),n.merged=!0),n.callback.push(t)):this.queuedMessages.push(new a.PendingMessage(e,t))},n.prototype.sendQueuedMessages=function(){var e;for(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");e=this.queuedMessages.shift();)this.sendImpl(e)},n.prototype.queuePendingMessages=function(e){e&&e.length&&(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+e.length+" pending messages"),this.queuedMessages.prepend(e))},n.prototype.failQueuedMessages=function(e){var t=this.queuedMessages.count();t>0&&(f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+t+" queued messages, err = "+o.inspectError(e)),this.queuedMessages.completeAllMessages(e))},n.prototype.onChannelMessage=function(e,t){var n=this.activeProtocol&&t===this.activeProtocol.getTransport(),r=o.arrIn(this.pendingTransports,t)&&this.state==this.states.synchronizing;n||r||o.arrIndexOf([C.ACK,C.NACK,C.ERROR],e.action)>-1?this.realtime.channels.onChannelMessage(e):f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.onChannelMessage()","received message "+JSON.stringify(e)+"on defunct transport; discarding")},n.prototype.ping=function(e,t){var n=this;if(e){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.ping()","transport = "+e);var r=o.now(),i=o.cheapRandStr(),a=function n(a){if(a===i){e.off("heartbeat",n),clearTimeout(s);var u=o.now()-r;t(null,u)}},s=setTimeout((function(){e.off("heartbeat",a),t(new p.default("Timeout waiting for heartbeat response",5e4,500))}),this.options.timeouts.realtimeRequestTimeout);return e.on("heartbeat",a),void e.ping(i)}if("connected"===this.state.state){var l=!1,c=function(){l||(l=!0,u.default.Config.nextTick((function(){n.ping(null,t)})))};this.on("transport.active",c),this.ping(this.activeProtocol.getTransport(),(function(e,r){n.off("transport.active",c),l||(l=!0,t(e,r))}))}else t(new p.default("Unable to ping service; not connected",4e4,400))},n.prototype.abort=function(e){this.activeProtocol.getTransport().fail(e)},n.prototype.registerProposedTransport=function(e){this.proposedTransports.push(e)},n.prototype.getTransportPreference=function(){var e,t;return this.transportPreference||w()&&(null===(t=null===(e=u.default.WebStorage)||void 0===e?void 0:e.get)||void 0===t?void 0:t.call(e,E))},n.prototype.persistTransportPreference=function(e){var t,n;o.arrIn(s.default.upgradeTransports,e.shortName)&&(this.transportPreference=e.shortName,w()&&(null===(n=null===(t=u.default.WebStorage)||void 0===t?void 0:t.set)||void 0===n||n.call(t,E,e.shortName)))},n.prototype.unpersistTransportPreference=function(){var e,t;this.transportPreference=null,w()&&(null===(t=null===(e=u.default.WebStorage)||void 0===e?void 0:e.remove)||void 0===t||t.call(e,E))},n.prototype.actOnErrorFromAuthorize=function(e){if(40171===e.code)this.notifyState({state:"failed",error:e});else if(40102===e.code)this.notifyState({state:"failed",error:e});else if(e.statusCode===b.default.Forbidden){var t="Client configured authentication provider returned 403; failing the connection";f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",t),this.notifyState({state:"failed",error:new p.default(t,80019,403,e)})}else t="Client configured authentication provider request failed",f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",t),this.notifyState({state:this.state.failState,error:new p.default(t,80019,401,e)})},n.prototype.onConnectionDetailsUpdate=function(e,t){if(e){this.connectionDetails=e,e.maxMessageSize&&(this.options.maxMessageSize=e.maxMessageSize);var n=e.clientId;if(n){var r=this.realtime.auth._uncheckedSetClientId(n);if(r)return f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",r.message),void t.fail(r)}var i=e.connectionStateTtl;i&&(this.connectionStateTtl=i),this.maxIdleInterval=e.maxIdleInterval,this.emit("connectiondetails",e)}},n.supportedTransports={},n}(l.default);t.default=R}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importDefault(n(7)),o=r.__importDefault(n(2)),a=function(e){function t(){var t=e.call(this)||this;return t.messages=[],t}return r.__extends(t,e),t.prototype.count=function(){return this.messages.length},t.prototype.push=function(e){this.messages.push(e)},t.prototype.shift=function(){return this.messages.shift()},t.prototype.last=function(){return this.messages[this.messages.length-1]},t.prototype.copyAll=function(){return this.messages.slice()},t.prototype.append=function(e){this.messages.push.apply(this.messages,e)},t.prototype.prepend=function(e){this.messages.unshift.apply(this.messages,e)},t.prototype.completeMessages=function(e,t,n){o.default.logAction(o.default.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+e+"; count = "+t),n=n||null;var r=this.messages;if(0===r.length)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");var i=r[0];if(i){var a=i.message.msgSerial,s=e+t;if(s>a)for(var u=0,l=r.splice(0,s-a);u<l.length;u++)l[u].callback(n);0==r.length&&this.emit("idle")}},t.prototype.completeAllMessages=function(e){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,e)},t.prototype.resetSendAttempted=function(){for(var e=0,t=this.messages;e<t.length;e++)t[e].sendAttempted=!1},t.prototype.clear=function(){o.default.logAction(o.default.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")},t}(i.default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){this.previous=e,this.current=t,n&&(this.retryIn=n),r&&(this.reason=r)};t.default=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.isSuccessCode=void 0,function(e){e[e.Success=200]="Success",e[e.NoContent=204]="NoContent",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.RequestTimeout=408]="RequestTimeout",e[e.InternalServerError=500]="InternalServerError"}(r||(r={})),t.isSuccessCode=function(e){return e>=r.Success&&e<r.BadRequest},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importDefault(n(10)),o=r.__importDefault(n(7)),a=r.__importStar(n(1)),s=r.__importDefault(n(32)),u=r.__importDefault(n(2)),l=r.__importDefault(n(54)),c=r.__importDefault(n(9)),f=r.__importDefault(n(39)),d=r.__importStar(n(4)),h=r.__importDefault(n(14)),p=r.__importDefault(n(19)),v=i.default.Action,m=function(){},g=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.retryCount=0,i.history=function(e,t){if(u.default.logAction(u.default.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.rest.options.promises)return a.promisify(this,"history",arguments);t=m}if(e&&e.untilAttach){if("attached"!==this.state)return void t(new d.default("option untilAttach requires the channel to be attached",4e4,400));if(!this.properties.attachSerial)return void t(new d.default("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400));delete e.untilAttach,e.from_serial=this.properties.attachSerial}s.default.prototype._history.call(this,e,t)},i.whenState=function(e,t){return o.default.prototype.whenState.call(i,e,i.state,t)},u.default.logAction(u.default.LOG_MINOR,"RealtimeChannel()","started; name = "+n),i.realtime=t,i.presence=new l.default(i),i.connectionManager=t.connection.connectionManager,i.state="initialized",i.subscriptions=new o.default,i.syncChannelSerial=void 0,i.properties={attachSerial:void 0,channelSerial:void 0},i.setOptions(r),i.errorReason=null,i._requestedFlags=null,i._mode=null,i._attachResume=!1,i._decodingContext={channelOptions:i.channelOptions,plugins:t.options.plugins||{},baseEncodedPreviousPayload:void 0},i._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},i._allChannelChanges=new o.default,i}return r.__extends(t,e),t.prototype.invalidStateError=function(){return new d.default("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)},t.processListenerArgs=function(e){return"function"===typeof(e=Array.prototype.slice.call(e))[0]&&e.unshift(null),void 0==e[e.length-1]&&e.pop(),e},t.prototype.setOptions=function(e,t){if(!t&&this.rest.options.promises)return a.promisify(this,"setOptions",arguments);var n=t||function(e){e&&u.default.logAction(u.default.LOG_ERROR,"RealtimeChannel.setOptions()","Set options failed: "+e.toString())},r=function(e){if(e&&"params"in e&&!a.isObject(e.params))return new d.default("options.params must be an object",4e4,400);if(e&&"modes"in e){if(!a.isArray(e.modes))return new d.default("options.modes must be an array",4e4,400);for(var t=0;t<e.modes.length;t++){var n=e.modes[t];if(!n||"string"!==typeof n||!a.arrIn(i.default.channelModes,String.prototype.toUpperCase.call(n)))return new d.default("Invalid channel mode: "+n,4e4,400)}}}(e);r?n(r):(s.default.prototype.setOptions.call(this,e),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(e)?(this.attachImpl(),this._allChannelChanges.once(["attached","update","detached","failed"],(function(e){switch(this.event){case"update":case"attached":return void(null===n||void 0===n||n(null));default:return void(null===n||void 0===n||n(e.reason))}}))):n())},t.prototype._shouldReattachToSetOptions=function(e){return("attached"===this.state||"attaching"===this.state)&&((null===e||void 0===e?void 0:e.params)||(null===e||void 0===e?void 0:e.modes))},t.prototype.publish=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t.length,o=t[i-1];if("function"!==typeof o){if(this.realtime.options.promises)return a.promisify(this,"publish",arguments);o=m,++i}if(this.connectionManager.activeState()){if(2==i)if(a.isObject(r))r=[c.default.fromValues(r)];else{if(!a.isArray(r))throw new d.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);r=c.default.fromValuesArray(r)}else r=[c.default.fromValues({name:t[0],data:t[1]})];var s=this.realtime.options.maxMessageSize;c.default.encodeArray(r,this.channelOptions,(function(t){if(t)o(t);else{var n=c.default.getMessagesSize(r);n>s?o(new d.default("Maximum size of messages that can be published at once exceeded ( was "+n+" bytes; limit is "+s+" bytes)",40009,400)):e.__publish(r,o)}}))}else o(this.connectionManager.getError())},t.prototype.__publish=function(e,t){u.default.logAction(u.default.LOG_MICRO,"RealtimeChannel.publish()","message count = "+e.length);var n=this.state;switch(n){case"failed":case"suspended":t(d.default.fromValues(this.invalidStateError()));break;default:u.default.logAction(u.default.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+n);var r=new i.default;r.action=v.MESSAGE,r.channel=this.name,r.messages=e,this.sendMessage(r,t)}},t.prototype.onEvent=function(e){u.default.logAction(u.default.LOG_MICRO,"RealtimeChannel.onEvent()","received message");for(var t=this.subscriptions,n=0;n<e.length;n++){var r=e[n];t.emit(r.name,r)}},t.prototype.attach=function(e,t){var n;if("function"===typeof e?(t=e,n=null):n=e,!t){if(this.realtime.options.promises)return a.promisify(this,"attach",arguments);t=function(e){e&&u.default.logAction(u.default.LOG_MAJOR,"RealtimeChannel.attach()","Channel attach failed: "+e.toString())}}if(n)u.default.deprecated("channel.attach() with flags","channel.setOptions() with channelOptions.params"),this._requestedFlags=n;else if("attached"===this.state)return void t(null,null);this._attach(!1,null,t)},t.prototype._attach=function(e,t,n){n||(n=function(e){e&&u.default.logAction(u.default.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+e.toString())});var r=this.connectionManager;r.activeState()?(("attaching"!==this.state||e)&&this.requestState("attaching",t),this.once((function(e){switch(this.event){case"attached":null===n||void 0===n||n(null,e);break;case"detached":case"suspended":case"failed":null===n||void 0===n||n(e.reason||r.getError()||new d.default("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":null===n||void 0===n||n(new d.default("Attach request superseded by a subsequent detach request",9e4,409))}}))):n(r.getError())},t.prototype.attachImpl=function(){u.default.logAction(u.default.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");var e=i.default.fromValues({action:v.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?e.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&e.encodeModesToFlags(a.allToUpperCase(this.channelOptions.modes)),this._attachResume&&e.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(e.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(e,m)},t.prototype.detach=function(e){if(!e){if(this.realtime.options.promises)return a.promisify(this,"detach",arguments);e=m}var t=this.connectionManager;if(t.activeState())switch(this.state){case"suspended":this.notifyState("detached"),e();break;case"detached":e();break;case"failed":e(new d.default("Unable to detach; channel state = failed",90001,400));break;default:this.requestState("detaching");case"detaching":this.once((function(n){switch(this.event){case"detached":e();break;case"attached":case"suspended":case"failed":e(n.reason||t.getError()||new d.default("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":e(new d.default("Detach request superseded by a subsequent attach request",9e4,409))}}))}else e(t.getError())},t.prototype.detachImpl=function(e){u.default.logAction(u.default.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");var t=i.default.fromValues({action:v.DETACH,channel:this.name});this.sendMessage(t,e||m)},t.prototype.subscribe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.processListenerArgs(e),i=r[0],o=r[1],s=r[2];return!s&&this.realtime.options.promises?a.promisify(this,"subscribe",[i,o]):"failed"!==this.state?(i&&"object"===typeof i&&!Array.isArray(i)?this._subscribeFilter(i,o):this.subscriptions.on(i,o),this.attach(s||m)):void(null===s||void 0===s||s(d.default.fromValues(this.invalidStateError())))},t.prototype._subscribeFilter=function(e,t){var n=function(n){var r,i,o,a,s,u,l={name:n.name,refTimeserial:null===(i=null===(r=n.extras)||void 0===r?void 0:r.ref)||void 0===i?void 0:i.timeserial,refType:null===(a=null===(o=n.extras)||void 0===o?void 0:o.ref)||void 0===a?void 0:a.type,isRef:!!(null===(u=null===(s=n.extras)||void 0===s?void 0:s.ref)||void 0===u?void 0:u.timeserial),clientId:n.clientId};Object.entries(e).find((function(e){var t=e[0],n=e[1];return void 0!==n&&l[t]!==n}))||t(n)};this._addFilteredSubscription(e,t,n),this.subscriptions.on(n)},t.prototype._addFilteredSubscription=function(e,t,n){var r;if(this.filteredSubscriptions||(this.filteredSubscriptions=new Map),this.filteredSubscriptions.has(t)){var i=this.filteredSubscriptions.get(t);i.set(e,(null===(r=null===i||void 0===i?void 0:i.get(e))||void 0===r?void 0:r.concat(n))||[n])}else this.filteredSubscriptions.set(t,new Map([[e,[n]]]))},t.prototype._getAndDeleteFilteredSubscriptions=function(e,t){var n=this;if(!this.filteredSubscriptions)return[];if(!t&&e)return Array.from(this.filteredSubscriptions.entries()).map((function(t){var r,i=t[0],o=t[1],a=o.get(e);return o.delete(e),0===o.size&&(null===(r=n.filteredSubscriptions)||void 0===r||r.delete(i)),a})).reduce((function(e,t){var n;return t?(n=e).concat.apply(n,t):e}),[]);if(!t||!this.filteredSubscriptions.has(t))return[];var r=this.filteredSubscriptions.get(t);if(!e){var i=Array.from(r.values()).reduce((function(e,t){return e.concat.apply(e,t)}),[]);return this.filteredSubscriptions.delete(t),i}var o=r.get(e);return r.delete(e),o||[]},t.prototype.unsubscribe=function(){for(var e,n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=t.processListenerArgs(r),a=o[0],s=o[1];"object"===typeof a&&!s||(null===(e=this.filteredSubscriptions)||void 0===e?void 0:e.has(s))?this._getAndDeleteFilteredSubscriptions(a,s).forEach((function(e){return n.subscriptions.off(e)})):this.subscriptions.off(a,s)},t.prototype.sync=function(){switch(this.state){case"initialized":case"detaching":case"detached":throw new d.PartialErrorInfo("Unable to sync to channel; not attached",4e4)}var e=this.connectionManager;if(!e.activeState())throw e.getError();var t=i.default.fromValues({action:v.SYNC,channel:this.name});this.syncChannelSerial&&(t.channelSerial=this.syncChannelSerial),e.send(t)},t.prototype.sendMessage=function(e,t){this.connectionManager.send(e,this.realtime.options.queueMessages,t)},t.prototype.sendPresence=function(e,t){var n=i.default.fromValues({action:v.PRESENCE,channel:this.name,presence:a.isArray(e)?h.default.fromValuesArray(e):[h.default.fromValues(e)]});this.sendMessage(n,t)},t.prototype.onMessage=function(e){e.action!==v.ATTACHED&&e.action!==v.MESSAGE&&e.action!==v.PRESENCE||this.setChannelSerial(e.channelSerial);var t,n=!1;switch(e.action){case v.ATTACHED:this.properties.attachSerial=e.channelSerial,this._mode=e.getMode(),this.params=e.params||{};var r=e.decodeModesFromFlags();this.modes=r&&a.allToLowerCase(r)||void 0;var i=e.hasFlag("RESUMED"),o=e.hasFlag("HAS_PRESENCE"),s=e.hasFlag("HAS_BACKLOG");if("attached"===this.state){i||this.presence.onAttached(o);var l=new f.default(this.state,this.state,i,s,e.error);this._allChannelChanges.emit("update",l),i&&!this.channelOptions.updateOnAttached||this.emit("update",l)}else"detaching"===this.state?this.checkPendingState():this.notifyState("attached",e.error,i,o,s);break;case v.DETACHED:var m=e.error?d.default.fromValues(e.error):new d.default("Channel detached",90001,404);"detaching"===this.state?this.notifyState("detached",m):"attaching"===this.state?this.notifyState("suspended",m):this.requestState("attaching",m);break;case v.SYNC:if(n=!0,t=this.syncChannelSerial=e.channelSerial,!e.presence)break;case v.PRESENCE:for(var g=e.presence,y=e.id,_=e.connectionId,b=e.timestamp,w=this.channelOptions,k=void 0,C=0;C<g.length;C++)try{k=g[C],h.default.decode(k,w),k.connectionId||(k.connectionId=_),k.timestamp||(k.timestamp=b),k.id||(k.id=y+":"+C)}catch(R){u.default.logAction(u.default.LOG_ERROR,"RealtimeChannel.onMessage()",R.toString())}this.presence.setPresence(g,n,t);break;case v.MESSAGE:if("attached"!==this.state)return void u.default.logAction(u.default.LOG_MAJOR,"RealtimeChannel.onMessage()",'Message "'+e.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');var S=e.messages,E=S[0],O=S[S.length-1];if(y=e.id,_=e.connectionId,b=e.timestamp,E.extras&&E.extras.delta&&E.extras.delta.from!==this._lastPayload.messageId){var x='Delta message decode failure - previous message not available for message "'+e.id+'" on this channel "'+this.name+'".';u.default.logAction(u.default.LOG_ERROR,"RealtimeChannel.onMessage()",x),this._startDecodeFailureRecovery(new d.default(x,40018,400));break}for(C=0;C<S.length;C++){x=S[C];try{c.default.decode(x,this._decodingContext)}catch(R){switch(u.default.logAction(u.default.LOG_ERROR,"RealtimeChannel.onMessage()",R.toString()),R.code){case 40018:return void this._startDecodeFailureRecovery(R);case 40019:case 40021:return void this.notifyState("failed",R)}}x.connectionId||(x.connectionId=_),x.timestamp||(x.timestamp=b),x.id||(x.id=y+":"+C)}this._lastPayload.messageId=O.id,this._lastPayload.protocolMessageChannelSerial=e.channelSerial,this.onEvent(S);break;case v.ERROR:var T=e.error;T&&80016==T.code?this.checkPendingState():this.notifyState("failed",d.default.fromValues(T));break;default:u.default.logAction(u.default.LOG_ERROR,"RealtimeChannel.onMessage()","Fatal protocol error: unrecognised action ("+e.action+")"),this.connectionManager.abort(p.default.unknownChannelErr())}},t.prototype._startDecodeFailureRecovery=function(e){var t=this;this._lastPayload.decodeFailureRecoveryInProgress||(u.default.logAction(u.default.LOG_MAJOR,"RealtimeChannel.onMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,e,(function(){t._lastPayload.decodeFailureRecoveryInProgress=!1})))},t.prototype.onAttached=function(){u.default.logAction(u.default.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)},t.prototype.notifyState=function(e,t,n,r,i){if(u.default.logAction(u.default.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+e),this.clearStateTimer(),a.arrIn(["detached","suspended","failed"],e)&&(this.properties.channelSerial=null),e!==this.state){this.presence.actOnChannelState(e,r,t),"suspended"===e&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),t&&(this.errorReason=t);var o=new f.default(this.state,e,n,i,t),s="failed"===e?u.default.LOG_ERROR:u.default.LOG_MAJOR;u.default.logAction(s,'Channel state for channel "'+this.name+'"',e+(t?"; reason: "+t:"")),"attaching"!==e&&"suspended"!==e&&(this.retryCount=0),"attached"===e&&this.onAttached(),"attached"===e?this._attachResume=!0:"detaching"!==e&&"failed"!==e||(this._attachResume=!1),this.state=e,this._allChannelChanges.emit(e,o),this.emit(e,o)}},t.prototype.requestState=function(e,t){u.default.logAction(u.default.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+e),this.notifyState(e,t),this.checkPendingState()},t.prototype.checkPendingState=function(){var e=this.connectionManager.state;if(e.sendEvents||e.forceQueueEvents)switch(u.default.logAction(u.default.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync()}else u.default.logAction(u.default.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state)},t.prototype.timeoutPendingState=function(){switch(this.state){case"attaching":var e=new d.default("Channel attach timed out",90007,408);this.notifyState("suspended",e);break;case"detaching":e=new d.default("Channel detach timed out",90007,408),this.notifyState("attached",e);break;default:this.checkPendingState()}},t.prototype.startStateTimerIfNotRunning=function(){var e=this;this.stateTimer||(this.stateTimer=setTimeout((function(){u.default.logAction(u.default.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),e.stateTimer=null,e.timeoutPendingState()}),this.realtime.options.timeouts.realtimeRequestTimeout))},t.prototype.clearStateTimer=function(){var e=this.stateTimer;e&&(clearTimeout(e),this.stateTimer=null)},t.prototype.startRetryTimer=function(){var e=this;if(!this.retryTimer){this.retryCount++;var t=this.realtime.options.timeouts.channelRetryTimeout*a.getJitterCoefficient()*a.getBackoffCoefficient(this.retryCount);this.retryTimer=setTimeout((function(){"suspended"===e.state&&e.connectionManager.state.sendEvents&&(e.retryTimer=null,u.default.logAction(u.default.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),e.requestState("attaching"))}),t)}},t.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},t.prototype.getReleaseErr=function(){var e=this.state;return"initialized"===e||"detached"===e||"failed"===e?null:new d.default("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+e,90001,400)},t.prototype.setChannelSerial=function(e){u.default.logAction(u.default.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+e+"; previous = "+this.properties.channelSerial),e&&(this.properties.channelSerial=e)},t}(s.default);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,i){this.previous=e,this.current=t,"attached"===t&&(this.resumed=n,this.hasBacklog=r),i&&(this.reason=i)};t.default=r},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),function(){var e=i,t=e.lib,n=t.WordArray,r=t.Hasher,o=e.algo,a=[],s=o.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],l=0;l<80;l++){if(l<16)a[l]=0|e[t+l];else{var c=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=c<<1|c>>>31}var f=(r<<5|r>>>27)+u+a[l];f+=l<20?1518500249+(i&o|~i&s):l<40?1859775393+(i^o^s):l<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,u=s,s=o,o=i<<30|i>>>2,i=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(s),e.HmacSHA1=r._createHmacHelper(s)}(),i.SHA1)}()},function(e,t,n){"use strict";function r(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n.charCodeAt(r);if(o<128)e.setUint8(t++,o>>>0&127|0);else if(o<2048)e.setUint8(t++,o>>>6&31|192),e.setUint8(t++,o>>>0&63|128);else if(o<65536)e.setUint8(t++,o>>>12&15|224),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128);else{if(!(o<1114112))throw new Error("bad codepoint "+o);e.setUint8(t++,o>>>18&7|240),e.setUint8(t++,o>>>12&63|128),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128)}}}function i(e,t,n){for(var r="",i=t,o=t+n;i<o;i++){var a=e.getUint8(i);if(0!==(128&a))if(192!==(224&a))if(224!==(240&a)){if(240!==(248&a))throw new Error("Invalid byte "+a.toString(16));r+=String.fromCharCode((7&a)<<18|(63&e.getUint8(++i))<<12|(63&e.getUint8(++i))<<6|(63&e.getUint8(++i))<<0)}else r+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++i))<<6|(63&e.getUint8(++i))<<0);else r+=String.fromCharCode((15&a)<<6|63&e.getUint8(++i));else r+=String.fromCharCode(a)}return r}function o(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t+=1;else if(i<2048)t+=2;else if(i<65536)t+=3;else{if(!(i<1114112))throw new Error("bad codepoint "+i);t+=4}}return t}Object.defineProperty(t,"__esModule",{value:!0});var a=4294967296,s=1/a,u=function(e,t){var n=this;this.map=function(e){for(var t={},r=0;r<e;r++)t[n.parse()]=n.parse();return t},this.bin=function(e){var t=new ArrayBuffer(e);return new Uint8Array(t).set(new Uint8Array(n.view.buffer,n.offset,e),0),n.offset+=e,t},this.buf=this.bin,this.str=function(e){var t=i(n.view,n.offset,e);return n.offset+=e,t},this.array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=n.parse();return t},this.ext=function(e){return n.offset+=e,{type:n.view.getInt8(n.offset),data:n.buf(e)}},this.parse=function(){var e,t,r=n.view.getUint8(n.offset);if(0===(128&r))return n.offset++,r;if(128===(240&r))return t=15&r,n.offset++,n.map(t);if(144===(240&r))return t=15&r,n.offset++,n.array(t);if(160===(224&r))return t=31&r,n.offset++,n.str(t);if(224===(224&r))return e=n.view.getInt8(n.offset),n.offset++,e;switch(r){case 192:return n.offset++,null;case 193:return void n.offset++;case 194:return n.offset++,!1;case 195:return n.offset++,!0;case 196:return t=n.view.getUint8(n.offset+1),n.offset+=2,n.bin(t);case 197:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.bin(t);case 198:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.bin(t);case 199:return t=n.view.getUint8(n.offset+1),n.offset+=2,n.ext(t);case 200:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.ext(t);case 201:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.ext(t);case 202:return e=n.view.getFloat32(n.offset+1),n.offset+=5,e;case 203:return e=n.view.getFloat64(n.offset+1),n.offset+=9,e;case 204:return e=n.view.getUint8(n.offset+1),n.offset+=2,e;case 205:return e=n.view.getUint16(n.offset+1),n.offset+=3,e;case 206:return e=n.view.getUint32(n.offset+1),n.offset+=5,e;case 207:return e=function(e,t){return t=t||0,e.getUint32(t)*a+e.getUint32(t+4)}(n.view,n.offset+1),n.offset+=9,e;case 208:return e=n.view.getInt8(n.offset+1),n.offset+=2,e;case 209:return e=n.view.getInt16(n.offset+1),n.offset+=3,e;case 210:return e=n.view.getInt32(n.offset+1),n.offset+=5,e;case 211:return e=function(e,t){return t=t||0,e.getInt32(t)*a+e.getUint32(t+4)}(n.view,n.offset+1),n.offset+=9,e;case 212:return t=1,n.offset++,n.ext(t);case 213:return t=2,n.offset++,n.ext(t);case 214:return t=4,n.offset++,n.ext(t);case 215:return t=8,n.offset++,n.ext(t);case 216:return t=16,n.offset++,n.ext(t);case 217:return t=n.view.getUint8(n.offset+1),n.offset+=2,n.str(t);case 218:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.str(t);case 219:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.str(t);case 220:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.array(t);case 221:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.array(t);case 222:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.map(t);case 223:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.map(t)}throw new Error("Unknown type 0x"+r.toString(16))},this.offset=t||0,this.view=e};function l(e,t){return Object.keys(e).filter((function(n){var r=e[n];return(!t||void 0!==r&&null!==r)&&("function"!==typeof r||!!r.toJSON)}))}function c(e,t,n,i){var a=typeof e;if("string"===typeof e){var u=o(e);if(u<32)return t.setUint8(n,160|u),r(t,n+1,e),1+u;if(u<256)return t.setUint8(n,217),t.setUint8(n+1,u),r(t,n+2,e),2+u;if(u<65536)return t.setUint8(n,218),t.setUint16(n+1,u),r(t,n+3,e),3+u;if(u<4294967296)return t.setUint8(n,219),t.setUint32(n+1,u),r(t,n+5,e),5+u}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){var f=e.byteLength;if(f<256)return t.setUint8(n,196),t.setUint8(n+1,f),new Uint8Array(t.buffer).set(new Uint8Array(e),n+2),2+f;if(f<65536)return t.setUint8(n,197),t.setUint16(n+1,f),new Uint8Array(t.buffer).set(new Uint8Array(e),n+3),3+f;if(f<4294967296)return t.setUint8(n,198),t.setUint32(n+1,f),new Uint8Array(t.buffer).set(new Uint8Array(e),n+5),5+f}if("number"===typeof e){if(Math.floor(e)!==e)return t.setUint8(n,203),t.setFloat64(n+1,e),9;if(e>=0){if(e<128)return t.setUint8(n,e),1;if(e<256)return t.setUint8(n,204),t.setUint8(n+1,e),2;if(e<65536)return t.setUint8(n,205),t.setUint16(n+1,e),3;if(e<4294967296)return t.setUint8(n,206),t.setUint32(n+1,e),5;if(e<0x10000000000000000)return t.setUint8(n,207),function(e,t,n){n<0x10000000000000000?(e.setUint32(t,Math.floor(n*s)),e.setInt32(t+4,-1&n)):(e.setUint32(t,4294967295),e.setUint32(t+4,4294967295))}(t,n+1,e),9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(n,e),1;if(e>=-128)return t.setUint8(n,208),t.setInt8(n+1,e),2;if(e>=-32768)return t.setUint8(n,209),t.setInt16(n+1,e),3;if(e>=-2147483648)return t.setUint8(n,210),t.setInt32(n+1,e),5;if(e>=-0x8000000000000000)return t.setUint8(n,211),function(e,t,n){n<0x8000000000000000?(e.setInt32(t,Math.floor(n*s)),e.setInt32(t+4,-1&n)):(e.setUint32(t,2147483647),e.setUint32(t+4,2147483647))}(t,n+1,e),9;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if("undefined"===a)return i?0:(t.setUint8(n,212),t.setUint8(n+1,0),t.setUint8(n+2,0),3);if(null===e)return i?0:(t.setUint8(n,192),1);if("boolean"===a)return t.setUint8(n,e?195:194),1;if("function"===typeof e.toJSON)return c(e.toJSON(),t,n,i);if("object"===a){var d,h=0,p=void 0,v=Array.isArray(e);if((d=v?e.length:(p=l(e,i)).length)<16?(t.setUint8(n,d|(v?144:128)),h=1):d<65536?(t.setUint8(n,v?220:222),t.setUint16(n+1,d),h=3):d<4294967296&&(t.setUint8(n,v?221:223),t.setUint32(n+1,d),h=5),v)for(var m=0;m<d;m++)h+=c(e[m],t,n+h,i);else if(p)for(m=0;m<d;m++){var g=p[m];h+=c(g,t,n+h),h+=c(e[g],t,n+h,i)}return h}if("function"===a)return 0;throw new Error("Unknown type "+a)}function f(e,t){var n=typeof e;if("string"===n){var r=o(e);if(r<32)return 1+r;if(r<256)return 2+r;if(r<65536)return 3+r;if(r<4294967296)return 5+r}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){var i=e.byteLength;if(i<256)return 2+i;if(i<65536)return 3+i;if(i<4294967296)return 5+i}if("number"===typeof e){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===n)return 1;if(null===e)return t?0:1;if(void 0===e)return t?0:3;if("function"===typeof e.toJSON)return f(e.toJSON(),t);if("object"===n){var a,s=0;if(Array.isArray(e)){a=e.length;for(var u=0;u<a;u++)s+=f(e[u],t)}else{var c=l(e,t);for(a=c.length,u=0;u<a;u++){var d=c[u];s+=f(d)+f(e[d],t)}}if(a<16)return 1+s;if(a<65536)return 3+s;if(a<4294967296)return 5+s;throw new Error("Array or object too long 0x"+a.toString(16))}if("function"===n)return 0;throw new Error("Unknown type "+n)}t.default={encode:function(e,t){var n=f(e,t);if(0!==n){var r=new ArrayBuffer(n);return c(e,new DataView(r),0,t),r}},decode:function(e){var t=new DataView(e),n=new u(t),r=n.parse();if(n.offset!==e.byteLength)throw new Error(e.byteLength-n.offset+" trailing bytes");return r},inspect:function(e){if(void 0===e)return"undefined";var t,n;if(e instanceof ArrayBuffer?(n="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(n="DataView",t=e),!t)return JSON.stringify(e);for(var r=[],i=0;i<e.byteLength;i++){if(i>20){r.push("...");break}var o=t.getUint8(i).toString(16);1===o.length&&(o="0"+o),r.push(o)}return"<"+n+" "+r.join(" ")+">"},utf8Write:r,utf8Read:i,utf8ByteCount:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importDefault(n(29)),o=r.__importDefault(n(50)),a=r.__importDefault(n(3)),s=r.__importDefault(n(55)),u=r.__importDefault(n(57)),l=r.__importDefault(n(62)),c=r.__importDefault(n(64)),f=r.__importDefault(n(68)),d=r.__importDefault(n(2)),h=n(8),p=r.__importDefault(n(65)),v=r.__importDefault(n(66)),m=r.__importDefault(n(41)),g=(0,u.default)(c.default,s.default);a.default.Crypto=g,a.default.BufferUtils=s.default,a.default.Http=l.default,a.default.Config=c.default,a.default.Transports=f.default,a.default.WebStorage=p.default,i.default.Crypto=g,o.default.Crypto=g,d.default.initLogHandlers(),a.default.Defaults=(0,h.getDefaults)(v.default),a.default.Config.agent&&(a.default.Defaults.agent+=" "+a.default.Config.agent),a.default.Config.noUpgrade&&(a.default.Defaults.upgradeTransports=[]),t.default={Rest:i.default,Realtime:o.default,msgpack:m.default}},function(e){e.exports=JSON.parse('{"name":"ably","description":"Realtime client library for Ably, the realtime messaging service","version":"1.2.41","license":"Apache-2.0","bugs":{"url":"https://github.com/ably/ably-js/issues","email":"support@ably.com"},"main":"./build/ably-node.js","typings":"./ably.d.ts","react-native":{"./build/ably-node.js":"./build/ably-reactnative.js"},"browser":{"./build/ably-node.js":"./build/ably-commonjs.js"},"files":["build/**","ably.d.ts","callbacks.d.ts","callbacks.js","promises.d.ts","promises.js","resources/**"],"dependencies":{"@ably/msgpack-js":"^0.4.0","got":"^11.8.5","ws":"^5.1"},"devDependencies":{"@ably/vcdiff-decoder":"1.0.4","@types/crypto-js":"^4.0.1","@types/node":"^15.0.0","@types/request":"^2.48.7","@types/ws":"^8.2.0","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0","async":"ably-forks/async#requirejs","aws-sdk":"^2.1075.0","chai":"^4.2.0","copy-webpack-plugin":"^6.4.1","cors":"~2.7","crypto-js":"ably-forks/crypto-js#crypto-lite","eslint":"^7.13.0","eslint-plugin-jsdoc":"^40.0.0","eslint-plugin-security":"^1.4.0","express":"^4.17.1","glob":"~4.4","google-closure-compiler":"^20180610.0.1","grunt":"^1.4.1","grunt-bump":"^0.3.1","grunt-cli":"~1.2.0","grunt-closure-tools":"^1.0.0","grunt-contrib-concat":"~0.5","grunt-shell":"~1.1","grunt-webpack":"^4.0.2","hexy":"~0.2","kexec":"ably-forks/node-kexec#update-for-node-12","minimist":"^1.2.5","mocha":"^8.1.3","null-loader":"^4.0.1","playwright":"^1.10.0","prettier":"^2.5.1","requirejs":"~2.1","shelljs":"~0.8","source-map-explorer":"^2.5.2","ts-loader":"^8.2.0","tsconfig-paths-webpack-plugin":"^3.5.2","tslib":"^2.3.1","typedoc":"^0.23.8","typescript":"^4.6.4","webpack":"^4.44.2","webpack-cli":"^4.2.0"},"engines":{"node":">=5.10.x"},"repository":"ably/ably-js","jspm":{"registry":"npm","directories":{"lib":"build"},"main":"ably"},"scripts":{"grunt":"grunt","test":"grunt test","test:node":"grunt test:node","test:webserver":"grunt test:webserver","test:playwright":"node test/support/runPlaywrightTests.js","concat":"grunt concat","build":"grunt build:all","build:node":"grunt build:node","build:browser":"grunt build:browser","requirejs":"grunt requirejs","lint":"eslint .","lint:fix":"eslint --fix .","check-closure-compiler":"grunt check-closure-compiler","prepare":"npm run build","format":"prettier --write --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js docs/chrome-mv3.md","format:check":"prettier --check --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js","sourcemap":"source-map-explorer build/ably.min.js","sourcemap:noencryption":"source-map-explorer build/ably.noencryption.min.js","docs":"typedoc --entryPoints ably.d.ts --out docs/generated/default --readme docs/landing-pages/default.md && typedoc --entryPoints promises.d.ts --out docs/generated/promises --name \\"ably (Promise-based)\\" --readme docs/landing-pages/promises.md && cp docs/landing-pages/choose-library.html docs/generated/index.html"}}')},function(e,t){},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),n(31),n(23),i.HmacSHA256)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(47)),a=r.__importDefault(n(24)),s=r.__importDefault(n(18)),u=r.__importDefault(n(4)),l=r.__importDefault(n(48)),c=function(){},f=function(e){this.rest=e,this.admin=new d(e)},d=function(){function e(e){this.rest=e,this.deviceRegistrations=new h(e),this.channelSubscriptions=new p(e)}return e.prototype.publish=function(e,t,n){var r=this.rest,o=r.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,s=i.defaultPostHeaders(r.options,o),u={},l=i.mixin({recipient:e},t);if("function"!==typeof n){if(this.rest.options.promises)return i.promisify(this,"publish",arguments);n=c}r.options.headers&&i.mixin(s,r.options.headers),r.options.pushFullWait&&i.mixin(u,{fullWait:"true"});var f=i.encodeBody(l,o);a.default.post(r,"/push/publish",f,s,u,null,(function(e){return n(e)}))},e}(),h=function(){function e(e){this.rest=e}return e.prototype.save=function(e,t){var n=this.rest,r=o.default.fromValues(e),s=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,u=i.defaultPostHeaders(n.options,s),l={};if("function"!==typeof t){if(this.rest.options.promises)return i.promisify(this,"save",arguments);t=c}n.options.headers&&i.mixin(u,n.options.headers),n.options.pushFullWait&&i.mixin(l,{fullWait:"true"});var f=i.encodeBody(r,s);a.default.put(n,"/push/deviceRegistrations/"+encodeURIComponent(e.id),f,u,l,null,(function(e,n,r,i){t(e,e?void 0:o.default.fromResponseBody(n,i?void 0:s))}))},e.prototype.get=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,s=i.defaultGetHeaders(n.options,r),l=e.id||e;if("function"!==typeof t){if(this.rest.options.promises)return i.promisify(this,"get",arguments);t=c}"string"===typeof l&&l.length?(n.options.headers&&i.mixin(s,n.options.headers),a.default.get(n,"/push/deviceRegistrations/"+encodeURIComponent(l),s,{},null,(function(e,n,i,a){t(e,e?void 0:o.default.fromResponseBody(n,a?void 0:r))}))):t(new u.default("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400))},e.prototype.list=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,a=this.rest.http.supportsLinkHeaders?void 0:r,u=i.defaultGetHeaders(n.options,r);if("function"!==typeof t){if(this.rest.options.promises)return i.promisify(this,"list",arguments);t=c}n.options.headers&&i.mixin(u,n.options.headers),new s.default(n,"/push/deviceRegistrations",u,a,(function(e,t,n){return o.default.fromResponseBody(e,n?void 0:r)})).get(e,t)},e.prototype.remove=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,o=i.defaultGetHeaders(n.options,r),s={},l=e.id||e;if("function"!==typeof t){if(this.rest.options.promises)return i.promisify(this,"remove",arguments);t=c}"string"===typeof l&&l.length?(n.options.headers&&i.mixin(o,n.options.headers),n.options.pushFullWait&&i.mixin(s,{fullWait:"true"}),a.default.delete(n,"/push/deviceRegistrations/"+encodeURIComponent(l),o,s,null,(function(e){return t(e)}))):t(new u.default("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400))},e.prototype.removeWhere=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,o=i.defaultGetHeaders(n.options,r);if("function"!==typeof t){if(this.rest.options.promises)return i.promisify(this,"removeWhere",arguments);t=c}n.options.headers&&i.mixin(o,n.options.headers),n.options.pushFullWait&&i.mixin(e,{fullWait:"true"}),a.default.delete(n,"/push/deviceRegistrations",o,e,null,(function(e){return t(e)}))},e}(),p=function(){function e(t){this.remove=e.prototype.removeWhere,this.rest=t}return e.prototype.save=function(e,t){var n=this.rest,r=l.default.fromValues(e),o=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,s=i.defaultPostHeaders(n.options,o),u={};if("function"!==typeof t){if(this.rest.options.promises)return i.promisify(this,"save",arguments);t=c}n.options.headers&&i.mixin(s,n.options.headers),n.options.pushFullWait&&i.mixin(u,{fullWait:"true"});var f=i.encodeBody(r,o);a.default.post(n,"/push/channelSubscriptions",f,s,u,null,(function(e,n,r,i){t(e,!e&&l.default.fromResponseBody(n,i?void 0:o))}))},e.prototype.list=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,o=this.rest.http.supportsLinkHeaders?void 0:r,a=i.defaultGetHeaders(n.options,r);if("function"!==typeof t){if(this.rest.options.promises)return i.promisify(this,"list",arguments);t=c}n.options.headers&&i.mixin(a,n.options.headers),new s.default(n,"/push/channelSubscriptions",a,o,(function(e,t,n){return l.default.fromResponseBody(e,n?void 0:r)})).get(e,t)},e.prototype.removeWhere=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,o=i.defaultGetHeaders(n.options,r);if("function"!==typeof t){if(this.rest.options.promises)return i.promisify(this,"removeWhere",arguments);t=c}n.options.headers&&i.mixin(o,n.options.headers),n.options.pushFullWait&&i.mixin(e,{fullWait:"true"}),a.default.delete(n,"/push/channelSubscriptions",o,e,null,(function(e){return t(e)}))},e.prototype.listChannels=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,o=this.rest.http.supportsLinkHeaders?void 0:r,a=i.defaultGetHeaders(n.options,r);if("function"!==typeof t){if(this.rest.options.promises)return i.promisify(this,"listChannels",arguments);t=c}n.options.headers&&i.mixin(a,n.options.headers),n.options.pushFullWait&&i.mixin(e,{fullWait:"true"}),new s.default(n,"/push/channels",a,o,(function(e,t,n){for(var o=!n&&r?i.decodeBody(e,r):e,a=0;a<o.length;a++)o[a]=String(o[a]);return o})).get(e,t)},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(0),a=o.__importStar(n(1)),s=o.__importDefault(n(4));!function(e){e.Phone="phone",e.Tablet="tablet",e.Desktop="desktop",e.TV="tv",e.Watch="watch",e.Car="car",e.Embedded="embedded",e.Other="other"}(r||(r={})),function(e){e.Android="android",e.IOS="ios",e.Browser="browser"}(i||(i={}));var u=function(){function e(){}return e.prototype.toJSON=function(){var e,t,n;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:null===(e=this.push)||void 0===e?void 0:e.recipient,state:null===(t=this.push)||void 0===t?void 0:t.state,error:null===(n=this.push)||void 0===n?void 0:n.error}}},e.prototype.toString=function(){var e,t,n,r,i="[DeviceDetails";return this.id&&(i+="; id="+this.id),this.platform&&(i+="; platform="+this.platform),this.formFactor&&(i+="; formFactor="+this.formFactor),this.clientId&&(i+="; clientId="+this.clientId),this.metadata&&(i+="; metadata="+this.metadata),this.deviceIdentityToken&&(i+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(null===(e=this.push)||void 0===e?void 0:e.recipient)&&(i+="; push.recipient="+JSON.stringify(this.push.recipient)),(null===(t=this.push)||void 0===t?void 0:t.state)&&(i+="; push.state="+this.push.state),(null===(n=this.push)||void 0===n?void 0:n.error)&&(i+="; push.error="+JSON.stringify(this.push.error)),(null===(r=this.push)||void 0===r?void 0:r.metadata)&&(i+="; push.metadata="+this.push.metadata),i+="]"},e.fromResponseBody=function(t,n){return n&&(t=a.decodeBody(t,n)),a.isArray(t)?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return t.error=t.error&&s.default.fromValues(t.error),Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e.fromValues(t[i]);return r},e.toRequestBody=a.encodeBody,e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importStar(n(1)),i=function(){function e(){}return e.prototype.toJSON=function(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}},e.prototype.toString=function(){var e="[PushChannelSubscription";return this.channel&&(e+="; channel="+this.channel),this.deviceId&&(e+="; deviceId="+this.deviceId),this.clientId&&(e+="; clientId="+this.clientId),e+="]"},e.fromResponseBody=function(t,n){return n&&(t=r.decodeBody(t,n)),r.isArray(t)?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e.fromValues(t[i]);return r},e.toRequestBody=r.encodeBody,e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=function(e){this.count=e&&e.count||0,this.data=e&&e.data||0,this.uncompressedData=e&&e.uncompressedData||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0},a=function(e){function t(t){var n=e.call(this,t)||this;return t&&t.category&&(n.category={},i.forInOwnNonNullProperties(t.category,(function(e){n.category[e]=new o(t.category[e])}))),n}return r.__extends(t,e),t}(o),s=function(e){this.peak=e&&e.peak||0,this.min=e&&e.min||0,this.mean=e&&e.mean||0,this.opened=e&&e.opened||0,this.refused=e&&e.refused||0},u=function(e){this.succeeded=e&&e.succeeded||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0},l=function(e){this.plain=new s(e&&e.plain),this.tls=new s(e&&e.tls),this.all=new s(e&&e.all)},c=function(e){this.messages=new a(e&&e.messages),this.presence=new a(e&&e.presence),this.all=new a(e&&e.all)},f=function(e){this.realtime=new c(e&&e.realtime),this.rest=new c(e&&e.rest),this.webhook=new c(e&&e.webhook),this.sharedQueue=new c(e&&e.sharedQueue),this.externalQueue=new c(e&&e.externalQueue),this.httpEvent=new c(e&&e.httpEvent),this.push=new c(e&&e.push),this.all=new c(e&&e.all)},d=function(e){this.all=new c(e&&e.all),this.inbound=new f(e&&e.inbound),this.outbound=new f(e&&e.outbound)},h=function(e){this.all=new c(e&&e.all),this.producerPaid=new d(e&&e.producerPaid),this.consumerPaid=new d(e&&e.consumerPaid)},p=function(e){this.messages=e&&e.messages||0;var t=e&&e.notifications;this.notifications={invalid:t&&t.invalid||0,attempted:t&&t.attempted||0,successful:t&&t.successful||0,failed:t&&t.failed||0},this.directPublishes=e&&e.directPublishes||0},v=function(e){this.succeeded=e&&e.succeeded||0,this.skipped=e&&e.skipped||0,this.failed=e&&e.failed||0},m=function(e){var t=this;this.delta=void 0,e&&e.delta&&(this.delta={},i.forInOwnNonNullProperties(e.delta,(function(n){t.delta[n]=new v(e.delta[n])})))},g=function(e){function t(t){var n=e.call(this,t)||this;return n.persisted=new c(t&&t.persisted),n.connections=new l(t&&t.connections),n.channels=new s(t&&t.channels),n.apiRequests=new u(t&&t.apiRequests),n.tokenRequests=new u(t&&t.tokenRequests),n.xchgProducer=new h(t&&t.xchgProducer),n.xchgConsumer=new h(t&&t.xchgConsumer),n.push=new p(t&&t.pushStats),n.processed=new m(t&&t.processed),n.inProgress=t&&t.inProgress||void 0,n.unit=t&&t.unit||void 0,n.intervalId=t&&t.intervalId||void 0,n}return r.__extends(t,e),t.fromValues=function(e){return new t(e)},t}(d);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(29)),a=r.__importDefault(n(7)),s=r.__importDefault(n(2)),u=r.__importDefault(n(51)),l=r.__importDefault(n(38)),c=r.__importDefault(n(8)),f=r.__importDefault(n(4)),d=r.__importDefault(n(10)),h=r.__importDefault(n(34)),p=r.__importDefault(n(3)),v=r.__importDefault(n(9)),m=function(e){function t(t){var n=e.call(this,t)||this;return s.default.logAction(s.default.LOG_MINOR,"Realtime()",""),n.connection=new u.default(n,n.options),n.channels=new g(n),!1!==t.autoConnect&&n.connect(),n}return r.__extends(t,e),t.prototype.connect=function(){s.default.logAction(s.default.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()},t.prototype.close=function(){s.default.logAction(s.default.LOG_MINOR,"Realtime.close()",""),this.connection.close()},t.Promise=function(e){return(e=c.default.objectifyOptions(e)).promises=!0,new t(e)},t.Callbacks=t,t.Utils=i,t.ConnectionManager=h.default,t.Platform=p.default,t.ProtocolMessage=d.default,t.Message=v.default,t}(o.default),g=function(e){function t(t){var n=e.call(this)||this;return n.realtime=t,n.all=Object.create(null),t.connection.connectionManager.on("transport.active",(function(){n.onTransportActive()})),n}return r.__extends(t,e),t.prototype.channelSerials=function(){for(var e={},t=0,n=i.keysArray(this.all,!0);t<n.length;t++){var r=n[t],o=this.all[r];o.properties.channelSerial&&(e[r]=o.properties.channelSerial)}return e},t.prototype.recoverChannels=function(e){for(var t=0,n=i.keysArray(e,!0);t<n.length;t++){var r=n[t];this.get(r).properties.channelSerial=e[r]}},t.prototype.onChannelMessage=function(e){var t=e.channel;if(void 0!==t){var n=this.all[t];n?n.onMessage(e):s.default.logAction(s.default.LOG_ERROR,"Channels.onChannelMessage()","received event for non-existent channel: "+t)}else s.default.logAction(s.default.LOG_ERROR,"Channels.onChannelMessage()","received event unspecified channel, action = "+e.action)},t.prototype.onTransportActive=function(){for(var e in this.all){var t=this.all[e];"attaching"===t.state||"detaching"===t.state?t.checkPendingState():"suspended"===t.state?t._attach(!1,null):"attached"===t.state&&t.requestState("attaching")}},t.prototype.propogateConnectionInterruption=function(e,t){var n=["attaching","attached","detaching","suspended"],r={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"}[e];for(var o in this.all){var a=this.all[o];i.arrIn(n,a.state)&&a.notifyState(r,t)}},t.prototype.get=function(e,t){e=String(e);var n=this.all[e];if(n){if(t){if(n._shouldReattachToSetOptions(t))throw new f.default("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);n.setOptions(t)}}else n=this.all[e]=new l.default(this.realtime,e,t);return n},t.prototype.getDerived=function(e,t,n){if(t.filter){var r=i.toBase64(t.filter),o=i.matchDerivedChannel(e);e="[filter=".concat(r).concat(o.qualifierParam,"]").concat(o.channelName)}return this.get(e,n)},t.prototype.release=function(e){e=String(e);var t=this.all[e];if(t){var n=t.getReleaseErr();if(n)throw n;delete this.all[e]}},t}(a.default);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(7)),a=r.__importDefault(n(34)),s=r.__importDefault(n(2)),u=r.__importDefault(n(36)),l=r.__importDefault(n(3));function c(){}var f=function(e){function t(t,n){var r=e.call(this)||this;return r.whenState=function(e,t){return o.default.prototype.whenState.call(r,e,r.state,t,new u.default(void 0,e))},r.ably=t,r.connectionManager=new a.default(t,n),r.state=r.connectionManager.state.state,r.key=void 0,r.id=void 0,r.errorReason=null,r.connectionManager.on("connectionstate",(function(e){var t=r.state=e.current;l.default.Config.nextTick((function(){r.emit(t,e)}))})),r.connectionManager.on("update",(function(e){l.default.Config.nextTick((function(){r.emit("update",e)}))})),r}return r.__extends(t,e),t.prototype.connect=function(){s.default.logAction(s.default.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})},t.prototype.ping=function(e){if(s.default.logAction(s.default.LOG_MINOR,"Connection.ping()",""),!e){if(this.ably.options.promises)return i.promisify(this,"ping",arguments);e=c}this.connectionManager.ping(null,e)},t.prototype.close=function(){s.default.logAction(s.default.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})},Object.defineProperty(t.prototype,"recoveryKey",{get:function(){return this.createRecoveryKey()},enumerable:!1,configurable:!0}),t.prototype.createRecoveryKey=function(){return this.connectionManager.createRecoveryKey()},t}(o.default);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendingMessage=void 0;var r=n(0),i=r.__importDefault(n(10)),o=r.__importStar(n(1)),a=r.__importDefault(n(7)),s=r.__importDefault(n(2)),u=r.__importDefault(n(35)),l=r.__importDefault(n(4)),c=i.default.Action,f=function(e,t){this.message=e,this.callback=t,this.merged=!1;var n=e.action;this.sendAttempted=!1,this.ackRequired=n==c.MESSAGE||n==c.PRESENCE};t.PendingMessage=f;var d=function(e){function t(t){var n=e.call(this)||this;return n.transport=t,n.messageQueue=new u.default,t.on("ack",(function(e,t){n.onAck(e,t)})),t.on("nack",(function(e,t,r){n.onNack(e,t,r)})),n}return r.__extends(t,e),t.prototype.onAck=function(e,t){s.default.logAction(s.default.LOG_MICRO,"Protocol.onAck()","serial = "+e+"; count = "+t),this.messageQueue.completeMessages(e,t)},t.prototype.onNack=function(e,t,n){s.default.logAction(s.default.LOG_ERROR,"Protocol.onNack()","serial = "+e+"; count = "+t+"; err = "+o.inspectError(n)),n||(n=new l.default("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(e,t,n)},t.prototype.onceIdle=function(e){var t=this.messageQueue;0!==t.count()?t.once("idle",e):e()},t.prototype.send=function(e){e.ackRequired&&this.messageQueue.push(e),s.default.shouldLog(s.default.LOG_MICRO)&&s.default.logAction(s.default.LOG_MICRO,"Protocol.send()","sending msg; "+i.default.stringify(e.message)),e.sendAttempted=!0,this.transport.send(e.message)},t.prototype.getTransport=function(){return this.transport},t.prototype.getPendingMessages=function(){return this.messageQueue.copyAll()},t.prototype.clearPendingMessages=function(){return this.messageQueue.clear()},t.prototype.finish=function(){var e=this.transport;this.onceIdle((function(){e.disconnect()}))},t}(a.default);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importDefault(n(3)),o=r.__importStar(n(1)),a=r.__importDefault(n(25)),s=r.__importDefault(n(8)),u=r.__importDefault(n(2)),l=r.__importDefault(n(10)),c=r.__importDefault(n(4)),f="web_socket",d=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.shortName=f,r.heartbeats=i.default.Config.useProtocolHeartbeats,o.wsHost=s.default.getHost(r.options,r.host,!0),o}return r.__extends(t,e),t.isAvailable=function(){return!!i.default.Config.WebSocket},t.prototype.createWebSocket=function(e,t){return this.uri=e+o.toQueryString(t),new i.default.Config.WebSocket(this.uri)},t.prototype.toString=function(){return"WebSocketTransport; uri="+this.uri},t.prototype.connect=function(){u.default.logAction(u.default.LOG_MINOR,"WebSocketTransport.connect()","starting"),a.default.prototype.connect.call(this);var e=this,t=this.params,n=t.options,r=(n.tls?"wss://":"ws://")+this.wsHost+":"+s.default.getPort(n)+"/";u.default.logAction(u.default.LOG_MINOR,"WebSocketTransport.connect()","uri: "+r),this.auth.getAuthParams((function(n,o){if(!e.isDisposed){var a="";for(var s in o)a+=" "+s+": "+o[s]+";";if(u.default.logAction(u.default.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+a+" err: "+n),n)e.disconnect(n);else{var l=t.getConnectParams(o);try{var c=e.wsConnection=e.createWebSocket(r,l);c.binaryType=i.default.Config.binaryType,c.onopen=function(){e.onWsOpen()},c.onclose=function(t){e.onWsClose(t)},c.onmessage=function(t){e.onWsData(t.data)},c.onerror=function(t){e.onWsError(t)},c.on&&c.on("ping",(function(){e.onActivity()}))}catch(f){u.default.logAction(u.default.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(f.stack||f.message)),e.disconnect(f)}}}}))},t.prototype.send=function(e){var t=this.wsConnection;if(t)try{t.send(l.default.serialize(e,this.params.format))}catch(r){var n="Exception from ws connection when trying to send: "+o.inspectError(r);u.default.logAction(u.default.LOG_ERROR,"WebSocketTransport.send()",n),this.finish("disconnected",new c.default(n,5e4,500))}else u.default.logAction(u.default.LOG_ERROR,"WebSocketTransport.send()","No socket connection")},t.prototype.onWsData=function(e){u.default.logAction(u.default.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+e.length+"; type = "+typeof e);try{this.onProtocolMessage(l.default.deserialize(e,this.format))}catch(t){u.default.logAction(u.default.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+t.stack)}},t.prototype.onWsOpen=function(){u.default.logAction(u.default.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")},t.prototype.onWsClose=function(e){var t,n;if("object"==typeof e?(n=e.code,t=e.wasClean||1e3===n):t=1e3==(n=e),delete this.wsConnection,t){u.default.logAction(u.default.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");var r=new c.default("Websocket closed",80003,400);this.finish("disconnected",r)}else{var i="Unclean disconnection of WebSocket ; code = "+n;r=new c.default(i,80003,400),u.default.logAction(u.default.LOG_MINOR,"WebSocketTransport.onWsClose()",i),this.finish("disconnected",r)}this.emit("disposed")},t.prototype.onWsError=function(e){var t=this;u.default.logAction(u.default.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+e.message),i.default.Config.nextTick((function(){t.disconnect(Error(e.message))}))},t.prototype.dispose=function(){u.default.logAction(u.default.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;var e=this.wsConnection;e&&(e.onmessage=function(){},delete this.wsConnection,i.default.Config.nextTick((function(){if(u.default.logAction(u.default.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!e)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");e.close()})))},t}(a.default);t.default=function(e){return d.isAvailable()&&(e.supportedTransports[f]=d),d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(1)),o=r.__importDefault(n(33)),a=r.__importDefault(n(7)),s=r.__importDefault(n(2)),u=r.__importDefault(n(14)),l=r.__importStar(n(4)),c=r.__importDefault(n(38)),f=r.__importDefault(n(22)),d=r.__importDefault(n(39)),h=function(){};function p(e){var t=e.channel.realtime,n=t.auth.clientId;return(!n||"*"===n)&&"connected"===t.connection.state}function v(e,t){if(e.isSynthesized()||t.isSynthesized())return e.timestamp>=t.timestamp;var n=e.parseId(),r=t.parseId();return n.msgSerial===r.msgSerial?n.index>r.index:n.msgSerial>r.msgSerial}var m=function(e){function t(t){var n=e.call(this,t)||this;return n.channel=t,n.syncComplete=!1,n.members=new g(n,(function(e){return e.clientId+":"+e.connectionId})),n._myMembers=new g(n,(function(e){return e.clientId})),n.subscriptions=new a.default,n.pendingPresence=[],n}return r.__extends(t,e),t.prototype.enter=function(e,t){if(p(this))throw new l.default("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"enter",t)},t.prototype.update=function(e,t){if(p(this))throw new l.default("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"update",t)},t.prototype.enterClient=function(e,t,n){return this._enterOrUpdateClient(void 0,e,t,"enter",n)},t.prototype.updateClient=function(e,t,n){return this._enterOrUpdateClient(void 0,e,t,"update",n)},t.prototype._enterOrUpdateClient=function(e,t,n,r,o){var a=this;if(!o)if("function"===typeof n)o=n,n=null;else{if(this.channel.realtime.options.promises)return i.promisify(this,"_enterOrUpdateClient",[e,t,n,r]);o=h}var c=this.channel;if(c.connectionManager.activeState()){s.default.logAction(s.default.LOG_MICRO,"RealtimePresence."+r+"Client()","channel = "+c.name+", id = "+e+", client = "+(t||"(implicit) "+this.channel.realtime.auth.clientId));var f=u.default.fromValues({action:r,data:n});e&&(f.id=e),t&&(f.clientId=t),u.default.encode(f,c.channelOptions,(function(e){if(e)o(e);else switch(c.state){case"attached":c.sendPresence(f,o);break;case"initialized":case"detached":c.attach();case"attaching":a.pendingPresence.push({presence:f,callback:o});break;default:(e=new l.PartialErrorInfo("Unable to "+r+" presence channel while in "+c.state+" state",90001)).code=90001,o(e)}}))}else o(c.connectionManager.getError())},t.prototype.leave=function(e,t){if(p(this))throw new l.default("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,e,t)},t.prototype.leaveClient=function(e,t,n){if(!n)if("function"===typeof t)n=t,t=null;else{if(this.channel.realtime.options.promises)return i.promisify(this,"leaveClient",[e,t]);n=h}var r=this.channel;if(r.connectionManager.activeState()){s.default.logAction(s.default.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+e);var o=u.default.fromValues({action:"leave",data:t});switch(e&&(o.clientId=e),r.state){case"attached":r.sendPresence(o,n);break;case"attaching":this.pendingPresence.push({presence:o,callback:n});break;case"initialized":case"failed":var a=new l.PartialErrorInfo("Unable to leave presence channel (incompatible state)",90001);null===n||void 0===n||n(a);break;default:null===n||void 0===n||n(r.invalidStateError())}}else null===n||void 0===n||n(r.connectionManager.getError())},t.prototype.get=function(e,t){var n=this,r=Array.prototype.slice.call(arguments);1==r.length&&"function"==typeof r[0]&&r.unshift(null),e=r[0],t=r[1];var o=!e||!("waitForSync"in e)||e.waitForSync;if(!t){if(this.channel.realtime.options.promises)return i.promisify(this,"get",r);t=h}function a(n){t(null,e?n.list(e):n.values())}"suspended"!==this.channel.state?function(e,t,n){switch(e.state){case"attached":case"suspended":n();break;case"initialized":case"detached":case"detaching":case"attaching":e.attach((function(e){e?t(e):n()}));break;default:t(l.default.fromValues(e.invalidStateError()))}}(this.channel,t,(function(){var e=n.members;o?e.waitSync((function(){a(e)})):a(e)})):o?t(l.default.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):a(this.members)},t.prototype.history=function(e,t){if(s.default.logAction(s.default.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.realtime.options.promises)return i.promisify(this,"history",arguments);t=h}e&&e.untilAttach&&("attached"===this.channel.state?(delete e.untilAttach,e.from_serial=this.channel.properties.attachSerial):t(new l.default("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400))),o.default.prototype._history.call(this,e,t)},t.prototype.setPresence=function(e,t,n){var r,i;s.default.logAction(s.default.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+e.length+" participants; syncChannelSerial = "+n);var o=this.members,a=this._myMembers,l=[],c=this.channel.connectionManager.connectionId;t&&(this.members.startSync(),n&&(i=n.match(/^[\w-]+:(.*)$/))&&(r=i[1]));for(var f=0;f<e.length;f++)switch((d=u.default.fromValues(e[f])).action){case"leave":o.remove(d)&&l.push(d),d.connectionId!==c||d.isSynthesized()||a.remove(d);break;case"enter":case"present":case"update":o.put(d)&&l.push(d),d.connectionId===c&&a.put(d)}for(t&&!r&&(o.endSync(),this.channel.syncChannelSerial=null),f=0;f<l.length;f++){var d=l[f];this.subscriptions.emit(d.action,d)}},t.prototype.onAttached=function(e){s.default.logAction(s.default.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+e),e?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();var t=this.pendingPresence,n=t.length;if(n){this.pendingPresence=[];var r=[],i=f.default.create();s.default.logAction(s.default.LOG_MICRO,"RealtimePresence.onAttached","sending "+n+" queued presence messages");for(var o=0;o<n;o++){var a=t[o];r.push(a.presence),i.push(a.callback)}this.channel.sendPresence(r,i)}},t.prototype.actOnChannelState=function(e,t,n){switch(e){case"attached":this.onAttached(t);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(n)}},t.prototype.failPendingPresence=function(e){if(this.pendingPresence.length){s.default.logAction(s.default.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+i.inspectError(e));for(var t=0;t<this.pendingPresence.length;t++)try{this.pendingPresence[t].callback(e)}catch(n){}this.pendingPresence=[]}},t.prototype._clearMyMembers=function(){this._myMembers.clear()},t.prototype._ensureMyMembersPresent=function(){var e=this,t=this._myMembers,n=function(t){if(t){var n="Presence auto-re-enter failed: "+t.toString(),r=new l.default(n,91004,400);s.default.logAction(s.default.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",n);var i=new d.default(e.channel.state,e.channel.state,!0,!1,r);e.channel.emit("update",i)}};for(var r in t.map){var i=t.map[r];s.default.logAction(s.default.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+i.clientId+'" into the presence set'),this._enterOrUpdateClient(i.id,i.clientId,i.data,"enter",n)}},t.prototype._synthesizeLeaves=function(e){var t=this.subscriptions;i.arrForEach(e,(function(e){var n=u.default.fromValues({action:"leave",connectionId:e.connectionId,clientId:e.clientId,data:e.data,encoding:e.encoding,timestamp:i.now()});t.emit("leave",n)}))},t.prototype.on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.default.deprecated("presence.on","presence.subscribe"),this.subscribe.apply(this,e)},t.prototype.off=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.default.deprecated("presence.off","presence.unsubscribe"),this.unsubscribe.apply(this,e)},t.prototype.subscribe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=c.default.processListenerArgs(e),r=n[0],o=n[1],a=n[2],s=this.channel;if(!a){if(this.channel.realtime.options.promises)return i.promisify(this,"subscribe",[r,o]);a=h}"failed"!==s.state?(this.subscriptions.on(r,o),s.attach(a)):a(l.default.fromValues(s.invalidStateError()))},t.prototype.unsubscribe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=c.default.processListenerArgs(e),r=n[0],i=n[1];this.subscriptions.off(r,i)},t}(o.default),g=function(e){function t(t,n){var r=e.call(this)||this;return r.presence=t,r.map=Object.create(null),r.syncInProgress=!1,r.residualMembers=null,r.memberKey=n,r}return r.__extends(t,e),t.prototype.get=function(e){return this.map[e]},t.prototype.getClient=function(e){var t=this.map,n=[];for(var r in t){var i=t[r];i.clientId==e&&"absent"!=i.action&&n.push(i)}return n},t.prototype.list=function(e){var t=this.map,n=e&&e.clientId,r=e&&e.connectionId,i=[];for(var o in t){var a=t[o];"absent"!==a.action&&(n&&n!=a.clientId||r&&r!=a.connectionId||i.push(a))}return i},t.prototype.put=function(e){"enter"!==e.action&&"update"!==e.action||((e=u.default.fromValues(e)).action="present");var t=this.map,n=this.memberKey(e);this.residualMembers&&delete this.residualMembers[n];var r=t[n];return!(r&&!v(e,r))&&(t[n]=e,!0)},t.prototype.values=function(){var e=this.map,t=[];for(var n in e){var r=e[n];"absent"!=r.action&&t.push(r)}return t},t.prototype.remove=function(e){var t=this.map,n=this.memberKey(e),r=t[n];return!(r&&!v(e,r))&&(this.syncInProgress?((e=u.default.fromValues(e)).action="absent",t[n]=e):delete t[n],!0)},t.prototype.startSync=function(){var e=this.map,t=this.syncInProgress;s.default.logAction(s.default.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),this.syncInProgress||(this.residualMembers=i.copy(e),this.setInProgress(!0))},t.prototype.endSync=function(){var e=this.map,t=this.syncInProgress;if(s.default.logAction(s.default.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t){for(var n in e)"absent"===e[n].action&&delete e[n];for(var n in this.presence._synthesizeLeaves(i.valuesArray(this.residualMembers)),this.residualMembers)delete e[n];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")},t.prototype.waitSync=function(e){var t=this.syncInProgress;s.default.logAction(s.default.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t?this.once("sync",e):e()},t.prototype.clear=function(){this.map={},this.setInProgress(!1),this.residualMembers=null},t.prototype.setInProgress=function(e){s.default.logAction(s.default.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+e),this.syncInProgress=e,this.presence.syncComplete=!e},t}(a.default);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(56),o=n(30),a=n(11),s=r.__importDefault(n(5)),u=r.__importDefault(n(3)),l=function(){function e(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}return e.prototype.isWordArray=function(e){return null!==e&&void 0!==e&&void 0!==e.sigBytes},e.prototype.isArrayBuffer=function(e){return null!==e&&void 0!==e&&e.constructor===ArrayBuffer},e.prototype.isTypedArray=function(e){return!!ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)},e.prototype.uint8ViewToBase64=function(e){for(var t,n,r,i,o="",a=this.base64CharSet,s=e.byteLength,u=s%3,l=s-u,c=0;c<l;c+=3)t=(258048&(i=e[c]<<16|e[c+1]<<8|e[c+2]))>>12,n=(4032&i)>>6,r=63&i,o+=a[(16515072&i)>>18]+a[t]+a[n]+a[r];return 1==u?(t=(3&(i=e[l]))<<4,o+=a[(252&i)>>2]+a[t]+"=="):2==u&&(t=(1008&(i=e[l]<<8|e[l+1]))>>4,n=(15&i)<<2,o+=a[(64512&i)>>10]+a[t]+a[n]+"="),o},e.prototype.base64ToArrayBuffer=function(e){for(var t=null===atob||void 0===atob?void 0:atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++){var o=t.charCodeAt(i);r[i]=o}return r.buffer},e.prototype.isBuffer=function(e){return this.isArrayBuffer(e)||this.isWordArray(e)||this.isTypedArray(e)},e.prototype.toBuffer=function(e){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(this.isArrayBuffer(e))return new Uint8Array(e);if(this.isTypedArray(e))return new Uint8Array(e.buffer);if(this.isWordArray(e)){for(var t=new ArrayBuffer(e.sigBytes),n=new Uint8Array(t),r=0;r<e.sigBytes;r++)n[r]=e.words[r>>>2]>>>24-r%4*8&255;return n}throw new Error("BufferUtils.toBuffer expected an arraybuffer, typed array, or CryptoJS wordarray")},e.prototype.toArrayBuffer=function(e){return this.isArrayBuffer(e)?e:this.toBuffer(e).buffer},e.prototype.toWordArray=function(e){return this.isTypedArray(e)&&(e=e.buffer),this.isWordArray(e)?e:s.default.create(e)},e.prototype.base64Encode=function(e){return this.isWordArray(e)?(0,a.stringify)(e):this.uint8ViewToBase64(this.toBuffer(e))},e.prototype.base64Decode=function(e){return ArrayBuffer&&u.default.Config.atob?this.base64ToArrayBuffer(e):(0,a.parse)(e)},e.prototype.hexEncode=function(e){return(0,i.stringify)(this.toWordArray(e))},e.prototype.hexDecode=function(e){var t=(0,i.parse)(e);return ArrayBuffer?this.toArrayBuffer(t):t},e.prototype.utf8Encode=function(e){return u.default.Config.TextEncoder?(new u.default.Config.TextEncoder).encode(e).buffer:(0,o.parse)(e)},e.prototype.utf8Decode=function(e){if(!this.isBuffer(e))throw new Error("Expected input of utf8decode to be an arraybuffer, typed array, or CryptoJS wordarray");return TextDecoder&&!this.isWordArray(e)?(new TextDecoder).decode(e):(e=this.toWordArray(e),(0,o.stringify)(e))},e.prototype.bufferCompare=function(e,t){if(!e)return-1;if(!t)return 1;var n=this.toWordArray(e),r=this.toWordArray(t);n.clamp(),r.clamp();var i=n.sigBytes-r.sigBytes;if(0!=i)return i;for(var o=n.words,a=r.words,s=0;s<o.length;s++)if(0!=(i=o[s]-a[s]))return i;return 0},e.prototype.byteLength=function(e){return this.isArrayBuffer(e)||this.isTypedArray(e)?e.byteLength:this.isWordArray(e)?e.sigBytes:-1},e.prototype.typedArrayToBuffer=function(e){return e.buffer},e}();t.default=new l},function(e,t,n){e.exports=n(6).enc.Hex},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n.n(r),o=n(11),a=n(21),s=n.n(a),u=n(2),l=n.n(u),c=n(4),f=n.n(c);t.default=function(e,t){var n;if(e.getRandomWordArray)n=e.getRandomWordArray;else if("undefined"!==typeof Uint32Array&&e.getRandomValues){var r=new Uint32Array(4);n=function(n,i){var o=n/4,a=4==o?r:new Uint32Array(o);e.getRandomValues(a,(function(e){"undefined"!==typeof i&&i(e,t.toWordArray(a))}))}}else n=function(e,t){l.a.logAction(l.a.LOG_MAJOR,"Ably.Crypto.generateRandom()","Warning: the browser you are using does not support secure cryptographically secure randomness generation; falling back to insecure Math.random()");for(var n=e/4,r=new Array(n),o=0;o<n;o++)r[o]=Math.floor(4294967296*Math.random())-2147483648;t(null,i.a.create(r))};var a=[i.a.create([269488144,269488144,269488144,269488144],16),i.a.create([16777216],1),i.a.create([33685504],2),i.a.create([50529024],3),i.a.create([67372036],4),i.a.create([84215045,83886080],5),i.a.create([101058054,101056512],6),i.a.create([117901063,117901056],7),i.a.create([134744072,134744072],8),i.a.create([151587081,151587081,150994944],9),i.a.create([168430090,168430090,168427520],10),i.a.create([185273099,185273099,185273088],11),i.a.create([202116108,202116108,202116108],12),i.a.create([218959117,218959117,218959117,218103808],13),i.a.create([235802126,235802126,235802126,235798528],14),i.a.create([252645135,252645135,252645135,252645135],15),i.a.create([269488144,269488144,269488144,269488144],16)];function u(){}function c(){this.algorithm=null,this.keyLength=null,this.mode=null,this.key=null}function d(e,n,r){this.algorithm=e.algorithm+"-"+String(e.keyLength)+"-"+e.mode,this.cjsAlgorithm=e.algorithm.toUpperCase().replace(/-\d+$/,""),this.key=t.toWordArray(e.key),r&&(this.iv=t.toWordArray(r).clone()),this.blockLengthWords=n}return u.CipherParams=c,u.getDefaultParams=function(e){var n;if("function"!==typeof e&&"string"!==typeof e){if(!e.key)throw new Error("Crypto.getDefaultParams: a key is required");n="string"===typeof e.key?Object(o.parse)(e.key.replace("_","/").replace("-","+")):t.toWordArray(e.key);var r=new c;if(r.key=n,r.algorithm=e.algorithm||"aes",r.keyLength=32*n.words.length,r.mode=e.mode||"cbc",e.keyLength&&e.keyLength!==r.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+e.keyLength+" was specified, but the key actually has length "+r.keyLength);return function(e){if("aes"===e.algorithm&&"cbc"===e.mode){if(128===e.keyLength||256===e.keyLength)return;throw new Error("Unsupported key length "+e.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}(r),r}if(l.a.deprecated("Crypto.getDefaultParams(key, callback)","Crypto.getDefaultParams({key: key})"),"function"===typeof e)u.generateRandomKey((function(t){e(null,u.getDefaultParams({key:t}))}));else{if("function"!==typeof arguments[1])throw new Error("Invalid arguments for Crypto.getDefaultParams");arguments[1](null,u.getDefaultParams({key:e}))}},u.generateRandomKey=function(e,t){1==arguments.length&&"function"==typeof e&&(t=e,e=void 0),n((e||256)/8,(function(e,n){void 0!==t&&t(e?f.a.fromValues(e):null,n)}))},u.getCipher=function(e){var t=e instanceof c?e:u.getDefaultParams(e);return{cipherParams:t,cipher:new d(t,4,e.iv)}},d.prototype.encrypt=function(e,r){l.a.logAction(l.a.LOG_MICRO,"CBCCipher.encrypt()","");var i=(e=t.toWordArray(e)).sigBytes,o=function(e){return e+16&-16}(i),u=this,c=function(){u.getIv((function(t,n){if(t)r(t);else{var s=u.encryptCipher.process(e.concat(a[o-i])),l=n.concat(s);r(null,l)}}))};this.encryptCipher?c():this.iv?(this.encryptCipher=s.a.algo[this.cjsAlgorithm].createEncryptor(this.key,{iv:this.iv}),c()):n(16,(function(e,t){e?r(e):(u.encryptCipher=s.a.algo[u.cjsAlgorithm].createEncryptor(u.key,{iv:t}),u.iv=t,c())}))},d.prototype.decrypt=function(e){l.a.logAction(l.a.LOG_MICRO,"CBCCipher.decrypt()",""),e=t.toWordArray(e);var n=this.blockLengthWords,r=e.words,o=i.a.create(r.slice(0,n)),a=i.a.create(r.slice(n)),u=s.a.algo[this.cjsAlgorithm].createDecryptor(this.key,{iv:o}),c=u.process(a),f=u.finalize();return u.reset(),f&&f.sigBytes&&c.concat(f),c},d.prototype.getIv=function(e){if(this.iv){var t=this.iv;return this.iv=null,void e(null,t)}var r=this;n(16,(function(t,n){t?e(t):e(null,r.encryptCipher.process(n))}))},u}},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),function(){var e=i,t=e.lib.WordArray,n=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o+=2){var a=r(t[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var n=e.length,i=[],o=0;o<n;o++)i[o>>>1]|=r(e.charCodeAt(o)<<16-o%2*16);return t.create(i,2*n)}}}(),i.enc.Utf16)}()},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),n(27),function(e){var t=i,n=t.lib.CipherParams,r=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return n.create({ciphertext:t})}}}(),i.format.Hex)}()},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),n(11),n(61),n(26),n(27),function(){var e=i,t=e.lib.BlockCipher,n=e.algo,r=[],o=[],a=[],s=[],u=[],l=[],c=[],f=[],d=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,i=0;for(t=0;t<256;t++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,r[n]=p,o[p]=n;var v=e[n],m=e[v],g=e[m],y=257*e[p]^16843008*p;a[n]=y<<24|y>>>8,s[n]=y<<16|y>>>16,u[n]=y<<8|y>>>24,l[n]=y,y=16843009*g^65537*m^257*v^16843008*n,c[p]=y<<24|y>>>8,f[p]=y<<16|y>>>16,d[p]=y<<8|y>>>24,h[p]=y,n?(n=v^e[e[e[g^v]]],i^=e[e[i]]):n=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],v=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,i=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<i;a++)a<n?o[a]=t[a]:(l=o[a-1],a%n?n>6&&a%n==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=p[a/n|0]<<24),o[a]=o[a-n]^l);for(var s=this._invKeySchedule=[],u=0;u<i;u++){if(a=i-u,u%4)var l=o[a];else l=o[a-4];s[u]=u<4||a<=4?l:c[r[l>>>24]]^f[r[l>>>16&255]]^d[r[l>>>8&255]]^h[r[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,u,l,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,f,d,h,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var u=this._nRounds,l=e[t]^n[0],c=e[t+1]^n[1],f=e[t+2]^n[2],d=e[t+3]^n[3],h=4,p=1;p<u;p++){var v=r[l>>>24]^i[c>>>16&255]^o[f>>>8&255]^a[255&d]^n[h++],m=r[c>>>24]^i[f>>>16&255]^o[d>>>8&255]^a[255&l]^n[h++],g=r[f>>>24]^i[d>>>16&255]^o[l>>>8&255]^a[255&c]^n[h++],y=r[d>>>24]^i[l>>>16&255]^o[c>>>8&255]^a[255&f]^n[h++];l=v,c=m,f=g,d=y}v=(s[l>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&d])^n[h++],m=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^n[h++],g=(s[f>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&c])^n[h++],y=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^n[h++],e[t]=v,e[t+1]=m,e[t+2]=g,e[t+3]=y},keySize:8});e.AES=t._createHelper(v)}(),i.AES)}()},function(e,t,n){!function(t,r){var i;e.exports=(i=n(6),function(e){var t=i,n=t.lib,r=n.WordArray,o=n.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=a.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=e[t+0],u=e[t+1],h=e[t+2],p=e[t+3],v=e[t+4],m=e[t+5],g=e[t+6],y=e[t+7],_=e[t+8],b=e[t+9],w=e[t+10],k=e[t+11],C=e[t+12],S=e[t+13],E=e[t+14],O=e[t+15],x=o[0],T=o[1],R=o[2],I=o[3];x=l(x,T,R,I,a,7,s[0]),I=l(I,x,T,R,u,12,s[1]),R=l(R,I,x,T,h,17,s[2]),T=l(T,R,I,x,p,22,s[3]),x=l(x,T,R,I,v,7,s[4]),I=l(I,x,T,R,m,12,s[5]),R=l(R,I,x,T,g,17,s[6]),T=l(T,R,I,x,y,22,s[7]),x=l(x,T,R,I,_,7,s[8]),I=l(I,x,T,R,b,12,s[9]),R=l(R,I,x,T,w,17,s[10]),T=l(T,R,I,x,k,22,s[11]),x=l(x,T,R,I,C,7,s[12]),I=l(I,x,T,R,S,12,s[13]),R=l(R,I,x,T,E,17,s[14]),x=c(x,T=l(T,R,I,x,O,22,s[15]),R,I,u,5,s[16]),I=c(I,x,T,R,g,9,s[17]),R=c(R,I,x,T,k,14,s[18]),T=c(T,R,I,x,a,20,s[19]),x=c(x,T,R,I,m,5,s[20]),I=c(I,x,T,R,w,9,s[21]),R=c(R,I,x,T,O,14,s[22]),T=c(T,R,I,x,v,20,s[23]),x=c(x,T,R,I,b,5,s[24]),I=c(I,x,T,R,E,9,s[25]),R=c(R,I,x,T,p,14,s[26]),T=c(T,R,I,x,_,20,s[27]),x=c(x,T,R,I,S,5,s[28]),I=c(I,x,T,R,h,9,s[29]),R=c(R,I,x,T,y,14,s[30]),x=f(x,T=c(T,R,I,x,C,20,s[31]),R,I,m,4,s[32]),I=f(I,x,T,R,_,11,s[33]),R=f(R,I,x,T,k,16,s[34]),T=f(T,R,I,x,E,23,s[35]),x=f(x,T,R,I,u,4,s[36]),I=f(I,x,T,R,v,11,s[37]),R=f(R,I,x,T,y,16,s[38]),T=f(T,R,I,x,w,23,s[39]),x=f(x,T,R,I,S,4,s[40]),I=f(I,x,T,R,a,11,s[41]),R=f(R,I,x,T,p,16,s[42]),T=f(T,R,I,x,g,23,s[43]),x=f(x,T,R,I,b,4,s[44]),I=f(I,x,T,R,C,11,s[45]),R=f(R,I,x,T,O,16,s[46]),x=d(x,T=f(T,R,I,x,h,23,s[47]),R,I,a,6,s[48]),I=d(I,x,T,R,y,10,s[49]),R=d(R,I,x,T,E,15,s[50]),T=d(T,R,I,x,m,21,s[51]),x=d(x,T,R,I,C,6,s[52]),I=d(I,x,T,R,p,10,s[53]),R=d(R,I,x,T,w,15,s[54]),T=d(T,R,I,x,u,21,s[55]),x=d(x,T,R,I,_,6,s[56]),I=d(I,x,T,R,O,10,s[57]),R=d(R,I,x,T,g,15,s[58]),T=d(T,R,I,x,S,21,s[59]),x=d(x,T,R,I,v,6,s[60]),I=d(I,x,T,R,k,10,s[61]),R=d(R,I,x,T,h,15,s[62]),T=d(T,R,I,x,b,21,s[63]),o[0]=o[0]+x|0,o[1]=o[1]+T|0,o[2]=o[2]+R|0,o[3]=o[3]+I|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,l=0;l<4;l++){var c=u[l];u[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t}function c(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t}function f(e,t,n,r,i,o,a){var s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t}function d(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t}t.MD5=o._createHelper(u),t.HmacMD5=o._createHmacHelper(u)}(Math),i.MD5)}()},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=i.__importDefault(n(3)),a=i.__importStar(n(1)),s=i.__importDefault(n(8)),u=n(4),l=i.__importDefault(n(17)),c=i.__importDefault(n(15)),f=i.__importDefault(n(20)),d=i.__importDefault(n(2)),h=n(28),p=i.__importDefault(n(63)),v=n(37);function m(e){var t=e.statusCode;return 408===t&&!e.code||400===t&&!e.code||t>=500&&t<=504}function g(e){var t=e.connection,n=t&&t.connectionManager.host;return n?[n].concat(s.default.getFallbackHosts(e.options)):s.default.getHosts(e.options)}var y=(r=function(){function e(e){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this._getHosts=g,this.options=e||{};var t=this.options.connectivityCheckUrl||s.default.connectivityCheckUrl,n=this.options.connectivityCheckParams,r=!this.options.connectivityCheckUrl;o.default.Config.xhrSupported?(this.supportsAuthHeaders=!0,this.Request=function(e,t,n,r,i,o,a){var s=c.default.createRequest(n,r,i,o,f.default.REQ_SEND,t&&t.options.timeouts,e);return s.once("complete",a),s.exec(),s},this.options.disableConnectivityCheck?this.checkConnectivity=function(e){e(null,!0)}:this.checkConnectivity=function(e){d.default.logAction(d.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+t),this.doUri(l.default.Get,null,t,null,null,n,(function(t,n,i,o,a){var s=!1;s=r?!t&&"yes"==(null===n||void 0===n?void 0:n.replace(/\n/,"")):!t&&(0,v.isSuccessCode)(a),d.default.logAction(d.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+s),e(null,s)}))}):o.default.Config.jsonpSupported?(this.Request=function(e,t,n,r,i,a,s){var u=(0,h.createRequest)(n,r,i,a,f.default.REQ_SEND,t&&t.options.timeouts,e);return u.once("complete",s),o.default.Config.nextTick((function(){u.exec()})),u},this.options.disableConnectivityCheck?this.checkConnectivity=function(e){e(null,!0)}:this.checkConnectivity=function(e){var t=this,n=s.default.jsonpInternetUpUrl;if(this.checksInProgress)this.checksInProgress.push(e);else{this.checksInProgress=[e],d.default.logAction(d.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Sending; "+n);var r=new h.Request("isTheInternetUp",n,null,null,null,f.default.REQ_SEND,s.default.TIMEOUTS);r.once("complete",(function(e,n){var r=!e&&n;d.default.logAction(d.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Result: "+r);for(var i=0;i<t.checksInProgress.length;i++)t.checksInProgress[i](null,r);t.checksInProgress=null})),o.default.Config.nextTick((function(){r.exec()}))}}):o.default.Config.fetchSupported?(this.supportsAuthHeaders=!0,this.Request=p.default,this.checkConnectivity=function(e){d.default.logAction(d.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+t),this.doUri(l.default.Get,null,t,null,null,null,(function(t,n){var r=!t&&"yes"==(null===n||void 0===n?void 0:n.replace(/\n/,""));d.default.logAction(d.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+r),e(null,r)}))}):this.Request=function(e,t,n,r,i,o,a){a(new u.PartialErrorInfo("no supported HTTP transports available",null,400),null)}}return e.prototype.do=function(e,t,n,r,o,s,l){var c=this,f="function"==typeof n?n:function(e){return t.baseUri(e)+n},d=t._currentFallback;if(d){if(d.validUntil>a.now())return this.Request?void this.Request(e,t,f(d.host),r,s,o,(function(a){for(var u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];if(a&&m(a))return t._currentFallback=null,void c.do(e,t,n,r,o,s,l);null===l||void 0===l||l.apply(void 0,i.__spreadArray([a],u,!1))})):void(null===l||void 0===l||l(new u.PartialErrorInfo("Request invoked before assigned to",null,500)));t._currentFallback=null}var h=g(t);1!==h.length?function n(u,d){var h=u.shift();c.doUri(e,t,f(h),r,o,s,(function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];e&&m(e)&&u.length?n(u,!0):(d&&(t._currentFallback={host:h,validUntil:a.now()+t.options.timeouts.fallbackRetryTimeout}),null===l||void 0===l||l.apply(void 0,i.__spreadArray([e],r,!1)))}))}(h):this.doUri(e,t,f(h[0]),r,o,s,l)},e.prototype.doUri=function(e,t,n,r,i,o,a){this.Request?this.Request(e,t,n,r,o,i,a):a(new u.PartialErrorInfo("Request invoked before assigned to",null,500))},e}(),r.methods=[l.default.Get,l.default.Delete,l.default.Post,l.default.Put,l.default.Patch],r.methodsWithoutBody=[l.default.Get,l.default.Delete],r.methodsWithBody=[l.default.Post,l.default.Put,l.default.Patch],r);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importStar(n(4)),o=r.__importDefault(n(3)),a=r.__importDefault(n(8)),s=r.__importStar(n(1)),u=n(1);t.default=function(e,t,n,r,l,c,f){var d=new Headers(r||{}),h=e?e.toUpperCase():s.isEmptyArg(c)?"GET":"POST",p=new AbortController,v=setTimeout((function(){p.abort(),f(new i.PartialErrorInfo("Request timed out",null,408))}),t?t.options.timeouts.httpRequestTimeout:a.default.TIMEOUTS.httpRequestTimeout),m={method:h,headers:d,body:c};o.default.Config.isWebworker||(m.credentials=d.has("authorization")?"include":"same-origin"),(0,u.getGlobalObject)().fetch(n+"?"+new URLSearchParams(l||{}),m).then((function(e){clearTimeout(v);var t=e.headers.get("Content-Type");(t&&t.indexOf("application/x-msgpack")>-1?e.arrayBuffer():t&&t.indexOf("application/json")>-1?e.json():e.text()).then((function(n){var r=!!t&&-1===t.indexOf("application/x-msgpack");if(e.ok)f(null,n,e.headers,r,e.status);else{var a=function(e,t){if(function(e,t){return!!t.get("x-ably-errorcode")}(0,t))return e.error&&i.default.fromValues(e.error)}(n,e.headers)||new i.PartialErrorInfo("Error response received from server: "+e.status+" body was: "+o.default.Config.inspect(n),null,e.status);f(a,n,e.headers,r,e.status)}}))})).catch((function(e){clearTimeout(v),f(e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=r.__importDefault(n(41)),o=r.__importStar(n(1)).getGlobalObject();"undefined"===typeof Window&&"undefined"===typeof WorkerGlobalScope&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");var a=o.navigator&&o.navigator.userAgent.toString(),s={agent:"browser",logTimestamps:!0,userAgent:a,currentUrl:o.location&&o.location.href,noUpgrade:a&&!!a.match(/MSIE\s8\.0/),binaryType:"arraybuffer",WebSocket:o.WebSocket,fetchSupported:!!o.fetch,xhrSupported:o.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,jsonpSupported:"undefined"!==typeof document,allowComet:function(){var e=o.location;return!o.WebSocket||!e||!e.origin||e.origin.indexOf("http")>-1}(),streamingSupported:!0,useProtocolHeartbeats:!0,createHmac:null,msgpack:i.default,supportsBinary:!!o.TextDecoder,preferBinary:!1,ArrayBuffer:o.ArrayBuffer,atob:o.atob,nextTick:"undefined"!==typeof o.setImmediate?o.setImmediate.bind(o):function(e){setTimeout(e,0)},addEventListener:o.addEventListener,inspect:JSON.stringify,stringByteSize:function(e){return o.TextDecoder&&(new o.TextEncoder).encode(e).length||e.length},TextEncoder:o.TextEncoder,TextDecoder:o.TextDecoder,Promise:o.Promise,getRandomValues:function(e){if(void 0!==e)return function(t,n){e.getRandomValues(t),n&&n(null)}}(o.crypto||msCrypto)};t.default=s},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importStar(n(1)),i="ablyjs-storage-test",o=function(){function t(){try{e.sessionStorage.setItem(i,i),e.sessionStorage.removeItem(i),this.sessionSupported=!0}catch(t){this.sessionSupported=!1}try{e.localStorage.setItem(i,i),e.localStorage.removeItem(i),this.localSupported=!0}catch(t){this.localSupported=!1}}return t.prototype.get=function(e){return this._get(e,!1)},t.prototype.getSession=function(e){return this._get(e,!0)},t.prototype.remove=function(e){return this._remove(e,!1)},t.prototype.removeSession=function(e){return this._remove(e,!0)},t.prototype.set=function(e,t,n){return this._set(e,t,n,!1)},t.prototype.setSession=function(e,t,n){return this._set(e,t,n,!0)},t.prototype._set=function(e,t,n,i){var o={value:t};return n&&(o.expires=r.now()+n),this.storageInterface(i).setItem(e,JSON.stringify(o))},t.prototype._get=function(e,t){if(t&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!t&&!this.localSupported)throw new Error("Local Storage not supported");var n=this.storageInterface(t).getItem(e);if(!n)return null;var i=JSON.parse(n);return i.expires&&i.expires<r.now()?(this.storageInterface(t).removeItem(e),null):i.value},t.prototype._remove=function(e,t){return this.storageInterface(t).removeItem(e)},t.prototype.storageInterface=function(t){return t?e.sessionStorage:e.localStorage},t}();t.default=new o}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(67)),i={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",jsonpInternetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up-0-9.js",defaultTransports:[r.default.XhrPolling,r.default.XhrStreaming,r.default.JsonP,r.default.WebSocket],baseTransportOrder:[r.default.XhrPolling,r.default.XhrStreaming,r.default.JsonP,r.default.WebSocket],transportPreferenceOrder:[r.default.JsonP,r.default.XhrPolling,r.default.XhrStreaming,r.default.WebSocket],upgradeTransports:[r.default.XhrStreaming,r.default.WebSocket]};t.default=i},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WebSocket="web_socket",e.Comet="comet",e.XhrStreaming="xhr_streaming",e.XhrPolling="xhr_polling",e.JsonP="jsonp"}(r||(r={})),t.default=r},function(e,t,n){"use strict";n.r(t);var r=n(28),i=n.n(r),o=n(1),a=n(3),s=n.n(a),u=n(12),l=n.n(u),c=n(15),f=n.n(c),d=function(e){var t="xhr_polling";function n(e,n,r){r.stream=!1,l.a.call(this,e,n,r),this.shortName=t}return o.inherits(n,l.a),n.isAvailable=function(){return s.a.Config.xhrSupported&&s.a.Config.allowComet},n.prototype.toString=function(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},n.prototype.createRequest=function(e,t,n,r,i){return f.a.createRequest(e,t,n,r,i,this.timeouts)},"undefined"!==typeof e&&n.isAvailable()&&(e.supportedTransports[t]=n),n},h=function(e){var t="xhr_streaming";function n(e,n,r){l.a.call(this,e,n,r),this.shortName=t}return o.inherits(n,l.a),n.isAvailable=function(){return s.a.Config.xhrSupported&&s.a.Config.streamingSupported&&s.a.Config.allowComet},n.prototype.toString=function(){return"XHRStreamingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},n.prototype.createRequest=function(e,t,n,r,i){return f.a.createRequest(e,t,n,r,i,this.timeouts)},"undefined"!==typeof e&&n.isAvailable()&&(e.supportedTransports[t]=n),n};t.default=[i.a,d,h]}]).default},e.exports=t()},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=h(n);i&&i!==p&&e(t,i,r)}var a=c(n);f&&(a=a.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<a.length;++m){var g=a[m];if(!o[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=d(n,g);try{l(t,g,y)}catch(_){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case o:case s:case a:case h:return e;default:switch(e=e&&e.$$typeof){case l:case d:case m:case v:case u:return e;default:return t}}case i:return t}}}function k(e){return w(e)===f}t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=h,t.isAsyncMode=function(e){return k(e)||w(e)===c},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===f||e===s||e===a||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d||e.$$typeof===y||e.$$typeof===_||e.$$typeof===b||e.$$typeof===g)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(h,e)&&(d.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),x=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var L,j=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var u="\n"+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case k:return"Portal";case E:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case O:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ce=null,Se=null;function Ee(e){if(e=_i(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),ke(e.stateNode,e.type,t))}}function Oe(e){Ce?Se?Se.push(e):Se=[e]:Ce=e}function xe(){if(Ce){var e=Ce,t=Se;if(Se=Ce=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Re(){}var Ie=!1;function Pe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==Ce||null!==Se)&&(Re(),xe())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ne=!1;if(c)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ce){Ne=!1}function De(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Le=!1,je=null,Ue=!1,Fe=null,Be={onError:function(e){Le=!0,je=e}};function ze(e,t,n,r,i,o,a,s,u){Le=!1,je=null,De.apply(Be,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return We(i),e;if(a===r)return We(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ft(s):0!==(o&=a)&&(r=ft(o))}else 0!==(a=n&~i)?r=ft(a):0!==o&&(r=ft(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,Ct,St,Et,Ot=!1,xt=[],Tt=null,Rt=null,It=null,Pt=new Map,At=new Map,Nt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Bt(){Ot=!1,null!==Tt&&Ut(Tt)&&(Tt=null),null!==Rt&&Ut(Rt)&&(Rt=null),null!==It&&Ut(It)&&(It=null),Pt.forEach(Ft),At.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ot||(Ot=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function qt(e){function t(t){return zt(t,e)}if(0<xt.length){zt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Rt&&zt(Rt,e),null!==It&&zt(It,e),Pt.forEach(t),At.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)jt(n),null===n.blockedOn&&Nt.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,r){var i=_t,o=Ht.transition;Ht.transition=null;try{_t=1,Kt(e,t,n,r)}finally{_t=i,Ht.transition=o}}function Vt(e,t,n,r){var i=_t,o=Ht.transition;Ht.transition=null;try{_t=4,Kt(e,t,n,r)}finally{_t=i,Ht.transition=o}}function Kt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Rt=Lt(Rt,e,t,n,r,i),!0;case"mouseover":return It=Lt(It,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,At.set(o,Lt(At.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var o=_i(i);if(null!==o&&wt(o),null===(o=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(ln),fn=j({},ln,{view:0,detail:0}),dn=on(fn),hn=j({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(hn),vn=on(j({},hn,{dataTransfer:0})),mn=on(j({},fn,{relatedTarget:0})),gn=on(j({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=on(yn),bn=on(j({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function En(){return Sn}var On=j({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=on(On),Tn=on(j({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(j({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),In=on(j({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=on(Pn),Nn=[9,13,27,32],Mn=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Dn,jn=c&&(!Mn||Dn&&8<Dn&&11>=Dn),Un=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,r){Oe(r),0<(t=Vr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Kn=null;function Qn(e){Ur(e,0)}function $n(e){if(K(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Kn=Vn=null)}function nr(e){if("value"===e.propertyName&&$n(Kn)){var t=[];Gn(t,Kn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Kn)}function or(e,t){if("click"===e)return $n(t)}function ar(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Vr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Cr={},Sr={};function Er(e){if(Cr[e])return Cr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Cr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Or=Er("animationend"),xr=Er("animationiteration"),Tr=Er("animationstart"),Rr=Er("transitionend"),Ir=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Ir.set(e,t),u(t,[e])}for(var Nr=0;Nr<Pr.length;Nr++){var Mr=Pr[Nr];Ar(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Ar(Or,"onAnimationEnd"),Ar(xr,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Rr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,l){if(ze.apply(this,arguments),Le){if(!Le)throw Error(o(198));var c=je;Le=!1,je=null,Ue||(Ue=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;jr(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;jr(i,s,l),o=u}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Br("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Jt(t)){case 1:var i=Gt;break;case 4:i=Vt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=o,i=we(n),a=[];e:{var s=Ir.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=xn;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Rn;break;case Or:case xr:case Tr:u=gn;break;case Rr:u=In;break;case"scroll":u=dn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var c=0!==(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==d&&(null!=(v=Ae(p,d))&&c.push(Gr(p,v,h)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(f=qe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,v="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==u?s:bi(u),h=null==l?s:bi(l),(s=new c(v,p+"leave",u,n,i)).target=f,s.relatedTarget=h,v=null,yi(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=h,c.relatedTarget=f,v=c),f=v,u&&l)e:{for(d=l,p=0,h=c=u;h;h=Kr(h))p++;for(h=0,v=d;v;v=Kr(v))h++;for(;0<p-h;)c=Kr(c),p--;for(;0<h-p;)d=Kr(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Kr(c),d=Kr(d)}c=null}else c=null;null!==u&&Qr(a,s,u,c,!1),null!==l&&null!==f&&Qr(a,f,l,c,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Jn;else if(Wn(s))if(Yn)m=ar;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?Gn(a,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?bi(r):window,e){case"focusin":(Wn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(a,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else qn?Bn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==_?"onCompositionEnd"===_&&qn&&(y=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,qn=!0)),0<(g=Vr(r,_)).length&&(_=new bn(_,e,null,n,i),a.push({event:_,listeners:g}),y?_.data=y:null!==(y=zn(n))&&(_.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=en(),Zt=Xt=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Ur(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ae(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Ae(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Ae(n,o))&&a.unshift(Gr(n,u,s)):i||null!=(u=Ae(n,o))&&a.push(Gr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $r=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),di="__reactFiber$"+fi,hi="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,gi="__reactHandles$"+fi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[hi]||null}var ki=[],Ci=-1;function Si(e){return{current:e}}function Ei(e){0>Ci||(e.current=ki[Ci],ki[Ci]=null,Ci--)}function Oi(e,t){Ci++,ki[Ci]=e.current,e.current=t}var xi={},Ti=Si(xi),Ri=Si(!1),Ii=xi;function Pi(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Ei(Ri),Ei(Ti)}function Mi(e,t,n){if(Ti.current!==xi)throw Error(o(168));Oi(Ti,t),Oi(Ri,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return j({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Ii=Ti.current,Oi(Ti,e),Oi(Ri,Ri.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ri),Ei(Ti),Oi(Ti,e)):Ei(Ri),Oi(Ri,n)}var Ui=null,Fi=!1,Bi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Ze,qi),i}finally{_t=t,Bi=!1}}return null}var Hi=[],Wi=0,Gi=null,Vi=0,Ki=[],Qi=0,$i=null,Ji=1,Yi="";function Xi(e,t){Hi[Wi++]=Vi,Hi[Wi++]=Gi,Gi=e,Vi=t}function Zi(e,t,n){Ki[Qi++]=Ji,Ki[Qi++]=Yi,Ki[Qi++]=$i,$i=e;var r=Ji;e=Yi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,Yi=o+e}else Ji=1<<o|n<<i|r,Yi=e}function eo(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function to(e){for(;e===Gi;)Gi=Hi[--Wi],Hi[Wi]=null,Vi=Hi[--Wi],Hi[Wi]=null;for(;e===$i;)$i=Ki[--Qi],Ki[Qi]=null,Yi=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Al(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Ji,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Al(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=li(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw ho(),Error(o(418));for(;t;)ao(e,t),t=li(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?li(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ro;e;)e=li(e.nextSibling)}function po(){ro=no=null,io=!1}function vo(e){null===oo?oo=[e]:oo.push(e)}var mo=b.ReactCurrentBatchConfig;function go(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Si(null),_o=null,bo=null,wo=null;function ko(){wo=bo=_o=null}function Co(e){var t=yo.current;Ei(yo),e._currentValue=t}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){_o=e,wo=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Oo(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===_o)throw Error(o(308));bo=e,_o.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var xo=null;function To(e){null===xo?xo=[e]:xo.push(e)}function Ro(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,To(t)):(n.next=i.next,i.next=n),t.interleaved=n,Io(e,r)}function Io(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Po=!1;function Ao(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function No(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Do(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ru)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Io(e,n)}return null===(i=r.interleaved)?(t.next=t,To(r)):(t.next=i.next,i.next=t),r.interleaved=t,Io(e,n)}function Lo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function jo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,r){var i=e.updateQueue;Po=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==o){var f=i.baseState;for(a=0,c=l=u=null,s=o;;){var d=s.lane,h=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(d=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=v.payload)?p.call(h,f,d):p)||void 0===d)break e;f=j({},f,d);break e;case 2:Po=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=h,u=f):c=c.next=h,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);ju|=a,e.lanes=a,e.memoizedState=f}}function Fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Bo=(new r.Component).refs;function zo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qo={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),o=Mo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rl(t,e,i,r),Lo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),o=Mo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rl(t,e,i,r),Lo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Mo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Do(e,i,r))&&(rl(t,e,r,n),Lo(t,e,r))}};function Ho(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function Wo(e,t,n){var r=!1,i=xi,o=t.contextType;return"object"===typeof o&&null!==o?o=Oo(o):(i=Ai(t)?Ii:Ti.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):xi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qo.enqueueReplaceState(t,t.state,null)}function Vo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Bo,Ao(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Oo(o):(o=Ai(t)?Ii:Ti.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(zo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qo.enqueueReplaceState(i,i.state,null),Uo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Bo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $o(e){return(0,e._init)(e._payload)}function Jo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===C?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===A&&$o(o)===t.type)?((r=i(t,n.props)).ref=Ko(e,t,n),r.return=e,r):((r=Dl(n.type,n.key,n.props,null,e.mode,r)).ref=Ko(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dl(t.type,t.key,t.props,null,e.mode,n)).ref=Ko(e,null,t),n.return=e,n;case k:return(t=Fl(t,e.mode,n)).return=e,t;case A:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Ll(t,e.mode,n,null)).return=e,t;Qo(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case A:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:f(e,t,n,r,null);Qo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return f(t,e=e.get(n)||null,r,i,null);Qo(t,r)}return null}function v(i,o,s,u){for(var l=null,c=null,f=o,v=o=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=h(i,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),o=a(g,o,v),null===c?l=g:c.sibling=g,c=g,f=m}if(v===s.length)return n(i,f),io&&Xi(i,v),l;if(null===f){for(;v<s.length;v++)null!==(f=d(i,s[v],u))&&(o=a(f,o,v),null===c?l=f:c.sibling=f,c=f);return io&&Xi(i,v),l}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m);return e&&f.forEach((function(e){return t(i,e)})),io&&Xi(i,v),l}function m(i,s,u,l){var c=D(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var f=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var _=h(i,v,y.value,l);if(null===_){null===v&&(v=g);break}e&&v&&null===_.alternate&&t(i,v),s=a(_,s,m),null===f?c=_:f.sibling=_,f=_,v=g}if(y.done)return n(i,v),io&&Xi(i,m),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=d(i,y.value,l))&&(s=a(y,s,m),null===f?c=y:f.sibling=y,f=y);return io&&Xi(i,m),c}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=a(y,s,m),null===f?c=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),io&&Xi(i,m),c}return function e(r,o,a,u){if("object"===typeof a&&null!==a&&a.type===C&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var l=a.key,c=o;null!==c;){if(c.key===l){if((l=a.type)===C){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===A&&$o(l)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Ko(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===C?((o=Ll(a.props.children,r.mode,u,a.key)).return=r,r=o):((u=Dl(a.type,a.key,a.props,null,r.mode,u)).ref=Ko(r,o,a),u.return=r,r=u)}return s(r);case k:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fl(a,r.mode,u)).return=r,r=o}return s(r);case A:return e(r,o,(c=a._init)(a._payload),u)}if(te(a))return v(r,o,a,u);if(D(a))return m(r,o,a,u);Qo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Ul(a,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var Yo=Jo(!0),Xo=Jo(!1),Zo={},ea=Si(Zo),ta=Si(Zo),na=Si(Zo);function ra(e){if(e===Zo)throw Error(o(174));return e}function ia(e,t){switch(Oi(na,t),Oi(ta,e),Oi(ea,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(ea),Oi(ea,t)}function oa(){Ei(ea),Ei(ta),Ei(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=ue(t,e.type);t!==n&&(Oi(ta,e),Oi(ea,n))}function sa(e){ta.current===e&&(Ei(ea),Ei(ta))}var ua=Si(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function fa(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var da=b.ReactCurrentDispatcher,ha=b.ReactCurrentBatchConfig,pa=0,va=null,ma=null,ga=null,ya=!1,_a=!1,ba=0,wa=0;function ka(){throw Error(o(321))}function Ca(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Sa(e,t,n,r,i,a){if(pa=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),_a){a=0;do{if(_a=!1,ba=0,25<=a)throw Error(o(301));a+=1,ga=ma=null,t.updateQueue=null,da.current=ls,e=n(r,i)}while(_a)}if(da.current=as,t=null!==ma&&null!==ma.next,pa=0,ga=ma=va=null,ya=!1,t)throw Error(o(300));return e}function Ea(){var e=0!==ba;return ba=0,e}function Oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?va.memoizedState=ga=e:ga=ga.next=e,ga}function xa(){if(null===ma){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ga?va.memoizedState:ga.next;if(null!==t)ga=t,ma=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?va.memoizedState=ga=e:ga=ga.next=e}return ga}function Ta(e,t){return"function"===typeof t?t(e):t}function Ra(e){var t=xa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ma,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,l=null,c=a;do{var f=c.lane;if((pa&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,s=r):l=l.next=d,va.lanes|=f,ju|=f}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,va.lanes|=a,ju|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ia(e){var t=xa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Pa(){}function Aa(e,t){var n=va,r=xa(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Wa(Da.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,Fa(9,Ma.bind(null,n,r,i,t),void 0,null),null===Iu)throw Error(o(349));0!==(30&pa)||Na(n,t,i)}return i}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ma(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&ja(e)}function Da(e,t,n){return n((function(){La(t)&&ja(e)}))}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function ja(e){var t=Io(e,1);null!==t&&rl(t,e,1,-1)}function Ua(e){var t=Oa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,va,e),[t.memoizedState,e]}function Fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ba(){return xa().memoizedState}function za(e,t,n,r){var i=Oa();va.flags|=e,i.memoizedState=Fa(1|t,n,void 0,void 0===r?null:r)}function qa(e,t,n,r){var i=xa();r=void 0===r?null:r;var o=void 0;if(null!==ma){var a=ma.memoizedState;if(o=a.destroy,null!==r&&Ca(r,a.deps))return void(i.memoizedState=Fa(t,n,o,r))}va.flags|=e,i.memoizedState=Fa(1|t,n,o,r)}function Ha(e,t){return za(8390656,8,e,t)}function Wa(e,t){return qa(2048,8,e,t)}function Ga(e,t){return qa(4,2,e,t)}function Va(e,t){return qa(4,4,e,t)}function Ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qa(4,4,Ka.bind(null,t,e),n)}function $a(){}function Ja(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ca(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ya(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ca(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xa(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),va.lanes|=n,ju|=n,e.baseState=!0),t)}function Za(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=ha.transition;ha.transition={};try{e(!1),t()}finally{_t=n,ha.transition=r}}function es(){return xa().memoizedState}function ts(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ro(e,t,n,r))){rl(n,e,r,tl()),os(n,t,r)}}function ns(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(i.next=i,To(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ro(e,t,i,r))&&(rl(n,e,r,i=tl()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===va||null!==t&&t===va}function is(e,t){_a=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:Oo,useCallback:ka,useContext:ka,useEffect:ka,useImperativeHandle:ka,useInsertionEffect:ka,useLayoutEffect:ka,useMemo:ka,useReducer:ka,useRef:ka,useState:ka,useDebugValue:ka,useDeferredValue:ka,useTransition:ka,useMutableSource:ka,useSyncExternalStore:ka,useId:ka,unstable_isNewReconciler:!1},ss={readContext:Oo,useCallback:function(e,t){return Oa().memoizedState=[e,void 0===t?null:t],e},useContext:Oo,useEffect:Ha,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,za(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return za(4194308,4,e,t)},useInsertionEffect:function(e,t){return za(4,2,e,t)},useMemo:function(e,t){var n=Oa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Oa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Oa().memoizedState=e},useState:Ua,useDebugValue:$a,useDeferredValue:function(e){return Oa().memoizedState=e},useTransition:function(){var e=Ua(!1),t=e[0];return e=Za.bind(null,e[1]),Oa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=va,i=Oa();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Iu)throw Error(o(349));0!==(30&pa)||Na(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ha(Da.bind(null,r,a,e),[e]),r.flags|=2048,Fa(9,Ma.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Oa(),t=Iu.identifierPrefix;if(io){var n=Yi;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Oo,useCallback:Ja,useContext:Oo,useEffect:Wa,useImperativeHandle:Qa,useInsertionEffect:Ga,useLayoutEffect:Va,useMemo:Ya,useReducer:Ra,useRef:Ba,useState:function(){return Ra(Ta)},useDebugValue:$a,useDeferredValue:function(e){return Xa(xa(),ma.memoizedState,e)},useTransition:function(){return[Ra(Ta)[0],xa().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Aa,useId:es,unstable_isNewReconciler:!1},ls={readContext:Oo,useCallback:Ja,useContext:Oo,useEffect:Wa,useImperativeHandle:Qa,useInsertionEffect:Ga,useLayoutEffect:Va,useMemo:Ya,useReducer:Ia,useRef:Ba,useState:function(){return Ia(Ta)},useDebugValue:$a,useDeferredValue:function(e){var t=xa();return null===ma?t.memoizedState=e:Xa(t,ma.memoizedState,e)},useTransition:function(){return[Ia(Ta)[0],xa().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Aa,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Mo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gu||(Gu=!0,Vu=r),ds(0,t)},n}function vs(e,t,n){(n=Mo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ol.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mo(-1,1)).tag=2,Do(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _s=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Xo(t,null,n,r):Yo(t,e.child,n,r)}function ks(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=Sa(e,t,n,r,o,i),n=Ea(),null===e||bs?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Cs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Nl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ss(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Ml(o,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return xs(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oi(Mu,Nu),Nu|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oi(Mu,Nu),Nu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Oi(Mu,Nu),Nu|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Oi(Mu,Nu),Nu|=r;return ws(e,t,i,n),t.child}function Os(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xs(e,t,n,r,i){var o=Ai(n)?Ii:Ti.current;return o=Pi(t,o),Eo(t,i),n=Sa(e,t,n,r,o,i),r=Ea(),null===e||bs?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Ts(e,t,n,r,i){if(Ai(n)){var o=!0;Li(t)}else o=!1;if(Eo(t,i),null===t.stateNode)Ws(e,t),Wo(t,n,r),Vo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Oo(l):l=Pi(t,l=Ai(n)?Ii:Ti.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Go(t,a,r,l),Po=!1;var d=t.memoizedState;a.state=d,Uo(t,r,a,i),u=t.memoizedState,s!==r||d!==u||Ri.current||Po?("function"===typeof c&&(zo(t,n,c,r),u=t.memoizedState),(s=Po||Ho(t,n,s,r,d,u,l))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,No(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:go(t.type,s),a.props=l,f=t.pendingProps,d=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Oo(u):u=Pi(t,u=Ai(n)?Ii:Ti.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==f||d!==u)&&Go(t,a,r,u),Po=!1,d=t.memoizedState,a.state=d,Uo(t,r,a,i);var p=t.memoizedState;s!==f||d!==p||Ri.current||Po?("function"===typeof h&&(zo(t,n,h,r),p=t.memoizedState),(l=Po||Ho(t,n,l,r,d,p,u)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Rs(e,t,n,r,o,i)}function Rs(e,t,n,r,i,o){Os(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&ji(t,n,!1),Gs(e,t,o);r=t.stateNode,_s.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Yo(t,e.child,null,o),t.child=Yo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),ia(e,t.containerInfo)}function Ps(e,t,n,r,i){return po(),vo(i),t.flags|=256,ws(e,t,n,r),t.child}var As,Ns,Ms,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Us(e,t,n){var r,i=t.pendingProps,a=ua.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Oi(ua,1&a),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=jl(u,i,0,null),e=Ll(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ls,e):Fs(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=fs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=jl({mode:"visible",children:r.children},i,0,null),(a=Ll(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Yo(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Bs(e,t,s,r=fs(a=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Iu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Io(e,i),rl(r,e,i,-1))}return ml(),Bs(e,t,s,r=fs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tl.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=li(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ki[Qi++]=Ji,Ki[Qi++]=Yi,Ki[Qi++]=$i,Ji=e.id,Yi=e.overflow,$i=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,a,n);if(s){s=i.fallback,u=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ml(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Ml(r,s):(s=Ll(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?js(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Ml(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=jl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&vo(r),Yo(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function qs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Hs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oi(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,o);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ml(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ml(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Ai(t.type)&&Ni(),Ks(t),null;case 3:return r=t.stateNode,oa(),Ei(Ri),Ei(Ti),fa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sl(oo),oo=null))),Ns(e,t),Ks(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Ms(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ks(t),null}if(e=ra(ea.current),fo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[hi]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":J(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":ie(r,a),Fr("invalid",r)}for(var u in ye(n,a),i=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Fr("scroll",r)}switch(n){case"input":V(r),Z(r,a,!0);break;case"textarea":V(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[di]=t,e[hi]=r,As(e,t,!1,!1),t.stateNode=e;e:{switch(u=_e(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":J(e,r),i=$(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(a in ye(n,i),l=i)if(l.hasOwnProperty(a)){var c=l[a];"style"===a?me(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Fr("scroll",e):null!=c&&_(e,a,c,u))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ks(t),null;case 13:if(Ei(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))ho(),po(),t.flags|=98560,a=!1;else if(a=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),a=!1}else null!==oo&&(sl(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Du&&(Du=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return oa(),Ns(e,t),null===e&&qr(t.stateNode.containerInfo),Ks(t),null;case 10:return Co(t.type._context),Ks(t),null;case 19:if(Ei(ua),null===(a=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)Vs(a,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=la(e))){for(t.flags|=128,Vs(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oi(ua,1&ua.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>Hu&&(t.flags|=128,r=!0,Vs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=la(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!io)return Ks(t),null}else 2*Ye()-a.renderingStartTime>Hu&&1073741824!==n&&(t.flags|=128,r=!0,Vs(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=ua.current,Oi(ua,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nu)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function $s(e,t){switch(to(t),t.tag){case 1:return Ai(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ei(Ri),Ei(Ti),fa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ei(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ua),null;case 4:return oa(),null;case 10:return Co(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(){},Ms=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=$(e,i),r=$(e,r),a=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Fr("scroll",e),a||u===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,Ys=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){El(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){El(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tu(t,n,o)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[hi],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var fu=null,du=!1;function hu(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||eu(n,t);case 6:var r=fu,i=du;fu=null,hu(e,t,n),du=i,null!==(fu=r)&&(du?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(du?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=du,fu=n.stateNode.containerInfo,du=!0,hu(e,t,n),fu=r,du=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tu(n,t,a),i=i.next}while(i!==r)}hu(e,t,n);break;case 1:if(!Ys&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){El(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,hu(e,t,n),Ys=r):hu(e,t,n);break;default:hu(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Rl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,du=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===fu)throw Error(o(160));pu(a,s,i),fu=null,du=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){El(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),yu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){El(e,e.return,m)}try{ru(5,e,e.return)}catch(m){El(e,e.return,m)}}break;case 1:mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){El(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===a.type&&null!=a.name&&Y(i,a),_e(u,s);var c=_e(u,a);for(s=0;s<l.length;s+=2){var f=l[s],d=l[s+1];"style"===f?me(i,d):"dangerouslySetInnerHTML"===f?fe(i,d):"children"===f?de(i,d):_(i,f,d,c)}switch(u){case"input":X(i,a);break;case"textarea":oe(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[hi]=a}catch(m){El(e,e.return,m)}}break;case 6:if(mu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){El(e,e.return,m)}}break;case 3:if(mu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){El(e,e.return,m)}break;case 4:default:mu(t,e),yu(e);break;case 13:mu(t,e),yu(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(qu=Ye())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||f,mu(t,e),Ys=c):mu(t,e),yu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(d=Zs=f;null!==Zs;){switch(p=(h=Zs).child,h.tag){case 0:case 11:case 14:case 15:ru(4,h,h.return);break;case 1:eu(h,h.return);var v=h.stateNode;if("function"===typeof v.componentWillUnmount){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){El(r,n,m)}}break;case 5:eu(h,h.return);break;case 22:if(null!==h.memoizedState){ku(d);continue}}null!==p?(p.return=h,Zs=p):ku(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{i=d.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=d.stateNode,s=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(m){El(e,e.return,m)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){El(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cu(e,uu(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;lu(e,uu(e),a);break;default:throw Error(o(161))}}catch(s){El(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _u(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Js;if(!a){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=Js;var l=Ys;if(Js=a,(Ys=u)&&!l)for(Zs=i;null!==Zs;)u=(a=Zs).child,22===a.tag&&null!==a.memoizedState?Cu(i):null!==u?(u.return=a,Zs=u):Cu(i);for(;null!==o;)Zs=o,bu(o,t,n),o=o.sibling;Zs=i,Js=s,Ys=l}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Zs=o):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:go(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Fo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fo(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&qt(d)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&ou(t)}catch(h){El(t,t.return,h)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function ku(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Cu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){El(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){El(t,i,u)}}var o=t.return;try{ou(t)}catch(u){El(t,o,u)}break;case 5:var a=t.return;try{ou(t)}catch(u){El(t,a,u)}}}catch(u){El(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Su,Eu=Math.ceil,Ou=b.ReactCurrentDispatcher,xu=b.ReactCurrentOwner,Tu=b.ReactCurrentBatchConfig,Ru=0,Iu=null,Pu=null,Au=0,Nu=0,Mu=Si(0),Du=0,Lu=null,ju=0,Uu=0,Fu=0,Bu=null,zu=null,qu=0,Hu=1/0,Wu=null,Gu=!1,Vu=null,Ku=null,Qu=!1,$u=null,Ju=0,Yu=0,Xu=null,Zu=-1,el=0;function tl(){return 0!==(6&Ru)?Ye():-1!==Zu?Zu:Zu=Ye()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Ru)&&0!==Au?Au&-Au:null!==mo.transition?(0===el&&(el=vt()),el):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rl(e,t,n,r){if(50<Yu)throw Yu=0,Xu=null,Error(o(185));gt(e,n,r),0!==(2&Ru)&&e===Iu||(e===Iu&&(0===(2&Ru)&&(Uu|=n),4===Du&&ul(e,Au)),il(e,r),1===n&&0===Ru&&0===(1&t.mode)&&(Hu=Ye()+500,Fi&&qi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,u=i[a];-1===u?0!==(s&n)&&0===(s&r)||(i[a]=ht(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dt(e,e===Iu?Au:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Fi=!0,zi(e)}(ll.bind(null,e)):zi(ll.bind(null,e)),ai((function(){0===(6&Ru)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Il(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if(Zu=-1,el=0,0!==(6&Ru))throw Error(o(327));var n=e.callbackNode;if(Cl()&&e.callbackNode!==n)return null;var r=dt(e,e===Iu?Au:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var i=Ru;Ru|=2;var a=vl();for(Iu===e&&Au===t||(Wu=null,Hu=Ye()+500,hl(e,t));;)try{_l();break}catch(u){pl(e,u)}ko(),Ou.current=a,Ru=i,null!==Pu?t=0:(Iu=null,Au=0,t=Du)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=Lu,hl(e,0),ul(e,r),il(e,Ye()),n;if(6===t)ul(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gl(e,r))&&(0!==(a=pt(e))&&(r=a,t=al(e,a))),1===t))throw n=Lu,hl(e,0),ul(e,r),il(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:kl(e,zu,Wu);break;case 3:if(ul(e,r),(130023424&r)===r&&10<(t=qu+500-Ye())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kl.bind(null,e,zu,Wu),t);break}kl(e,zu,Wu);break;case 4:if(ul(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(kl.bind(null,e,zu,Wu),r);break}kl(e,zu,Wu);break;default:throw Error(o(329))}}}return il(e,Ye()),e.callbackNode===n?ol.bind(null,e):null}function al(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=zu,zu=n,null!==t&&sl(t)),e}function sl(e){null===zu?zu=e:zu.push.apply(zu,e)}function ul(e,t){for(t&=~Fu,t&=~Uu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Ru))throw Error(o(327));Cl();var t=dt(e,0);if(0===(1&t))return il(e,Ye()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Lu,hl(e,0),ul(e,t),il(e,Ye()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kl(e,zu,Wu),il(e,Ye()),null}function cl(e,t){var n=Ru;Ru|=1;try{return e(t)}finally{0===(Ru=n)&&(Hu=Ye()+500,Fi&&qi())}}function fl(e){null!==$u&&0===$u.tag&&0===(6&Ru)&&Cl();var t=Ru;Ru|=1;var n=Tu.transition,r=_t;try{if(Tu.transition=null,_t=1,e)return e()}finally{_t=r,Tu.transition=n,0===(6&(Ru=t))&&qi()}}function dl(){Nu=Mu.current,Ei(Mu)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:oa(),Ei(Ri),Ei(Ti),fa();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ei(ua);break;case 10:Co(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Iu=e,Pu=e=Ml(e.current,null),Au=Nu=t,Du=0,Lu=null,Fu=Uu=ju=0,zu=Bu=null,null!==xo){for(t=0;t<xo.length;t++)if(null!==(r=(n=xo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}xo=null}return e}function pl(e,t){for(;;){var n=Pu;try{if(ko(),da.current=as,ya){for(var r=va.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(pa=0,ga=ma=va=null,_a=!1,ba=0,xu.current=null,null===n||null===n.return){Du=1,Lu=t,Pu=null;break}e:{var a=e,s=n.return,u=n,l=t;if(t=Au,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=u,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(a,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){ms(a,c,t),ml();break e}l=Error(o(426))}else if(io&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),vo(cs(l,u));break e}}a=l=cs(l,u),4!==Du&&(Du=2),null===Bu?Bu=[a]:Bu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,jo(a,ps(0,l,t));break e;case 1:u=l;var y=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Ku||!Ku.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t,jo(a,vs(a,u,t));break e}}a=a.return}while(null!==a)}wl(n)}catch(b){t=b,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function vl(){var e=Ou.current;return Ou.current=as,null===e?as:e}function ml(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Iu||0===(268435455&ju)&&0===(268435455&Uu)||ul(Iu,Au)}function gl(e,t){var n=Ru;Ru|=2;var r=vl();for(Iu===e&&Au===t||(Wu=null,hl(e,t));;)try{yl();break}catch(i){pl(e,i)}if(ko(),Ru=n,Ou.current=r,null!==Pu)throw Error(o(261));return Iu=null,Au=0,Du}function yl(){for(;null!==Pu;)bl(Pu)}function _l(){for(;null!==Pu&&!$e();)bl(Pu)}function bl(e){var t=Su(e.alternate,e,Nu);e.memoizedProps=e.pendingProps,null===t?wl(e):Pu=t,xu.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Nu)))return void(Pu=n)}else{if(null!==(n=$s(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Du=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Du&&(Du=5)}function kl(e,t,n){var r=_t,i=Tu.transition;try{Tu.transition=null,_t=1,function(e,t,n,r){do{Cl()}while(null!==$u);if(0!==(6&Ru))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Iu&&(Pu=Iu=null,Au=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Il(tt,(function(){return Cl(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tu.transition,Tu.transition=null;var s=_t;_t=1;var u=Ru;Ru|=4,xu.current=null,function(e,t){if(ei=Wt,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(u=s+i),d!==a||0!==r&&3!==d.nodeType||(l=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===i&&(u=s),h===a&&++f===r&&(l=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:go(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){El(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),gu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,_u(n,e,i),Je(),Ru=u,_t=s,Tu.transition=a}else e.current=n;if(Qu&&(Qu=!1,$u=e,Ju=i),a=e.pendingLanes,0===a&&(Ku=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gu)throw Gu=!1,e=Vu,Vu=null,e;0!==(1&Ju)&&0!==e.tag&&Cl(),a=e.pendingLanes,0!==(1&a)?e===Xu?Yu++:(Yu=0,Xu=e):Yu=0,qi()}(e,t,n,r)}finally{Tu.transition=i,_t=r}return null}function Cl(){if(null!==$u){var e=bt(Ju),t=Tu.transition,n=_t;try{if(Tu.transition=null,_t=16>e?16:e,null===$u)var r=!1;else{if(e=$u,$u=null,Ju=0,0!==(6&Ru))throw Error(o(331));var i=Ru;for(Ru|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Zs=c;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:ru(8,f,a)}var d=f.child;if(null!==d)d.return=f,Zs=d;else for(;null!==Zs;){var h=(f=Zs).sibling,p=f.return;if(au(f),f===c){Zs=null;break}if(null!==h){h.return=p,Zs=h;break}Zs=p}}}var v=a.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:ru(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zs=y;break e}Zs=a.return}}var _=e.current;for(Zs=_;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=_;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(k){El(u,u.return,k)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Ru=i,qi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{_t=n,Tu.transition=t}}return!1}function Sl(e,t,n){e=Do(e,t=ps(0,t=cs(n,t),1),1),t=tl(),null!==e&&(gt(e,1,t),il(e,t))}function El(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=Do(t,e=vs(t,e=cs(n,e),1),1),e=tl(),null!==t&&(gt(t,1,e),il(t,e));break}}t=t.return}}function Ol(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Iu===e&&(Au&n)===n&&(4===Du||3===Du&&(130023424&Au)===Au&&500>Ye()-qu?hl(e,0):Fu|=n),il(e,t)}function xl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tl();null!==(e=Io(e,t))&&(gt(e,t,n),il(e,n))}function Tl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xl(e,n)}function Rl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),xl(e,n)}function Il(e,t){return Ke(e,t)}function Pl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Al(e,t,n,r){return new Pl(e,t,n,r)}function Nl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var n=e.alternate;return null===n?((n=Al(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dl(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Nl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case C:return Ll(n.children,i,a,t);case S:s=8,i|=8;break;case E:return(e=Al(12,n,t,2|i)).elementType=E,e.lanes=a,e;case R:return(e=Al(13,n,t,i)).elementType=R,e.lanes=a,e;case I:return(e=Al(19,n,t,i)).elementType=I,e.lanes=a,e;case N:return jl(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case O:s=10;break e;case x:s=9;break e;case T:s=11;break e;case P:s=14;break e;case A:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Al(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ll(e,t,n,r){return(e=Al(7,e,r,t)).lanes=n,e}function jl(e,t,n,r){return(e=Al(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Al(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Al(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,o,a,s,u){return e=new Bl(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Al(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ao(o),e}function ql(e){if(!e)return xi;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Di(e,n,t)}return t}function Hl(e,t,n,r,i,o,a,s,u){return(e=zl(n,r,!0,e,0,o,0,s,u)).context=ql(null),n=e.current,(o=Mo(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Do(n,o,i),e.current.lanes=i,gt(e,i,r),il(e,r),e}function Wl(e,t,n,r){var i=t.current,o=tl(),a=nl(i);return n=ql(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Do(i,t,a))&&(rl(e,i,a,o),Lo(e,i,a)),a}function Gl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kl(e,t){Vl(e,t),(e=e.alternate)&&Vl(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Is(t),po();break;case 5:aa(t);break;case 1:Ai(t.type)&&Li(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Oi(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Oi(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Us(e,t,n):(Oi(ua,1&ua.current),null!==(e=Gs(e,t,n))?e.sibling:null);Oi(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oi(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Gs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&Zi(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Pi(t,Ti.current);Eo(t,n),i=Sa(null,t,r,e,i,n);var a=Ea();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ao(t),i.updater=qo,t.stateNode=i,i._reactInternals=t,Vo(t,r,e,n),t=Rs(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=go(r,e),i){case 0:t=xs(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Cs(null,t,r,go(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:go(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:go(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,No(e,t),Uo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ps(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=li(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Gs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&lo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Os(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Us(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Yo(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:go(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Oi(yo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ri.current){t=Gs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Mo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),So(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),So(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),r=r(i=Oo(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=go(r=t.type,t.pendingProps),Cs(e,t,r,i=go(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:go(r,i),Ws(e,t),t.tag=1,Ai(r)?(e=!0,Li(t)):e=!1,Eo(t,n),Wo(t,r,i),Vo(t,r,i,n),Rs(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function $l(e){this._internalRoot=e}function Jl(e){this._internalRoot=e}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Gl(a);s.call(e)}}Wl(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Gl(a);o.call(e)}}var a=Hl(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=a,e[pi]=a.current,qr(8===e.nodeType?e.parentNode:e),fl(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gl(u);s.call(e)}}var u=zl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=u,e[pi]=u.current,qr(8===e.nodeType?e.parentNode:e),fl((function(){Wl(t,u,n,r)})),u}(n,t,e,i,r);return Gl(a)}Jl.prototype.render=$l.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wl(e,t,null,null)},Jl.prototype.unmount=$l.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fl((function(){Wl(null,e,null,null)})),t[pi]=null}},Jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),il(t,Ye()),0===(6&Ru)&&(Hu=Ye()+500,qi()))}break;case 13:fl((function(){var t=Io(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Kl(e,1)}},kt=function(e){if(13===e.tag){var t=Io(e,134217728);if(null!==t)rl(t,e,134217728,tl());Kl(e,134217728)}},Ct=function(e){if(13===e.tag){var t=nl(e),n=Io(e,t);if(null!==n)rl(n,e,t,tl());Kl(e,t)}},St=function(){return _t},Et=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));K(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cl,Re=fl;var tc={usingClientEntryPoint:!1,Events:[_i,bi,wi,Oe,xe,cl]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),ot=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yl(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yl(e))throw Error(o(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $l(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(o(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yl(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Hl(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jl(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(o(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(o(40));return!!e._reactRootContainer&&(fl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case a:case d:case h:return e;default:switch(e=e&&e.$$typeof){case c:case l:case f:case v:case p:case u:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=_.prototype=new y;b.constructor=_,v(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,C={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:C.current}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===o?"."+T(u,0):o,w(a)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),R(a,t,i,"",(function(e){return e}))):null!=a&&(O(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(x,"$&/")+"/")+e)),t.push(a)),1;if(u=0,o=""===o?".":o+":",w(e))for(var l=0;l<e.length;l++){var c=o+T(s=e[l],l);u+=R(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=R(s=s.value,t,i,c=o+T(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function I(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},N={transition:null},M={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:N,ReactCurrentOwner:C};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=a,t.PureComponent=_,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=C.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)k.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>o(u,n))l<i&&0>o(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>o(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],f=1,d=null,h=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(m=!1,b(e),!v)if(null!==r(l))v=!0,N(k);else{var t=r(c);null!==t&&M(w,t.startTime-e)}}function k(e,n){v=!1,m&&(m=!1,y(O),O=-1),p=!0;var o=h;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!R());){var a=d.callback;if("function"===typeof a){d.callback=null,h=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var u=!0;else{var f=r(c);null!==f&&M(w,f.startTime-n),u=!1}return u}finally{d=null,h=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,S=!1,E=null,O=-1,x=5,T=-1;function R(){return!(t.unstable_now()-T<x)}function I(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?C():(S=!1,E=null)}}else S=!1}if("function"===typeof _)C=function(){_(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=I,C=function(){A.postMessage(null)}}else C=function(){g(I,0)};function N(e){E=e,S||(S=!0,C())}function M(e,n){O=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,N(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(l)&&e===r(c)&&(m?(y(O),O=-1):m=!0,M(w,o-a))):(e.sortIndex=s,n(l,e),v||p||(v=!0,N(k))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return s((function(){i.value=n,i.getSnapshot=t,l(i)&&c({inst:i})}),[e,n,t]),a((function(){return l(i)&&c({inst:i}),e((function(){l(i)&&c({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=i.useSyncExternalStore,s=r.useRef,u=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=s(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;f=l((function(){function e(e){if(!u){if(u=!0,a=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(a=e,s=n)}var a,s,u=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,i]);var h=a(e,f[0],f[1]);return u((function(){d.hasValue=!0,d.value=h}),[h]),c(h),h}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/ChaosApp/",function(){"use strict";var e,t=n(791),r=n.t(t,2),i=n(250);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(e){return function(e){if(Array.isArray(e))return o(e)}(e)||a(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){var t=g();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,n)}}function b(e,t,n){return b=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&p(i,n.prototype),i},b.apply(null,arguments)}function w(e){var t="function"===typeof Map?new Map:void 0;return w=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return b(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},w(e)}function k(e){if(Array.isArray(e))return e}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){return k(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||s(e,t)||C()}function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var x,T="popstate";function R(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function I(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function P(e,t){return{usr:e.state,key:e.key,idx:t}}function A(e,t,n,r){return void 0===n&&(n=null),O({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?M(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function N(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function M(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function D(t,n,r,i){void 0===i&&(i={});var o=i,a=o.window,s=void 0===a?document.defaultView:a,u=o.v5Compat,l=void 0!==u&&u,c=s.history,f=e.Pop,d=null,h=p();function p(){return(c.state||{idx:null}).idx}function v(){f=e.Pop;var t=p(),n=null==t?null:t-h;h=t,d&&d({action:f,location:g.location,delta:n})}function m(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:N(e);return R(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(O({},c.state,{idx:h}),""));var g={get action(){return f},get location(){return t(s,c)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(T,v),d=e,function(){s.removeEventListener(T,v),d=null}},createHref:function(e){return n(s,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;var i=A(g.location,t,n);r&&r(i,t);var o=P(i,h=p()+1),a=g.createHref(i);try{c.pushState(o,"",a)}catch(qo){if(qo instanceof DOMException&&"DataCloneError"===qo.name)throw qo;s.location.assign(a)}l&&d&&d({action:f,location:g.location,delta:1})},replace:function(t,n){f=e.Replace;var i=A(g.location,t,n);r&&r(i,t);var o=P(i,h=p()),a=g.createHref(i);c.replaceState(o,"",a),l&&d&&d({action:f,location:g.location,delta:0})},go:function(e){return c.go(e)}};return g}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(x||(x={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function L(e,t,n){void 0===n&&(n="/");var r=J(("string"===typeof t?M(t):t).pathname||"/",n);if(null==r)return null;var i=j(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=K(i[a],$(r));return o}function j(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,o){var a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(R(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var s=ee([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(R(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),j(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:V(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,o=E(U(e.path));try{for(o.s();!(r=o.n()).done;){var a=r.value;i(e,t,a)}}catch(s){o.e(s)}finally{o.f()}}else i(e,t)})),t}function U(e){var t=e.split("/");if(0===t.length)return[];var n,r=k(n=t)||a(n)||s(n)||C(),i=r[0],o=r.slice(1),l=i.endsWith("?"),c=i.replace(/\?$/,"");if(0===o.length)return l?[c,""]:[c];var f=U(o.join("/")),d=[];return d.push.apply(d,u(f.map((function(e){return""===e?c:[c,e].join("/")})))),l&&d.push.apply(d,u(f)),d.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var F=/^:\w+$/,B=3,z=2,q=1,H=10,W=-2,G=function(e){return"*"===e};function V(e,t){var n=e.split("/"),r=n.length;return n.some(G)&&(r+=W),t&&(r+=z),n.filter((function(e){return!G(e)})).reduce((function(e,t){return e+(F.test(t)?B:""===t?q:H)}),r)}function K(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var s=n[a],u=a===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=Q({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var f=s.route;o.push({params:r,pathname:ee([i,c.pathname]),pathnameBase:te(ee([i,c.pathnameBase])),route:f}),"/"!==c.pathnameBase&&(i=ee([i,c.pathnameBase]))}return o}function Q(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);I("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),r=S(n,2),i=r[0],o=r[1],a=t.match(i);if(!a)return null;var s=a[0],u=s.replace(/(.)\/+$/,"$1"),l=a.slice(1),c=o.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(qo){return I(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+qo+")."),e}}(l[n]||"",t),e}),{});return{params:c,pathname:s,pathnameBase:u,pattern:e}}function $(e){try{return decodeURI(e)}catch(qo){return I(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+qo+")."),e}}function J(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Y(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function X(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Z(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=M(e):(R(!(i=O({},e)).pathname||!i.pathname.includes("?"),Y("?","pathname","search",i)),R(!i.pathname||!i.pathname.includes("#"),Y("#","pathname","hash",i)),R(!i.search||!i.search.includes("#"),Y("#","search","hash",i)));var o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(r||null==s)o=n;else{var u=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;i.pathname=l.join("/")}o=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?M(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,s=void 0===a?"":a,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ne(o),hash:re(s)}}(i,o),f=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!f&&!d||(c.pathname+="/"),c}var ee=function(e){return e.join("/").replace(/\/\/+/g,"/")},te=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ne=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},re=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ie=function(e){v(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n)}(w(Error));function oe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ae=["post","put","patch","delete"],se=(new Set(ae),["get"].concat(ae));new Set(se),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}var le=t.createContext(null);var ce=t.createContext(null);var fe=t.createContext(null);var de=t.createContext(null);var he=t.createContext(null);var pe=t.createContext({outlet:null,matches:[],isDataRoute:!1});var ve=t.createContext(null);function me(){return null!=t.useContext(he)}function ge(){return me()||R(!1),t.useContext(he).location}function ye(e){t.useContext(de).static||t.useLayoutEffect(e)}function _e(){return t.useContext(pe).isDataRoute?function(){var e=Ie(Se.UseNavigateStable).router,n=Ae(Ee.UseNavigateStable),r=t.useRef(!1);return ye((function(){r.current=!0})),t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,ue({fromRouteId:n},i)))}),[e,n])}():function(){me()||R(!1);var e=t.useContext(le),n=t.useContext(de),r=n.basename,i=n.navigator,o=t.useContext(pe).matches,a=ge().pathname,s=JSON.stringify(X(o).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);return ye((function(){u.current=!0})),t.useCallback((function(t,n){if(void 0===n&&(n={}),u.current)if("number"!==typeof t){var o=Z(t,JSON.parse(s),a,"path"===n.relative);null==e&&"/"!==r&&(o.pathname="/"===o.pathname?r:ee([r,o.pathname])),(n.replace?i.replace:i.push)(o,n.state,n)}else i.go(t)}),[r,i,s,a,e])}()}function be(){var e=t.useContext(pe).matches,n=e[e.length-1];return n?n.params:{}}function we(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(pe).matches,o=ge().pathname,a=JSON.stringify(X(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return Z(e,JSON.parse(a),o,"path"===r)}),[e,a,o,r])}function ke(n,r,i){me()||R(!1);var o,a=t.useContext(de).navigator,s=t.useContext(pe).matches,u=s[s.length-1],l=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),f=(u&&u.route,ge());if(r){var d,h="string"===typeof r?M(r):r;"/"===c||(null==(d=h.pathname)?void 0:d.startsWith(c))||R(!1),o=h}else o=f;var p=o.pathname||"/",v=L(n,{pathname:"/"===c?p:p.slice(c.length)||"/"});var m=Re(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:ee([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:ee([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,i);return r&&m?t.createElement(he.Provider,{value:{location:ue({pathname:"/",search:"",hash:"",state:null,key:"default"},o),navigationType:e.Pop}},m):m}function Ce(){var e=function(){var e,n=t.useContext(ve),r=Pe(Ee.UseRouteError),i=Ae(Ee.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=oe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}var Se,Ee,Oe=t.createElement(Ce,null),xe=function(e){v(r,e);var n=_(r);function r(e){var t;return l(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return h(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(pe.Provider,{value:this.props.routeContext},t.createElement(ve.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function Te(e){var n=e.routeContext,r=e.match,i=e.children,o=t.useContext(le);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(pe.Provider,{value:n},i)}function Re(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}var a=e,s=null==(i=r)?void 0:i.errors;if(null!=s){var u=a.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||R(!1),a=a.slice(0,Math.min(a.length,u+1))}return a.reduceRight((function(e,i,o){var u=i.route.id?null==s?void 0:s[i.route.id]:null,l=null;r&&(l=i.route.errorElement||Oe);var c=n.concat(a.slice(0,o+1)),f=function(){var n;return n=u?l:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(Te,{match:i,routeContext:{outlet:e,matches:c,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(xe,{location:r.location,revalidation:r.revalidation,component:l,error:u,children:f(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):f()}),null)}function Ie(e){var n=t.useContext(le);return n||R(!1),n}function Pe(e){var n=t.useContext(ce);return n||R(!1),n}function Ae(e){var n=function(e){var n=t.useContext(pe);return n||R(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||R(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Se||(Se={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Ee||(Ee={}));var Ne;r.startTransition;function Me(e){R(!1)}function De(n){var r=n.basename,i=void 0===r?"/":r,o=n.children,a=void 0===o?null:o,s=n.location,u=n.navigationType,l=void 0===u?e.Pop:u,c=n.navigator,f=n.static,d=void 0!==f&&f;me()&&R(!1);var h=i.replace(/^\/*/,"/"),p=t.useMemo((function(){return{basename:h,navigator:c,static:d}}),[h,c,d]);"string"===typeof s&&(s=M(s));var v=s,m=v.pathname,g=void 0===m?"/":m,y=v.search,_=void 0===y?"":y,b=v.hash,w=void 0===b?"":b,k=v.state,C=void 0===k?null:k,S=v.key,E=void 0===S?"default":S,O=t.useMemo((function(){var e=J(g,h);return null==e?null:{location:{pathname:e,search:_,hash:w,state:C,key:E},navigationType:l}}),[h,g,_,w,C,E,l]);return null==O?null:t.createElement(de.Provider,{value:p},t.createElement(he.Provider,{children:a,value:O}))}function Le(e){var t=e.children,n=e.location;return ke(Ue(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ne||(Ne={}));var je=new Promise((function(){}));t.Component;function Ue(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var o=[].concat(u(n),[i]);if(e.type!==t.Fragment){e.type!==Me&&R(!1),e.props.index&&e.props.children&&R(!1);var a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ue(e.props.children,o)),r.push(a)}else r.push.apply(r,Ue(e.props.children,o))}})),r}n.p;function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fe.apply(this,arguments)}function Be(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var ze=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],qe=["aria-current","caseSensitive","className","end","style","to","children"];var He=r.startTransition;function We(e){var n,r=e.basename,i=e.children,o=e.future,a=e.window,s=t.useRef();null==s.current&&(s.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),D((function(e,t){var n=M(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,o=n.search,a=void 0===o?"":o,s=n.hash;return A("",{pathname:i,search:a,hash:void 0===s?"":s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,o=i.indexOf("#");r=-1===o?i:i.slice(0,o)}return r+"#"+("string"===typeof t?t:N(t))}),(function(e,t){I("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)));var u=s.current,l=S(t.useState({action:u.action,location:u.location}),2),c=l[0],f=l[1],d=(o||{}).v7_startTransition,h=t.useCallback((function(e){d&&He?He((function(){return f(e)})):f(e)}),[f,d]);return t.useLayoutEffect((function(){return u.listen(h)}),[u,h]),t.createElement(De,{basename:r,children:i,location:c.location,navigationType:c.action,navigator:u})}var Ge="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ke=t.forwardRef((function(e,n){var r,i=e.onClick,o=e.relative,a=e.reloadDocument,s=e.replace,u=e.state,l=e.target,c=e.to,f=e.preventScrollReset,d=Be(e,ze),h=t.useContext(de).basename,p=!1;if("string"===typeof c&&Ve.test(c)&&(r=c,Ge))try{var v=new URL(window.location.href),m=c.startsWith("//")?new URL(v.protocol+c):new URL(c),g=J(m.pathname,h);m.origin===v.origin&&null!=g?c=g+m.search+m.hash:p=!0}catch(b){}var y=function(e,n){var r=(void 0===n?{}:n).relative;me()||R(!1);var i=t.useContext(de),o=i.basename,a=i.navigator,s=we(e,{relative:r}),u=s.hash,l=s.pathname,c=s.search,f=l;return"/"!==o&&(f="/"===l?o:ee([o,l])),a.createHref({pathname:f,search:c,hash:u})}(c,{relative:o}),_=function(e,n){var r=void 0===n?{}:n,i=r.target,o=r.replace,a=r.state,s=r.preventScrollReset,u=r.relative,l=_e(),c=ge(),f=we(e,{relative:u});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==o?o:N(c)===N(f);l(e,{replace:n,state:a,preventScrollReset:s,relative:u})}}),[c,l,f,o,a,i,e,s,u])}(c,{replace:s,state:u,target:l,preventScrollReset:f,relative:o});return t.createElement("a",Fe({},d,{href:r||y,onClick:p||a?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:n,target:l}))}));var Qe=t.forwardRef((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,o=e.caseSensitive,a=void 0!==o&&o,s=e.className,u=void 0===s?"":s,l=e.end,c=void 0!==l&&l,f=e.style,d=e.to,h=e.children,p=Be(e,qe),v=we(d,{relative:p.relative}),m=ge(),g=t.useContext(ce),y=t.useContext(de).navigator,_=y.encodeLocation?y.encodeLocation(v).pathname:v.pathname,b=m.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(b=b.toLowerCase(),w=w?w.toLowerCase():null,_=_.toLowerCase());var k,C=b===_||!c&&b.startsWith(_)&&"/"===b.charAt(_.length),S=null!=w&&(w===_||!c&&w.startsWith(_)&&"/"===w.charAt(_.length)),E=C?i:void 0;k="function"===typeof u?u({isActive:C,isPending:S}):[u,C?"active":null,S?"pending":null].filter(Boolean).join(" ");var O="function"===typeof f?f({isActive:C,isPending:S}):f;return t.createElement(Ke,Fe({},p,{"aria-current":E,className:k,ref:n,style:O,to:d}),"function"===typeof h?h({isActive:C,isPending:S}):h)}));var $e,Je;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})($e||($e={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Je||(Je={}));var Ye=n(248),Xe=n(327),Ze=n(164);var et=function(e){e()},tt=function(){return et};function nt(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rt=Symbol.for("react-redux-context"),it="undefined"!==typeof globalThis?globalThis:{};function ot(){var e;if(!t.createContext)return{};var n=null!=(e=it[rt])?e:it[rt]=new Map,r=n.get(t.createContext);return r||(r=t.createContext(null),n.set(t.createContext,r)),r}var at=ot();function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at;return function(){return(0,t.useContext)(e)}}var ut=st(),lt=function(){throw new Error("uSES not initialized!")},ct=function(e,t){return e===t};function ft(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,n=e===at?ut:st(e);return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="function"===typeof r?{equalityFn:r}:r,o=i.equalityFn,a=void 0===o?ct:o,s=i.stabilityCheck,u=void 0===s?void 0:s;i.noopCheck;var l=n(),c=l.store,f=l.subscription,d=l.getServerState,h=l.stabilityCheck,p=(l.noopCheck,(0,t.useRef)(!0),(0,t.useCallback)(nt({},e.name,(function(t){return e(t)}))[e.name],[e,h,u])),v=lt(f.addNestedSub,c.getState,d||c.getState,p,a);return(0,t.useDebugValue)(v),v}}var dt=ft();n(110),n(900);var ht={notify:function(){},get:function(){return[]}};function pt(e,t){var n,r=ht;function i(){a.onStateChange&&a.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=tt(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var a={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=ht)},getListeners:function(){return r}};return a}var vt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var mt=function(e){var n=e.store,r=e.context,i=e.children,o=e.serverState,a=e.stabilityCheck,s=void 0===a?"once":a,u=e.noopCheck,l=void 0===u?"once":u,c=t.useMemo((function(){var e=pt(n);return{store:n,subscription:e,getServerState:o?function(){return o}:void 0,stabilityCheck:s,noopCheck:l}}),[n,o,s,l]),f=t.useMemo((function(){return n.getState()}),[n]);vt((function(){var e=c.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),f!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[c,f]);var d=r||at;return t.createElement(d.Provider,{value:c},i)};function gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=e===at?ut:st(e);return function(){return t().store}}var yt=gt();function _t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=e===at?yt:gt(e);return function(){return t().dispatch}}var bt,wt=_t();function kt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ct(e){return!!e&&!!e[hn]}function St(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===pn}(e)||Array.isArray(e)||!!e[dn]||!!(null===(t=e.constructor)||void 0===t?void 0:t[dn])||Pt(e)||At(e))}function Et(e,t,n){void 0===n&&(n=!1),0===Ot(e)?(n?Object.keys:vn)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Ot(e){var t=e[hn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Pt(e)?2:At(e)?3:0}function xt(e,t){return 2===Ot(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Tt(e,t){return 2===Ot(e)?e.get(t):e[t]}function Rt(e,t,n){var r=Ot(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function It(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Pt(e){return un&&e instanceof Map}function At(e){return ln&&e instanceof Set}function Nt(e){return e.o||e.t}function Mt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=mn(e);delete t[hn];for(var n=vn(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Dt(e,t){return void 0===t&&(t=!1),jt(e)||Ct(e)||!St(e)||(Ot(e)>1&&(e.set=e.add=e.clear=e.delete=Lt),Object.freeze(e),t&&Et(e,(function(e,t){return Dt(t,!0)}),!0)),e}function Lt(){kt(2)}function jt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Ut(e){var t=gn[e];return t||kt(18,e),t}function Ft(e,t){gn[e]||(gn[e]=t)}function Bt(){return an}function zt(e,t){t&&(Ut("Patches"),e.u=[],e.s=[],e.v=t)}function qt(e){Ht(e),e.p.forEach(Gt),e.p=null}function Ht(e){e===an&&(an=e.l)}function Wt(e){return an={p:[],l:an,h:e,m:!0,_:0}}function Gt(e){var t=e[hn];0===t.i||1===t.i?t.j():t.g=!0}function Vt(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||Ut("ES5").S(t,e,r),r?(n[hn].P&&(qt(t),kt(4)),St(e)&&(e=Kt(t,e),t.l||$t(t,e)),t.u&&Ut("Patches").M(n[hn].t,e,t.u,t.s)):e=Kt(t,n,[]),qt(t),t.u&&t.v(t.u,t.s),e!==fn?e:void 0}function Kt(e,t,n){if(jt(t))return t;var r=t[hn];if(!r)return Et(t,(function(i,o){return Qt(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return $t(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Mt(r.k):r.o,o=i,a=!1;3===r.i&&(o=new Set(i),i.clear(),a=!0),Et(o,(function(t,o){return Qt(e,r,i,t,o,n,a)})),$t(e,i,!1),n&&e.u&&Ut("Patches").N(r,n,e.u,e.s)}return r.o}function Qt(e,t,n,r,i,o,a){if(Ct(i)){var s=Kt(e,i,o&&t&&3!==t.i&&!xt(t.R,r)?o.concat(r):void 0);if(Rt(n,r,s),!Ct(s))return;e.m=!1}else a&&n.add(i);if(St(i)&&!jt(i)){if(!e.h.D&&e._<1)return;Kt(e,i),t&&t.A.l||$t(e,i)}}function $t(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&Dt(t,n)}function Jt(e,t){var n=e[hn];return(n?Nt(n):e)[t]}function Yt(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Xt(e){e.P||(e.P=!0,e.l&&Xt(e.l))}function Zt(e){e.o||(e.o=Mt(e.t))}function en(e,t,n){var r=Pt(t)?Ut("MapSet").F(t,n):At(t)?Ut("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Bt(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=yn;n&&(i=[r],o=_n);var a=Proxy.revocable(i,o),s=a.revoke,u=a.proxy;return r.k=u,r.j=s,u}(t,n):Ut("ES5").J(t,n);return(n?n.A:Bt()).p.push(r),r}function tn(e){return Ct(e)||kt(22,e),function e(t){if(!St(t))return t;var n,r=t[hn],i=Ot(t);if(r){if(!r.P&&(r.i<4||!Ut("ES5").K(r)))return r.t;r.I=!0,n=nn(t,i),r.I=!1}else n=nn(t,i);return Et(n,(function(t,i){r&&Tt(r.t,t)===i||Rt(n,t,e(i))})),3===i?new Set(n):n}(e)}function nn(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Mt(e)}function rn(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[hn];return yn.get(t,e)},set:function(t){var n=this[hn];yn.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][hn];if(!i.P)switch(i.i){case 5:r(i)&&Xt(i);break;case 4:n(i)&&Xt(i)}}}function n(e){for(var t=e.t,n=e.k,r=vn(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==hn){var a=t[o];if(void 0===a&&!xt(t,o))return!0;var s=n[o],u=s&&s[hn];if(u?u.t!==a:!It(s,a))return!0}}var l=!!t[hn];return r.length!==vn(t).length+(l?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};Ft("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=mn(n);delete o[hn];for(var a=vn(o),s=0;s<a.length;s++){var u=a[s];o[u]=e(u,t||!!o[u].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:Bt(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,hn,{value:o,writable:!0}),i},S:function(e,n,i){i?Ct(n)&&n[hn].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[hn];if(n){var i=n.t,o=n.k,a=n.R,s=n.i;if(4===s)Et(o,(function(t){t!==hn&&(void 0!==i[t]||xt(i,t)?a[t]||e(o[t]):(a[t]=!0,Xt(n)))})),Et(i,(function(e){void 0!==o[e]||xt(o,e)||(a[e]=!1,Xt(n))}));else if(5===s){if(r(n)&&(Xt(n),a.length=!0),o.length<i.length)for(var u=o.length;u<i.length;u++)a[u]=!1;else for(var l=i.length;l<o.length;l++)a[l]=!0;for(var c=Math.min(o.length,i.length),f=0;f<c;f++)o.hasOwnProperty(f)||(a[f]=!0),void 0===a[f]&&e(o[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){lt=e}(Xe.useSyncExternalStoreWithSelector),function(e){e}(Ye.useSyncExternalStore),bt=Ze.unstable_batchedUpdates,et=bt;var on,an,sn="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),un="undefined"!=typeof Map,ln="undefined"!=typeof Set,cn="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,fn=sn?Symbol.for("immer-nothing"):((on={})["immer-nothing"]=!0,on),dn=sn?Symbol.for("immer-draftable"):"__$immer_draftable",hn=sn?Symbol.for("immer-state"):"__$immer_state",pn=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),vn="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,mn=Object.getOwnPropertyDescriptors||function(e){var t={};return vn(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},gn={},yn={get:function(e,t){if(t===hn)return e;var n=Nt(e);if(!xt(n,t))return function(e,t,n){var r,i=Yt(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!St(r)?r:r===Jt(e.t,t)?(Zt(e),e.o[t]=en(e.A.h,r,e)):r},has:function(e,t){return t in Nt(e)},ownKeys:function(e){return Reflect.ownKeys(Nt(e))},set:function(e,t,n){var r=Yt(Nt(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Jt(Nt(e),t),o=null==i?void 0:i[hn];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(It(n,i)&&(void 0!==n||xt(e.t,t)))return!0;Zt(e),Xt(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==Jt(e.t,t)||t in e.t?(e.R[t]=!1,Zt(e),Xt(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Nt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){kt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){kt(12)}},_n={};Et(yn,(function(e,t){_n[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),_n.deleteProperty=function(e,t){return _n.set.call(this,e,t,void 0)},_n.set=function(e,t,n){return yn.set.call(this,e[0],t,n,e[0])};var bn=function(){function e(e){var t=this;this.O=cn,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&kt(6),void 0!==r&&"function"!=typeof r&&kt(7),St(e)){var s=Wt(t),u=en(t,e,void 0),l=!0;try{a=n(u),l=!1}finally{l?qt(s):Ht(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return zt(s,r),Vt(e,s)}),(function(e){throw qt(s),e})):(zt(s,r),Vt(a,s))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===fn&&(a=void 0),t.D&&Dt(a,!0),r){var c=[],f=[];Ut("Patches").M(e,a,c,f),r(c,f)}return a}kt(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){St(e)||kt(8),Ct(e)&&(e=tn(e));var t=Wt(this),n=en(this,e,void 0);return n[hn].C=!0,Ht(t),n},t.finishDraft=function(e,t){var n=(e&&e[hn]).A;return zt(n,t),Vt(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!cn&&kt(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=Ut("Patches").$;return Ct(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),wn=new bn,kn=wn.produce,Cn=(wn.produceWithPatches.bind(wn),wn.setAutoFreeze.bind(wn),wn.setUseProxies.bind(wn),wn.applyPatches.bind(wn),wn.createDraft.bind(wn),wn.finishDraft.bind(wn),kn);function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function On(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var xn="function"===typeof Symbol&&Symbol.observable||"@@observable",Tn=function(){return Math.random().toString(36).substring(7).split("").join(".")},Rn={INIT:"@@redux/INIT"+Tn(),REPLACE:"@@redux/REPLACE"+Tn(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Tn()}};function In(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Pn(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(On(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(On(1));return n(Pn)(e,t)}if("function"!==typeof e)throw new Error(On(2));var i=e,o=t,a=[],s=a,u=!1;function l(){s===a&&(s=a.slice())}function c(){if(u)throw new Error(On(3));return o}function f(e){if("function"!==typeof e)throw new Error(On(4));if(u)throw new Error(On(5));var t=!0;return l(),s.push(e),function(){if(t){if(u)throw new Error(On(6));t=!1,l();var n=s.indexOf(e);s.splice(n,1),a=null}}}function d(e){if(!In(e))throw new Error(On(7));if("undefined"===typeof e.type)throw new Error(On(8));if(u)throw new Error(On(9));try{u=!0,o=i(o,e)}finally{u=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}return d({type:Rn.INIT}),(r={dispatch:d,subscribe:f,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(On(10));i=e,d({type:Rn.REPLACE})}})[xn]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(On(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[xn]=function(){return this},e},r}function An(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Rn.INIT}))throw new Error(On(12));if("undefined"===typeof n(void 0,{type:Rn.PROBE_UNKNOWN_ACTION()}))throw new Error(On(13))}))}(n)}catch(s){o=s}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var u=a[s],l=n[u],c=e[u],f=l(c,t);if("undefined"===typeof f){t&&t.type;throw new Error(On(14))}i[u]=f,r=r||f!==c}return(r=r||a.length!==Object.keys(e).length)?i:e}}function Nn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Mn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(On(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=Nn.apply(void 0,o)(n.dispatch),En(En({},n),{},{dispatch:r})}}}function Dn(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Ln=Dn();Ln.withExtraArgument=Dn;var jn=Ln,Un=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fn=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Bn=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},zn=Object.defineProperty,qn=Object.defineProperties,Hn=Object.getOwnPropertyDescriptors,Wn=Object.getOwnPropertySymbols,Gn=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable,Kn=function(e,t,n){return t in e?zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Qn=function(e,t){for(var n in t||(t={}))Gn.call(t,n)&&Kn(e,n,t[n]);if(Wn)for(var r=0,i=Wn(t);r<i.length;r++){n=i[r];Vn.call(t,n)&&Kn(e,n,t[n])}return e},$n=function(e,t){return qn(e,Hn(t))},Jn=function(e,t,n){return new Promise((function(r,i){var o=function(e){try{s(n.next(e))}catch(t){i(t)}},a=function(e){try{s(n.throw(e))}catch(t){i(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(o,a)};s((n=n.apply(e,t)).next())}))},Yn="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Nn:Nn.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Xn(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var Zn=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Un(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Bn([void 0],e[0].concat(this)))):new(t.bind.apply(t,Bn([void 0],e.concat(this))))},t}(Array),er=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Un(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Bn([void 0],e[0].concat(this)))):new(t.bind.apply(t,Bn([void 0],e.concat(this))))},t}(Array);function tr(e){return St(e)?Cn(e,(function(){})):e}function nr(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new Zn);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(jn.withExtraArgument(n.extraArgument)):r.push(jn));0;return r}(e)}}function rr(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Qn(Qn({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function ir(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var or=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},ar=["name","message","stack","code"],sr=function(e,t){this.payload=e,this.meta=t},ur=function(e,t){this.payload=e,this.meta=t},lr=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=ar;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=rr(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:$n(Qn({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=rr(e+"/pending",(function(e,t,n){return{payload:void 0,meta:$n(Qn({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),o=rr(e+"/rejected",(function(e,t,r,i,o){return{payload:i,error:(n&&n.serializeError||lr)(e||"Rejected"),meta:$n(Qn({},o||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),a="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,u,l){var c,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):or(),d=new a;function h(e){c=e,d.abort()}var p=function(){return Jn(this,null,(function(){var a,p,v,m,g,y;return Fn(this,(function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),m=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,e,{getState:u,extra:l}),null===(b=m)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,m];case 1:m=_.sent(),_.label=2;case 2:if(!1===m||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,g=new Promise((function(e,t){return d.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),s(i(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:u,extra:l}))),[4,Promise.race([g,Promise.resolve(t(e,{dispatch:s,getState:u,extra:l,requestId:f,signal:d.signal,abort:h,rejectWithValue:function(e,t){return new sr(e,t)},fulfillWithValue:function(e,t){return new ur(e,t)}})).then((function(t){if(t instanceof sr)throw t;return t instanceof ur?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=_.sent(),[3,5];case 4:return y=_.sent(),v=y instanceof sr?o(null,f,e,y.payload,y.meta):o(y,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(v)&&v.meta.condition||s(v),[2,v]}var b}))}))}();return Object.assign(p,{abort:h,requestId:f,arg:e,unwrap:function(){return p.then(cr)}})}}),{pending:i,rejected:o,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function cr(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var fr="listenerMiddleware";rr(fr+"/add"),rr(fr+"/removeAll"),rr(fr+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var dr,hr=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:hr(10);rn();var pr={gamePin:"",playerId:"",nickname:"",isHost:!1,round:1,activity:"",settingsOpen:!1,savePressed:!1,defaultNumRounds:2,defaultResponseTime:60,defaultDiscussionTime:120,numRounds:2,ablyUsers:[]},vr=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:tr(e.initialState),i=e.reducers||{},o=Object.keys(i),a={},s={},u={};function l(){var t="function"===typeof e.extraReducers?ir(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,o=t[1],a=void 0===o?[]:o,u=t[2],l=void 0===u?void 0:u,c=Qn(Qn({},i),s);return function(e,t,n,r){void 0===n&&(n=[]);var i,o="function"===typeof t?ir(t):[t,n,r],a=o[0],s=o[1],u=o[2];if(function(e){return"function"===typeof e}(e))i=function(){return tr(e())};else{var l=tr(e);i=function(){return l}}function c(e,t){void 0===e&&(e=i());var n=Bn([a[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[u]),n.reduce((function(e,n){if(n){var r;if(Ct(e))return void 0===(r=n(e,t))?e:r;if(St(e))return Cn(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return c.getInitialState=i,c}(r,(function(e){for(var t in c)e.addCase(t,c[t]);for(var n=0,r=a;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}l&&e.addDefaultCase(l)}))}return o.forEach((function(e){var n,r,o=i[e],l=t+"/"+e;"reducer"in o?(n=o.reducer,r=o.prepare):n=o,a[e]=n,s[l]=n,u[e]=r?rr(l,r):rr(l)})),{name:t,reducer:function(e,t){return n||(n=l()),n(e,t)},actions:u,caseReducers:a,getInitialState:function(){return n||(n=l()),n.getInitialState()}}}({name:"session",initialState:pr,reducers:{setSessionId:function(e,t){e.gamePin=t.payload},setPlayerId:function(e,t){e.playerId=t.payload},setName:function(e,t){e.nickname=t.payload},setIsHost:function(e,t){e.isHost=t.payload},setRound:function(e,t){e.round=t.payload},setActivity:function(e,t){e.activity=t.payload},setSettingsOpen:function(e,t){e.settingsOpen=t.payload},setSavePressed:function(e,t){e.savePressed=t.payload},setNumRounds:function(e,t){e.numRounds=t.payload},setAblyUsers:function(e,t){e.ablyUsers.push(t.payload)},resetDefaults:function(){return pr},resetAbly:function(e){e.ablyUsers=[]}}}),mr=vr.actions,gr=mr.setSessionId,yr=mr.setPlayerId,_r=mr.setName,br=mr.setIsHost,wr=(mr.setRound,mr.setActivity),kr=mr.setSettingsOpen,Cr=(mr.setSavePressed,mr.setNumRounds),Sr=mr.setAblyUsers,Er=mr.resetDefaults,Or=(mr.resetAbly,vr.reducer);function xr(){xr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new O(i||[]);return r(a,"_invoke",{value:k(e,n,s)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=l;var d={};function h(){}function p(){}function v(){}var m={};u(m,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var _=v.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,o,a,s){var u=f(e[r],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==c(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,s)}))}s(u.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,r(_,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new w(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(_),u(_,s,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Tr(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(qo){return void n(qo)}s.done?t(u):Promise.resolve(u).then(r,i)}function Rr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Tr(o,r,i,a,s,"next",e)}function s(e){Tr(o,r,i,a,s,"throw",e)}a(void 0)}))}}var Ir=!1,Pr=!1,Ar="${JSCORE_VERSION}",Nr=function(e,t){if(!e)throw Mr(t)},Mr=function(e){return new Error("Firebase Database ("+Ar+") INTERNAL ASSERT FAILED: "+e)},Dr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Lr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,f=(3&o)<<4|s>>4,d=(15&s)<<2|l>>6,h=63&l;u||(h=64,a||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Dr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw new jr;var l=o<<2|a>>4;if(r.push(l),64!==s){var c=a<<4&240|s>>2;if(r.push(c),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},jr=function(e){v(n,e);var t=_(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return h(n)}(w(Error)),Ur=function(e){var t=Dr(e);return Lr.encodeByteArray(t,!0)},Fr=function(e){return Ur(e).replace(/\./g,"")},Br=function(e){try{return Lr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function zr(e){return qr(void 0,e)}function qr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=qr(e[n],t[n]));return e}var Hr=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Wr=function(){try{return Hr()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/ChaosApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Br(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Gr=function(e){var t=function(e){var t,n;return null===(n=null===(t=Wr())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},Vr=function(){var e;return null===(e=Wr())||void 0===e?void 0:e.config},Kr=function(){function e(){var t=this;l(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return h(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Qr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function $r(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qr())}function Jr(){return!0===Ir||!0===Pr}function Yr(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Xr=function(e){v(n,e);var t=_(n);function n(e,r,i){var o;return l(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(y(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(y(o),Zr.prototype.create),o}return h(n)}(w(Error)),Zr=function(){function e(t,n,r){l(this,e),this.service=t,this.serviceName=n,this.errors=r}return h(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ei,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Xr(n,o,t)}}]),e}();var ei=/\{\$([^}]+)}/g;function ti(e){return JSON.parse(e)}function ni(e){return JSON.stringify(e)}var ri=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=ti(Br(o[0])||""),n=ti(Br(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}};function ii(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function oi(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ai(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function si(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ui(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=e[a],u=t[a];if(li(s)&&li(u)){if(!ui(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=r;l<c.length;l++){var f=c[l];if(!n.includes(f))return!1}return!0}function li(e){return null!==e&&"object"===typeof e}var ci=function(){function e(){l(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return h(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var o=16;o<80;o++){var a=n[o-3]^n[o-8]^n[o-14]^n[o-16];n[o]=4294967295&(a<<1|a>>>31)}for(var s,u,l=this.chain_[0],c=this.chain_[1],f=this.chain_[2],d=this.chain_[3],h=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=d^c&(f^d),u=1518500249):(s=c^f^d,u=1859775393):p<60?(s=c&f|d&(c|f),u=2400959708):(s=c^f^d,u=3395469782);var v=(l<<5|l>>>27)+s+h+u+n[p]&4294967295;h=d,d=f,f=4294967295&(c<<30|c>>>2),c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}]),e}();function fi(e,t){return"".concat(e," failed: ").concat(t," argument ")}var di=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function hi(e){return e&&e._delegate?e._delegate:e}var pi=function(){function e(t,n,r){l(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return h(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),vi="[DEFAULT]",mi=function(){function e(t,n){l(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return h(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Kr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:vi})}catch(u){}var t,n=E(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=S(t.value,2),i=r[0],o=r[1],a=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:a});o.resolve(s)}catch(u){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Rr(xr().mark((function e(){var t;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(u(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),u(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),a=E(this.instancesDeferred.entries());try{for(a.s();!(i=a.n()).done;){var s=S(i.value,2),u=s[0],l=s[1];r===this.normalizeInstanceIdentifier(u)&&l.resolve(o)}}catch(c){a.e(c)}finally{a.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;try{o(e,t)}catch(a){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===vi?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi;return this.component?this.component.multipleInstances?e:vi:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var gi,yi,_i=function(){function e(t){l(this,e),this.name=t,this.providers=new Map}return h(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new mi(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),bi=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(yi||(yi={}));var wi={debug:yi.DEBUG,verbose:yi.VERBOSE,info:yi.INFO,warn:yi.WARN,error:yi.ERROR,silent:yi.SILENT},ki=yi.INFO,Ci=(nt(gi={},yi.DEBUG,"log"),nt(gi,yi.VERBOSE,"log"),nt(gi,yi.INFO,"info"),nt(gi,yi.WARN,"warn"),nt(gi,yi.ERROR,"error"),gi),Si=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ci[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(a))}},Ei=function(){function e(t){l(this,e),this.name=t,this._logLevel=ki,this._logHandler=Si,this._userLogHandler=null,bi.push(this)}return h(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in yi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?wi[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,yi.DEBUG].concat(t)),this._logHandler.apply(this,[this,yi.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,yi.VERBOSE].concat(t)),this._logHandler.apply(this,[this,yi.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,yi.INFO].concat(t)),this._logHandler.apply(this,[this,yi.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,yi.WARN].concat(t)),this._logHandler.apply(this,[this,yi.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,yi.ERROR].concat(t)),this._logHandler.apply(this,[this,yi.ERROR].concat(t))}}]),e}();var Oi,xi,Ti=function(e,t){return t.some((function(t){return e instanceof t}))};var Ri=new WeakMap,Ii=new WeakMap,Pi=new WeakMap,Ai=new WeakMap,Ni=new WeakMap;var Mi={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ii.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Pi.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ji(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Di(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xi||(xi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ui(this),n),ji(Ri.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ji(e.apply(Ui(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.call.apply(e,[Ui(this),t].concat(r));return Pi.set(o,t.sort?t.sort():[t]),ji(o)}}function Li(e){return"function"===typeof e?Di(e):(e instanceof IDBTransaction&&function(e){if(!Ii.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=function(){t(),r()},o=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Ii.set(e,t)}}(e),Ti(e,Oi||(Oi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Mi):e)}function ji(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(ji(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((function(t){t instanceof IDBCursor&&Ri.set(t,e)})).catch((function(){})),Ni.set(t,e),t}(e);if(Ai.has(e))return Ai.get(e);var t=Li(e);return t!==e&&(Ai.set(e,t),Ni.set(t,e)),t}var Ui=function(e){return Ni.get(e)};var Fi,Bi,zi=["get","getKey","getAll","getAllKeys","count"],qi=["put","add","delete","clear"],Hi=new Map;function Wi(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Hi.get(t))return Hi.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=qi.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||zi.includes(n))){var o=function(){var e=Rr(xr().mark((function e(t){var o,a,s,u,l,c,f=arguments;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=this.transaction(t,i?"readwrite":"readonly"),s=a.store,u=f.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=f[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,l),i&&a.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Hi.set(t,o),o}}}Mi=function(e){return En(En({},e),{},{get:function(t,n,r){return Wi(t,n)||e.get(t,n,r)},has:function(t,n){return!!Wi(t,n)||e.has(t,n)}})}(Mi);var Gi=function(){function e(t){l(this,e),this.container=t}return h(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Vi="@firebase/app",Ki="0.9.15",Qi=new Ei("@firebase/app"),$i="[DEFAULT]",Ji=(nt(Fi={},Vi,"fire-core"),nt(Fi,"@firebase/app-compat","fire-core-compat"),nt(Fi,"@firebase/analytics","fire-analytics"),nt(Fi,"@firebase/analytics-compat","fire-analytics-compat"),nt(Fi,"@firebase/app-check","fire-app-check"),nt(Fi,"@firebase/app-check-compat","fire-app-check-compat"),nt(Fi,"@firebase/auth","fire-auth"),nt(Fi,"@firebase/auth-compat","fire-auth-compat"),nt(Fi,"@firebase/database","fire-rtdb"),nt(Fi,"@firebase/database-compat","fire-rtdb-compat"),nt(Fi,"@firebase/functions","fire-fn"),nt(Fi,"@firebase/functions-compat","fire-fn-compat"),nt(Fi,"@firebase/installations","fire-iid"),nt(Fi,"@firebase/installations-compat","fire-iid-compat"),nt(Fi,"@firebase/messaging","fire-fcm"),nt(Fi,"@firebase/messaging-compat","fire-fcm-compat"),nt(Fi,"@firebase/performance","fire-perf"),nt(Fi,"@firebase/performance-compat","fire-perf-compat"),nt(Fi,"@firebase/remote-config","fire-rc"),nt(Fi,"@firebase/remote-config-compat","fire-rc-compat"),nt(Fi,"@firebase/storage","fire-gcs"),nt(Fi,"@firebase/storage-compat","fire-gcs-compat"),nt(Fi,"@firebase/firestore","fire-fst"),nt(Fi,"@firebase/firestore-compat","fire-fst-compat"),nt(Fi,"fire-js","fire-js"),nt(Fi,"firebase","fire-js-all"),Fi),Yi=new Map,Xi=new Map;function Zi(e,t){try{e.container.addComponent(t)}catch(n){Qi.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function eo(e){var t=e.name;if(Xi.has(t))return Qi.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xi.set(t,e);var n,r=E(Yi.values());try{for(r.s();!(n=r.n()).done;){Zi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function to(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var no=(nt(Bi={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),nt(Bi,"bad-app-name","Illegal App name: '{$appName}"),nt(Bi,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),nt(Bi,"app-deleted","Firebase App named '{$appName}' already deleted"),nt(Bi,"no-options","Need to provide options, when not being deployed to hosting via source."),nt(Bi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),nt(Bi,"invalid-log-argument","First argument to `onLog` must be null or a function."),nt(Bi,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),nt(Bi,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),nt(Bi,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),nt(Bi,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Bi),ro=new Zr("app","Firebase",no),io=function(){function e(t,n,r){var i=this;l(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pi("app",(function(){return i}),"PUBLIC"))}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ro.create("app-deleted",{appName:this._name})}}]),e}();function oo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:$i,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ro.create("bad-app-name",{appName:String(i)});if(n||(n=Vr()),!n)throw ro.create("no-options");var o=Yi.get(i);if(o){if(ui(n,o.options)&&ui(r,o.config))return o;throw ro.create("duplicate-app",{appName:i})}var a,s=new _i(i),u=E(Xi.values());try{for(u.s();!(a=u.n()).done;){var l=a.value;s.addComponent(l)}}catch(f){u.e(f)}finally{u.f()}var c=new io(n,r,s);return Yi.set(i,c),c}function ao(e,t,n){var r,i=null!==(r=Ji[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&s.push("and"),a&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Qi.warn(s.join(" "))}eo(new pi("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var so="firebase-heartbeat-database",uo=1,lo="firebase-heartbeat-store",co=null;function fo(){return co||(co=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(e,t),u=ji(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(ji(s.result),e.oldVersion,e.newVersion,ji(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){a&&e.addEventListener("close",(function(){return a()})),o&&e.addEventListener("versionchange",(function(e){return o(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(so,uo,{upgrade:function(e,t){if(0===t)e.createObjectStore(lo)}}).catch((function(e){throw ro.create("idb-open",{originalErrorMessage:e.message})}))),co}function ho(e){return po.apply(this,arguments)}function po(){return po=Rr(xr().mark((function e(t){var n,r,i;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fo();case 3:return n=e.sent,e.next=6,n.transaction(lo).objectStore(lo).get(go(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Xr?Qi.warn(e.t0.message):(i=ro.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Qi.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),po.apply(this,arguments)}function vo(e,t){return mo.apply(this,arguments)}function mo(){return mo=Rr(xr().mark((function e(t,n){var r,i,o,a;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fo();case 3:return r=e.sent,i=r.transaction(lo,"readwrite"),o=i.objectStore(lo),e.next=8,o.put(n,go(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Xr?Qi.warn(e.t0.message):(a=ro.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Qi.warn(a.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),mo.apply(this,arguments)}function go(e){return"".concat(e.name,"!").concat(e.options.appId)}var yo=function(){function e(t){var n=this;l(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ko(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return h(e,[{key:"triggerHeartbeat",value:function(){var e=Rr(xr().mark((function e(){var t,n,r;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=_o(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Rr(xr().mark((function e(){var t,n,r,i,o;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=_o(),n=bo(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=Fr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _o(){return(new Date).toISOString().substring(0,10)}function bo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),o=E(e);try{var a=function(){var e=t.value,o=r.find((function(t){return t.agent===e.agent}));if(o){if(o.dates.push(e.date),Co(r)>n)return o.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Co(r)>n)return r.pop(),"break";i=i.slice(1)};for(o.s();!(t=o.n()).done;){if("break"===a())break}}catch(s){o.e(s)}finally{o.f()}return{heartbeatsToSend:r,unsentEntries:i}}var wo,ko=function(){function e(t){l(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return h(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Rr(xr().mark((function e(){return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(qo){t(qo)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Rr(xr().mark((function e(){var t;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ho(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Rr(xr().mark((function e(t){var n,r;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",vo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Rr(xr().mark((function e(t){var n,r;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",vo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(u(r.heartbeats),u(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Co(e){return Fr(JSON.stringify({version:2,heartbeats:e})).length}wo="",eo(new pi("platform-logger",(function(e){return new Gi(e)}),"PRIVATE")),eo(new pi("heartbeat",(function(e){return new yo(e)}),"PRIVATE")),ao(Vi,Ki,wo),ao(Vi,Ki,"esm2017"),ao("fire-js","");ao("firebase","10.1.0","app");var So="@firebase/database",Eo="1.0.1",Oo="";function xo(e){Oo=e}var To=function(){function e(t){l(this,e),this.domStorage_=t,this.prefix_="firebase:"}return h(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ni(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ti(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Ro=function(){function e(){l(this,e),this.cache_={},this.isInMemoryStorage=!0}return h(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ii(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Io=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new To(t)}}catch(n){}return new Ro},Po=Io("localStorage"),Ao=Io("sessionStorage"),No=new Ei("@firebase/database"),Mo=function(){var e=1;return function(){return e++}}(),Do=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,Nr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ci;n.update(t);var r=n.digest();return Lr.encodeByteArray(r)},Lo=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ni(r):r,t+=" "}return t},jo=null,Uo=!0,Fo=function(e,t){Nr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(No.logLevel=yi.VERBOSE,jo=No.log.bind(No),t&&Ao.set("logging_enabled",!0)):"function"===typeof e?jo=e:(jo=null,Ao.remove("logging_enabled"))},Bo=function(){if(!0===Uo&&(Uo=!1,null===jo&&!0===Ao.get("logging_enabled")&&Fo(!0)),jo){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Lo.apply(null,t);jo(r)}},zo=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Bo.apply(void 0,[e].concat(n))}},qo=function(){var e="FIREBASE INTERNAL ERROR: "+Lo.apply(void 0,arguments);No.error(e)},Ho=function(){var e="FIREBASE FATAL ERROR: ".concat(Lo.apply(void 0,arguments));throw No.error(e),new Error(e)},Wo=function(){var e="FIREBASE WARNING: "+Lo.apply(void 0,arguments);No.warn(e)},Go=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Vo="[MIN_NAME]",Ko="[MAX_NAME]",Qo=function(e,t){if(e===t)return 0;if(e===Vo||t===Ko)return-1;if(t===Vo||e===Ko)return 1;var n=na(e),r=na(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},$o=function(e,t){return e===t?0:e<t?-1:1},Jo=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ni(t))},Yo=function e(t){if("object"!==typeof t||null===t)return ni(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=ni(n[o]),i+=":",i+=e(t[n[o]]);return i+="}"},Xo=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Zo(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var ea=function(e){Nr(!Go(e),"Invalid JSON number");var t,n,r,i,o,a=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a))+a,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(o=0;o<64;o+=8){var c=parseInt(u.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var ta=new RegExp("^-?(0*)\\d{1,10}$"),na=function(e){if(ta.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ra=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Wo("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ia=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},oa=function(){function e(t,n){var r=this;l(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return h(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Wo('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),aa=function(){function e(t,n,r){var i=this;l(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return h(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Bo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wo(e)}}]),e}(),sa=function(){function e(t){l(this,e),this.accessToken=t}return h(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();sa.OWNER="owner";var ua="5",la=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ca="ac",fa="websocket",da="long_polling",ha=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];l(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Po.get("host:"+t)||this._host}return h(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Po.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function pa(e,t,n){var r;if(Nr("string"===typeof t,"typeof type must == string"),Nr("object"===typeof n,"typeof params must == object"),t===fa)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==da)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Zo(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var va=function(){function e(){l(this,e),this.counters_={}}return h(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ii(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return zr(this.counters_)}}]),e}(),ma={},ga={};function ya(e){var t=e.toString();return ma[t]||(ma[t]=new va),ma[t]}var _a=function(){function e(t){l(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return h(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&ra((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),ba="start",wa=function(){function e(t,n,r,i,o,a,s){var u=this;l(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=a,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zo(t),this.stats_=ya(n),this.urlFn=function(e){return u.appCheckToken&&(e[ca]=u.appCheckToken),pa(n,da,e)}}return h(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _a(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Jr()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new ka((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1],a=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ba)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[ba]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=ua,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[ca]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&la.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ni(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Ur(t),r=Xo(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Jr()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ni(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Jr()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),ka=function(){function e(t,n,r,i){if(l(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Jr())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Mo(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))o='<script>document.domain="'+document.domain+'";<\/script>';var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(s){Bo("frame writing exception"),s.stack&&Bo(s.stack),Bo(s)}}}return h(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Jr()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Bo("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Bo("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Ca=null;"undefined"!==typeof MozWebSocket?Ca=MozWebSocket:"undefined"!==typeof WebSocket&&(Ca=WebSocket);var Sa=function(){function e(t,n,r,i,o,a,s){l(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zo(this.connId),this.stats_=ya(n),this.connURL=e.connectionURL_(n,a,s,i,r),this.nodeAdmin=n.nodeAdmin}return h(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Po.set("previous_websocket_failure",!0);try{var r;if(Jr()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(ua,"/").concat(Oo,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o={NODE_ENV:"production",PUBLIC_URL:"/ChaosApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Ca(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Po.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ti(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Nr(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ni(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Xo(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var o={};return o.v=ua,!Jr()&&"undefined"!==typeof location&&location.hostname&&la.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[ca]=r),i&&(o.p=i),pa(e,fa,o)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Ca&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Po.isInMemoryStorage||!0===Po.get("previous_websocket_failure")}}]),e}();Sa.responsesRequiredToBeHealthy=2,Sa.healthyTimeout=3e4;var Ea=function(){function e(t){l(this,e),this.initTransports_(t)}return h(e,[{key:"initTransports_",value:function(t){var n=Sa&&Sa.isAvailable(),r=n&&!Sa.previouslyFailed();if(t.webSocketOnly&&(n||Wo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Sa];else{var i,o=this.transports_=[],a=E(e.ALL_TRANSPORTS);try{for(a.s();!(i=a.n()).done;){var s=i.value;s&&s.isAvailable()&&o.push(s)}}catch(u){a.e(u)}finally{a.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[wa,Sa]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Ea.globalTransportInitialized_=!1;var Oa=function(){function e(t,n,r,i,o,a,s,u,c,f){l(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=a,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zo("c:"+this.id+":"),this.transportManager_=new Ea(n),this.log_("Connection created"),this.start_()}return h(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=ia((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Jo("t",e),n=Jo("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Jo("t",e),n=Jo("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Jo("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?qo("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qo("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ua!==n&&Wo("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ia((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ia((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Po.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),xa=function(){function e(){l(this,e)}return h(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Ta=function(){function e(t){l(this,e),this.allowedEvents_=t,this.listeners_={},Nr(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return h(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=u(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].callback.apply(t[o].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Nr(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Ra=function(e){v(n,e);var t=_(n);function n(){var e;return l(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||$r()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return h(n,[{key:"getInitialEvent",value:function(e){return Nr("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ta),Ia=32,Pa=768,Aa=function(){function e(t,n){if(l(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return h(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Na(){return new Aa("")}function Ma(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Da(e){return e.pieces_.length-e.pieceNum_}function La(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Aa(e.pieces_,t)}function ja(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ua(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Fa(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Aa(t,0)}function Ba(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Aa)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var o=t.split("/"),a=0;a<o.length;a++)o[a].length>0&&n.push(o[a]);return new Aa(n,0)}function za(e){return e.pieceNum_>=e.pieces_.length}function qa(e,t){var n=Ma(e),r=Ma(t);if(null===n)return t;if(n===r)return qa(La(e),La(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ha(e,t){for(var n=Ua(e,0),r=Ua(t,0),i=0;i<n.length&&i<r.length;i++){var o=Qo(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Wa(e,t){if(Da(e)!==Da(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ga(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Da(e)>Da(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Va=h((function e(t,n){l(this,e),this.errorPrefix_=n,this.parts_=Ua(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=di(this.parts_[r]);Ka(this)}));function Ka(e){if(e.byteLength_>Pa)throw new Error(e.errorPrefix_+"has a key path longer than "+Pa+" bytes ("+e.byteLength_+").");if(e.parts_.length>Ia)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ia+") or object contains a cycle "+Qa(e))}function Qa(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var $a=function(e){v(n,e);var t=_(n);function n(){var e,r,i;return l(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return h(n,[{key:"getInitialEvent",value:function(e){return Nr("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ta),Ja=1e3,Ya=function(e){v(n,e);var t=_(n);function n(e,r,i,o,a,s,u,c){var f;if(l(this,n),(f=t.call(this)).repoInfo_=e,f.applicationId_=r,f.onDataUpdate_=i,f.onConnectStatus_=o,f.onServerInfoUpdate_=a,f.authTokenProvider_=s,f.appCheckTokenProvider_=u,f.authOverride_=c,f.id=n.nextPersistentConnectionId_++,f.log_=zo("p:"+f.id+":"),f.interruptReasons_={},f.listens=new Map,f.outstandingPuts_=[],f.outstandingGets_=[],f.outstandingPutCount_=0,f.outstandingGetCount_=0,f.onDisconnectRequestQueue_=[],f.connected_=!1,f.reconnectDelay_=Ja,f.maxReconnectDelay_=3e5,f.securityDebugCallback_=null,f.lastSessionId=null,f.establishConnectionTimer_=null,f.visible_=!1,f.requestCBHash_={},f.requestNumber_=0,f.realtime_=null,f.authToken_=null,f.appCheckToken_=null,f.forceTokenRefresh_=!1,f.invalidAuthTokenCount_=0,f.invalidAppCheckTokenCount_=0,f.firstConnection_=!0,f.lastConnectionAttemptTime_=null,f.lastConnectionEstablishedTime_=null,c&&!Jr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return $a.getInstance().on("visible",f.onVisible_,y(f)),-1===e.host.indexOf("fblocal")&&Ra.getInstance().on("online",f.onOnline_,y(f)),f}return h(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ni(i)),Nr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Kr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Nr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Nr(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(o))===e&&(t.log_("listen response",a),"ok"!==u&&t.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ri(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ri(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Nr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ni(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):qo("Unrecognized action received from server: "+ni(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Nr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ja),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Rr(xr().mark((function e(){var t,r,i,o,a,s,u,l,c,f,d,h,p,v,m=this;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,a=this.lastSessionId,s=!1,u=null,l=function(){u?u.close():(s=!0,i())},c=function(e){Nr(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:l,sendRequest:c},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,h=S(d,2),p=h[0],v=h[1],s?Bo("getToken() completed but was canceled"):(Bo("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,u=new Oa(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Wo(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),a)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Wo(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Bo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Bo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ai(this.interruptReasons_)&&(this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Yo(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Aa(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Bo("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Bo("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=E(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=E(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){var a=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(a.action,a.pathString,a.data,a.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Jr()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Oo.replace(/\./g,"-")]=1,$r()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Ra.getInstance().currentlyOnline();return ai(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ii(e,"w")){var n=oi(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Wo("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(xa);Ya.nextPersistentConnectionId_=0,Ya.nextConnectionId_=0;var Xa,Za=function(){function e(t,n){l(this,e),this.name=t,this.node=n}return h(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),es=function(){function e(){l(this,e)}return h(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Za(Vo,e),r=new Za(Vo,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Za.MIN}}]),e}(),ts=function(e){v(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"compare",value:function(e,t){return Qo(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Mr("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Za.MIN}},{key:"maxPost",value:function(){return new Za(Ko,Xa)}},{key:"makePost",value:function(e,t){return Nr("string"===typeof e,"KeyIndex indexValue must always be a string."),new Za(e,Xa)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Xa},set:function(e){Xa=e}}]),n}(es),ns=new ts,rs=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;l(this,e),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse_?t.left:t.right;else{if(0===a){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return h(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),is=function(){function e(t,n,r,i,o){l(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:ss.EMPTY_NODE,this.right=null!=o?o:ss.EMPTY_NODE}return h(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return ss.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ss.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();is.RED=!0,is.BLACK=!1;var os,as=function(){function e(){l(this,e)}return h(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new is(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),ss=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;l(this,e),this.comparator_=t,this.root_=n}return h(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,is.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,is.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new rs(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new rs(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new rs(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new rs(this.root_,null,this.comparator_,!0,e)}}]),e}();function us(e,t){return Qo(e.name,t.name)}function ls(e,t){return Qo(e,t)}ss.EMPTY_NODE=new as;var cs,fs,ds,hs=function(e){return"number"===typeof e?"number:"+ea(e):"string:"+e},ps=function(e){if(e.isLeafNode()){var t=e.val();Nr("string"===typeof t||"number"===typeof t||"object"===typeof t&&ii(t,".sv"),"Priority must be a string or number.")}else Nr(e===os||e.isEmpty(),"priority of unexpected type.");Nr(e===os||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},vs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;l(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Nr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ps(this.priorityNode_)}return h(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return za(t)?this:".priority"===Ma(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Ma(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Nr(".priority"!==r||1===Da(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(La(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+hs(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?ea(this.value_):this.value_,this.lazyHash_=Do(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Nr(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return Nr(i>=0,"Unknown leaf type: "+n),Nr(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return cs},set:function(e){cs=e}}]),e}();vs.VALUE_TYPE_ORDER=["object","boolean","number","string"];var ms,gs,ys=function(e){v(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Qo(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Za.MIN}},{key:"maxPost",value:function(){return new Za(Ko,new vs("[PRIORITY-POST]",ds))}},{key:"makePost",value:function(e,t){var n=fs(e);return new Za(t,new vs("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(es),_s=new ys,bs=Math.log(2),ws=function(){function e(t){l(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/bs,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return h(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),ks=function(e,t,n,r){e.sort(t);var i=function t(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=e[r],a=n?n(o):o,new is(a,o.node,is.BLACK,null,null);var u=parseInt(s/2,10)+r,l=t(r,u),c=t(u+1,i);return o=e[u],a=n?n(o):o,new is(a,o.node,is.BLACK,l,c)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var l=i(o+1,s),c=e[o],f=n?n(c):c;u(new is(f,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),f=Math.pow(2,t.count-(l+1));c?s(f,is.BLACK):(s(f,is.BLACK),s(f,is.RED))}return o}(new ws(e.length));return new ss(r||t,o)},Cs={},Ss=function(){function e(t,n){l(this,e),this.indexes_=t,this.indexSet_=n}return h(e,[{key:"get",value:function(e){var t=oi(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ss?t:null}},{key:"hasIndex",value:function(e){return ii(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Nr(t!==ns,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(Za.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?ks(i,t.getCompare()):Cs;var u=t.toString(),l=Object.assign({},this.indexSet_);l[u]=t;var c=Object.assign({},this.indexes_);return c[u]=r,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(si(this.indexes_,(function(e,i){var o=oi(r.indexSet_,i);if(Nr(o,"Missing index implementation for "+i),e===Cs){if(o.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(Za.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),ks(a,o.getCompare())}return Cs}var l=n.get(t.name),c=e;return l&&(c=c.remove(new Za(t.name,l))),c.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(si(this.indexes_,(function(e){if(e===Cs)return e;var r=n.get(t.name);return r?e.remove(new Za(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Nr(Cs&&_s,"ChildrenNode.ts has not been loaded"),ms=ms||new e({".priority":Cs},{".priority":_s})}}]),e}(),Es=function(){function e(t,n,r){l(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ps(this.priorityNode_),this.children_.isEmpty()&&Nr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return h(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||gs}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?gs:t}},{key:"getChild",value:function(e){var t=Ma(e);return null===t?this:this.getImmediateChild(t).getChild(La(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Nr(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,o=new Za(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(o,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(o,this.children_));var a=r.isEmpty()?gs:this.priorityNode_;return new e(r,a,i)}},{key:"updateChild",value:function(e,t){var n=Ma(e);if(null===n)return t;Nr(".priority"!==Ma(e)||1===Da(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(La(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(_s,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+hs(this.getPriority().val())+":"),this.forEachChild(_s,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Do(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Za(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Za(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Za(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Za.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Za.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Os?-1:0}},{key:"withIndex",value:function(t){if(t===ns||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===ns||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(_s),r=t.getIterator(_s),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===ns?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return gs||(gs=new e(new ss(ls),null,Ss.Default))}}]),e}();Es.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Os=new(function(e){v(n,e);var t=_(n);function n(){return l(this,n),t.call(this,new ss(ls),Es.EMPTY_NODE,Ss.Default)}return h(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Es.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Es));Object.defineProperties(Za,{MIN:{value:new Za(Vo,Es.EMPTY_NODE)},MAX:{value:new Za(Ko,Os)}}),ts.__EMPTY_NODE=Es.EMPTY_NODE,vs.__childrenNodeConstructor=Es,os=Os,function(e){ds=e}(Os);var xs=!0;function Ts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Es.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Nr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new vs(e,Ts(t));if(e instanceof Array||!xs){var n=Es.EMPTY_NODE;return Zo(e,(function(t,r){if(ii(e,t)&&"."!==t.substring(0,1)){var i=Ts(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Ts(t))}var r=[],i=!1;if(Zo(e,(function(e,t){if("."!==e.substring(0,1)){var n=Ts(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Za(e,n)))}})),0===r.length)return Es.EMPTY_NODE;var o=ks(r,us,(function(e){return e.name}),ls);if(i){var a=ks(r,_s.getCompare());return new Es(o,Ts(t),new Ss({".priority":a},{".priority":_s}))}return new Es(o,Ts(t),Ss.Default)}!function(e){fs=e}(Ts);var Rs=function(e){v(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this)).indexPath_=e,Nr(!za(e)&&".priority"!==Ma(e),"Can't create PathIndex with empty path or .priority key"),r}return h(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Qo(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Ts(e),r=Es.EMPTY_NODE.updateChild(this.indexPath_,n);return new Za(t,r)}},{key:"maxPost",value:function(){var e=Es.EMPTY_NODE.updateChild(this.indexPath_,Os);return new Za(Ko,e)}},{key:"toString",value:function(){return Ua(this.indexPath_,0).join("/")}}]),n}(es),Is=function(e){v(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Qo(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Za.MIN}},{key:"maxPost",value:function(){return Za.MAX}},{key:"makePost",value:function(e,t){var n=Ts(e);return new Za(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(es),Ps=new Is;function As(e){return{type:"value",snapshotNode:e}}function Ns(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ms(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ds(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Ls=function(){function e(t){l(this,e),this.index_=t}return h(e,[{key:"updateChild",value:function(e,t,n,r,i,o){Nr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Ms(t,a)):Nr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ns(t,n)):o.trackChildChange(Ds(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(_s,(function(e,r){t.hasChild(e)||n.trackChildChange(Ms(e,r))})),t.isLeafNode()||t.forEachChild(_s,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ds(t,r,i))}else n.trackChildChange(Ns(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Es.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),js=function(){function e(t){l(this,e),this.indexedFilter_=new Ls(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return h(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,o){return this.matches(new Za(t,n))||(n=Es.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Es.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Es.EMPTY_NODE);var i=this;return t.forEachChild(_s,(function(e,t){i.matches(new Za(e,t))||(r=r.updateImmediateChild(e,Es.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Us=function(){function e(t){var n=this;l(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new js(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return h(e,[{key:"updateChild",value:function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Za(t,n))||(n=Es.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Es.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Es.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),o++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(Es.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var l=s.getNext();u<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?u++:r=r.updateImmediateChild(l.name,Es.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;Nr(s.numChildren()===this.limit_,"");var u=new Za(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var f=s.getImmediateChild(t),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===t||s.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var h=null==d?1:o(d,u);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(Ds(t,n,f)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Ms(t,f));var p=s.updateImmediateChild(t,Es.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(Ns(d.name,d.node)),p.updateImmediateChild(d.name,d.node)):p}return n.isEmpty()?e:c&&o(l,u)>=0?(null!=i&&(i.trackChildChange(Ms(l.name,l.node)),i.trackChildChange(Ns(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,Es.EMPTY_NODE)):e}}]),e}(),Fs=function(){function e(){l(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_s}return h(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Nr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Nr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vo}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Nr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Nr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ko}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Nr(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===_s}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Bs(e){var t,n={};if(e.isDefault())return n;if(e.index_===_s?t="$priority":e.index_===Ps?t="$value":e.index_===ns?t="$key":(Nr(e.index_ instanceof Rs,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ni(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=ni(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+ni(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=ni(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+ni(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function zs(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==_s&&(t.i=e.index_.toString()),t}var qs=function(e){v(n,e);var t=_(n);function n(e,r,i,o){var a;return l(this,n),(a=t.call(this)).repoInfo_=e,a.onDataUpdate_=r,a.authTokenProvider_=i,a.appCheckTokenProvider_=o,a.log_=zo("p:rest:"),a.listens_={},a}return h(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var o=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var l=Bs(e._queryParams);this.restRequest_(a+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),oi(o.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Bs(e._queryParams),r=e._path.toString(),i=new Kr;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=S(i,2),a=o[0],s=o[1];a&&a.accessToken&&(n.auth=a.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+function(e){for(var t=[],n=function(){var e=S(i[r],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}(n);t.log_("Sending REST request for "+u);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+u+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=ti(l.responseText)}catch(n){Wo("Failed to parse JSON response for "+u+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&Wo("Got unsuccessful REST response for "+u+" Status: "+l.status),r(l.status);r=null}},l.open("GET",u,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Nr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(xa),Hs=function(){function e(){l(this,e),this.rootNode_=Es.EMPTY_NODE}return h(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Ws(){return{value:null,children:new Map}}function Gs(e,t,n){if(za(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Ma(t);e.children.has(r)||e.children.set(r,Ws()),Gs(e.children.get(r),t=La(t),n)}}function Vs(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Vs(r,new Aa(t.toString()+"/"+e),n)}))}var Ks,Qs=function(){function e(t){l(this,e),this.collection_=t,this.last_=null}return h(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Zo(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),$s=function(){function e(t,n){l(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Qs(t);var r=1e4+2e4*Math.random();ia(this.reportStats_.bind(this),Math.floor(r))}return h(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Zo(t,(function(t,i){i>0&&ii(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),ia(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Js(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ks||(Ks={}));var Ys,Xs=function(){function e(t,n,r){l(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Ks.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return h(e,[{key:"operationForChild",value:function(t){if(za(this.path)){if(null!=this.affectedTree.value)return Nr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Aa(t));return new e(Na(),n,this.revert)}return Nr(Ma(this.path)===t,"operationForChild called for unrelated child."),new e(La(this.path),this.affectedTree,this.revert)}}]),e}(),Zs=function(){function e(t,n){l(this,e),this.source=t,this.path=n,this.type=Ks.LISTEN_COMPLETE}return h(e,[{key:"operationForChild",value:function(t){return za(this.path)?new e(this.source,Na()):new e(this.source,La(this.path))}}]),e}(),eu=function(){function e(t,n,r){l(this,e),this.source=t,this.path=n,this.snap=r,this.type=Ks.OVERWRITE}return h(e,[{key:"operationForChild",value:function(t){return za(this.path)?new e(this.source,Na(),this.snap.getImmediateChild(t)):new e(this.source,La(this.path),this.snap)}}]),e}(),tu=function(){function e(t,n,r){l(this,e),this.source=t,this.path=n,this.children=r,this.type=Ks.MERGE}return h(e,[{key:"operationForChild",value:function(t){if(za(this.path)){var n=this.children.subtree(new Aa(t));return n.isEmpty()?null:n.value?new eu(this.source,Na(),n.value):new e(this.source,Na(),n)}return Nr(Ma(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,La(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),nu=function(){function e(t,n,r){l(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return h(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(za(e))return this.isFullyInitialized()&&!this.filtered_;var t=Ma(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),ru=h((function e(t){l(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function iu(e,t,n,r,i,o){var a=r.filter((function(e){return e.type===n}));a.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Mr("Should only compare child_ events.");var r=new Za(t.childName,t.snapshotNode),i=new Za(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),a.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function ou(e,t){return{eventCache:e,serverCache:t}}function au(e,t,n,r){return ou(new nu(t,n,r),e.serverCache)}function su(e,t,n,r){return ou(e.eventCache,new nu(t,n,r))}function uu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function lu(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var cu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Ys||(Ys=new ss($o)),Ys);l(this,e),this.value=t,this.children=n}return h(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Na(),value:this.value};if(za(e))return null;var n=Ma(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(La(e),t);return null!=i?{path:Ba(new Aa(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(za(t))return this;var n=Ma(t),r=this.children.get(n);return null!==r?r.subtree(La(t)):new e(null)}},{key:"set",value:function(t,n){if(za(t))return new e(n,this.children);var r=Ma(t),i=(this.children.get(r)||new e(null)).set(La(t),n),o=this.children.insert(r,i);return new e(this.value,o)}},{key:"remove",value:function(t){if(za(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Ma(t),r=this.children.get(n);if(r){var i,o=r.remove(La(t));return i=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(za(e))return this.value;var t=Ma(e),n=this.children.get(t);return n?n.get(La(e)):null}},{key:"setTree",value:function(t,n){if(za(t))return n;var r,i=Ma(t),o=(this.children.get(i)||new e(null)).setTree(La(t),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Na(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Ba(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Na(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(za(e))return null;var i=Ma(e),o=this.children.get(i);return o?o.findOnPath_(La(e),Ba(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Na(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(za(t))return this;this.value&&r(n,this.value);var i=Ma(t),o=this.children.get(i);return o?o.foreachOnPath_(La(t),Ba(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Na(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Ba(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Zo(t,(function(e,t){n=n.set(new Aa(e),t)})),n}}]),e}(),fu=function(){function e(t){l(this,e),this.writeTree_=t}return h(e,null,[{key:"empty",value:function(){return new e(new cu(null))}}]),e}();function du(e,t,n){if(za(t))return new fu(new cu(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=qa(i,t);return o=o.updateChild(a,n),new fu(e.writeTree_.set(i,o))}var s=new cu(n),u=e.writeTree_.setTree(t,s);return new fu(u)}function hu(e,t,n){var r=e;return Zo(n,(function(e,n){r=du(r,Ba(t,e),n)})),r}function pu(e,t){if(za(t))return fu.empty();var n=e.writeTree_.setTree(t,new cu(null));return new fu(n)}function vu(e,t){return null!=mu(e,t)}function mu(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(qa(n.path,t)):null}function gu(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(_s,(function(e,n){t.push(new Za(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Za(e,n.value))})),t}function yu(e,t){if(za(t))return e;var n=mu(e,t);return new fu(null!=n?new cu(n):e.writeTree_.subtree(t))}function _u(e){return e.writeTree_.isEmpty()}function bu(e,t){return wu(Na(),e.writeTree_,t)}function wu(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Nr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=wu(Ba(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Ba(e,".priority"),r)),n}function ku(e,t){return Du(t,e)}function Cu(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Nr(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=e.allWrites.length-1;i&&a>=0;){var s=e.allWrites[a];s.visible&&(a>=n&&Su(s,r.path)?i=!1:Ga(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=Ou(e.allWrites,Eu,Na()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=pu(e.visibleWrites,r.path):Zo(r.children,(function(t){e.visibleWrites=pu(e.visibleWrites,Ba(r.path,t))}));return!0}return!1}function Su(e,t){if(e.snap)return Ga(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Ga(Ba(e.path,n),t))return!0;return!1}function Eu(e){return e.visible}function Ou(e,t,n){for(var r=fu.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)Ga(n,a)?r=du(r,s=qa(n,a),o.snap):Ga(a,n)&&(s=qa(a,n),r=du(r,Na(),o.snap.getChild(s)));else{if(!o.children)throw Mr("WriteRecord should have .snap or .children");if(Ga(n,a))r=hu(r,s=qa(n,a),o.children);else if(Ga(a,n))if(za(s=qa(a,n)))r=hu(r,Na(),o.children);else{var u=oi(o.children,Ma(s));if(u){var l=u.getChild(La(s));r=du(r,Na(),l)}}}}}return r}function xu(e,t,n,r,i){if(r||i){var o=yu(e.visibleWrites,t);if(!i&&_u(o))return n;if(i||null!=n||vu(o,Na())){return bu(Ou(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ga(e.path,t)||Ga(t,e.path))}),t),n||Es.EMPTY_NODE)}return null}var a=mu(e.visibleWrites,t);if(null!=a)return a;var s=yu(e.visibleWrites,t);return _u(s)?n:null!=n||vu(s,Na())?bu(s,n||Es.EMPTY_NODE):null}function Tu(e,t,n,r){return xu(e.writeTree,e.treePath,t,n,r)}function Ru(e,t){return function(e,t,n){var r=Es.EMPTY_NODE,i=mu(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(_s,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=yu(e.visibleWrites,t);return n.forEachChild(_s,(function(e,t){var n=bu(yu(o,new Aa(e)),t);r=r.updateImmediateChild(e,n)})),gu(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return gu(yu(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Iu(e,t,n,r){return function(e,t,n,r,i){Nr(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=Ba(t,n);if(vu(e.visibleWrites,o))return null;var a=yu(e.visibleWrites,o);return _u(a)?i.getChild(n):bu(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Pu(e,t){return function(e,t){return mu(e.visibleWrites,t)}(e.writeTree,Ba(e.treePath,t))}function Au(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,u=yu(e.visibleWrites,t),l=mu(u,Na());if(null!=l)s=l;else{if(null==n)return[];s=bu(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var c=[],f=a.getCompare(),d=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),h=d.getNext();h&&c.length<i;)0!==f(h,r)&&c.push(h),h=d.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,o)}function Nu(e,t,n){return function(e,t,n,r){var i=Ba(t,n),o=mu(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?bu(yu(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Mu(e,t){return Du(Ba(e.treePath,t),e.writeTree)}function Du(e,t){return{treePath:e,writeTree:t}}var Lu=function(){function e(){l(this,e),this.changeMap=new Map}return h(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Nr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Nr(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ds(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ms(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Ns(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Mr("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ds(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),ju=new(function(){function e(){l(this,e)}return h(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Uu=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return h(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new nu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Nu(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lu(this.viewCache_),i=Au(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Fu(e,t,n,r,i){var o,a,s=new Lu;if(n.type===Ks.OVERWRITE){var u=n;u.source.fromUser?o=qu(e,t,u.path,u.snap,r,i,s):(Nr(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered()&&!za(u.path),o=zu(e,t,u.path,u.snap,r,i,a,s))}else if(n.type===Ks.MERGE){var l=n;l.source.fromUser?o=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var l=Ba(n,r);Hu(t,Ma(l))&&(s=qu(e,s,l,u,i,o,a))})),r.foreach((function(r,u){var l=Ba(n,r);Hu(t,Ma(l))||(s=qu(e,s,l,u,i,o,a))})),s}(e,t,l.path,l.children,r,i,s):(Nr(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Gu(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Ks.ACK_USER_WRITE){var c=n;o=c.revert?function(e,t,n,r,i,o){var a;if(null!=Pu(r,n))return t;var s,u=new Uu(r,t,i),l=t.eventCache.getNode();if(za(n)||".priority"===Ma(n)){var c;if(t.serverCache.isFullyInitialized())c=Tu(r,lu(t));else{var f=t.serverCache.getNode();Nr(f instanceof Es,"serverChildren would be complete if leaf node"),c=Ru(r,f)}s=e.filter.updateFullNode(l,c,o)}else{var d=Ma(n),h=Nu(r,d,t.serverCache);null==h&&t.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),(s=null!=h?e.filter.updateChild(l,d,h,La(n),u,o):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(l,d,Es.EMPTY_NODE,La(n),u,o):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Tu(r,lu(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,a,o))}return a=t.serverCache.isFullyInitialized()||null!=Pu(r,Na()),au(t,s,a,e.filter.filtersNodes())}(e,t,c.path,r,i,s):function(e,t,n,r,i,o,a){if(null!=Pu(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(za(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return zu(e,t,n,u.getNode().getChild(n),i,o,s,a);if(za(n)){var l=new cu(null);return u.getNode().forEachChild(ns,(function(e,t){l=l.set(new Aa(e),t)})),Gu(e,t,n,l,i,o,s,a)}return t}var c=new cu(null);return r.foreach((function(e,t){var r=Ba(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),Gu(e,t,n,c,i,o,s,a)}(e,t,c.path,c.affectedTree,r,i,s)}else{if(n.type!==Ks.LISTEN_COMPLETE)throw Mr("Unknown operation type: "+n.type);o=function(e,t,n,r,i){var o=t.serverCache,a=su(t,o.getNode(),o.isFullyInitialized()||za(n),o.isFiltered());return Bu(e,a,n,r,ju,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=uu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(As(uu(t)))}}(t,o,f),{viewCache:o,changes:f}}function Bu(e,t,n,r,i,o){var a,s,u=t.eventCache;if(null!=Pu(r,n))return t;if(za(n))if(Nr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=lu(t),c=Ru(r,l instanceof Es?l:Es.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),c,o)}else{var f=Tu(r,lu(t));a=e.filter.updateFullNode(t.eventCache.getNode(),f,o)}else{var d=Ma(n);if(".priority"===d){Nr(1===Da(n),"Can't have a priority with additional path components");var h=u.getNode(),p=Iu(r,n,h,s=t.serverCache.getNode());a=null!=p?e.filter.updatePriority(h,p):u.getNode()}else{var v,m=La(n);if(u.isCompleteForChild(d)){s=t.serverCache.getNode();var g=Iu(r,n,u.getNode(),s);v=null!=g?u.getNode().getImmediateChild(d).updateChild(m,g):u.getNode().getImmediateChild(d)}else v=Nu(r,d,t.serverCache);a=null!=v?e.filter.updateChild(u.getNode(),d,v,m,i,o):u.getNode()}}return au(t,a,u.isFullyInitialized()||za(n),e.filter.filtersNodes())}function zu(e,t,n,r,i,o,a,s){var u,l=t.serverCache,c=a?e.filter:e.filter.getIndexedFilter();if(za(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var f=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),f,null)}else{var d=Ma(n);if(!l.isCompleteForPath(n)&&Da(n)>1)return t;var h=La(n),p=l.getNode().getImmediateChild(d).updateChild(h,r);u=".priority"===d?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),d,p,h,ju,null)}var v=su(t,u,l.isFullyInitialized()||za(n),c.filtersNodes());return Bu(e,v,n,i,new Uu(i,v,o),s)}function qu(e,t,n,r,i,o,a){var s,u,l=t.eventCache,c=new Uu(i,t,o);if(za(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=au(t,u,!0,e.filter.filtersNodes());else{var f=Ma(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=au(t,u,l.isFullyInitialized(),l.isFiltered());else{var d,h=La(n),p=l.getNode().getImmediateChild(f);if(za(h))d=r;else{var v=c.getCompleteChild(f);d=null!=v?".priority"===ja(h)&&v.getChild(Fa(h)).isEmpty()?v:v.updateChild(h,r):Es.EMPTY_NODE}if(p.equals(d))s=t;else s=au(t,e.filter.updateChild(l.getNode(),f,d,h,c,a),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Hu(e,t){return e.eventCache.isCompleteForChild(t)}function Wu(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Gu(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=za(n)?r:new cu(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=Wu(0,t.serverCache.getNode().getImmediateChild(n),r);l=zu(e,l,new Aa(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!u){var f=Wu(0,t.serverCache.getNode().getImmediateChild(n),r);l=zu(e,l,new Aa(n),f,i,o,a,s)}})),l}var Vu,Ku=function(){function e(t,n){l(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,o=new Ls(i.getIndex()),a=(r=i).loadsAllData()?new Ls(r.getIndex()):r.hasLimit()?new Us(r):new js(r);this.processor_=function(e){return{filter:e}}(a);var s=n.serverCache,u=n.eventCache,c=o.updateFullNode(Es.EMPTY_NODE,s.getNode(),null),f=a.updateFullNode(Es.EMPTY_NODE,u.getNode(),null),d=new nu(c,s.isFullyInitialized(),o.filtersNodes()),h=new nu(f,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=ou(h,d),this.eventGenerator_=new ru(this.query_)}return h(e,[{key:"query",get:function(){return this.query_}}]),e}();function Qu(e,t){var n=lu(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!za(t)&&!n.getImmediateChild(Ma(t)).isEmpty())?n.getChild(t):null}function $u(e){return 0===e.eventRegistrations_.length}function Ju(e,t,n){var r=[];if(n){Nr(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var o=[],a=0;a<e.eventRegistrations_.length;++a){var s=e.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}else o.push(s)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function Yu(e,t,n,r){t.type===Ks.MERGE&&null!==t.source.queryId&&(Nr(lu(e.viewCache_),"We should always have a full cache before handling merges"),Nr(uu(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=e.viewCache_,s=Fu(e.processor_,a,t,n,r);return i=e.processor_,o=s.viewCache,Nr(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Nr(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Nr(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Xu(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Xu(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),iu(e,i,"child_removed",t,r,n),iu(e,i,"child_added",t,r,n),iu(e,i,"child_moved",o,r,n),iu(e,i,"child_changed",t,r,n),iu(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Zu,el=h((function e(){l(this,e),this.views=new Map}));function tl(e,t,n,r){var i=t.source.queryId;if(null!==i){var o=e.views.get(i);return Nr(null!=o,"SyncTree gave us an op for an invalid query."),Yu(o,t,n,r)}var a,s=[],u=E(e.views.values());try{for(u.s();!(a=u.n()).done;){var l=a.value;s=s.concat(Yu(l,t,n,r))}}catch(c){u.e(c)}finally{u.f()}return s}function nl(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=Tu(n,i?r:null),u=!1;s?u=!0:r instanceof Es?(s=Ru(n,r),u=!1):(s=Es.EMPTY_NODE,u=!1);var l=ou(new nu(s,u,!1),new nu(r,i,!1));return new Ku(t,l)}return a}function rl(e,t,n,r,i,o){var a=nl(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(_s,(function(e,t){r.push(Ns(e,t))})),n.isFullyInitialized()&&r.push(As(n.getNode())),Xu(e,r,n.getNode(),t)}(a,n)}function il(e,t,n,r){var i=t._queryIdentifier,o=[],a=[],s=ll(e);if("default"===i){var u,l=E(e.views.entries());try{for(l.s();!(u=l.n()).done;){var c=S(u.value,2),f=c[0],d=c[1];a=a.concat(Ju(d,n,r)),$u(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||o.push(d.query))}}catch(p){l.e(p)}finally{l.f()}}else{var h=e.views.get(i);h&&(a=a.concat(Ju(h,n,r)),$u(h)&&(e.views.delete(i),h.query._queryParams.loadsAllData()||o.push(h.query)))}return s&&!ll(e)&&o.push(new(Nr(Vu,"Reference.ts has not been loaded"),Vu)(t._repo,t._path)),{removed:o,events:a}}function ol(e){var t,n=[],r=E(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}function al(e,t){var n,r=null,i=E(e.views.values());try{for(i.s();!(n=i.n()).done;){var o=n.value;r=r||Qu(o,t)}}catch(a){i.e(a)}finally{i.f()}return r}function sl(e,t){if(t._queryParams.loadsAllData())return cl(e);var n=t._queryIdentifier;return e.views.get(n)}function ul(e,t){return null!=sl(e,t)}function ll(e){return null!=cl(e)}function cl(e){var t,n=E(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var fl=1,dl=h((function e(t){l(this,e),this.listenProvider_=t,this.syncPointTree_=new cu(null),this.pendingWriteTree_={visibleWrites:fu.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function hl(e,t,n,r,i){return function(e,t,n,r,i){Nr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=du(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?wl(e,new eu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function pl(e,t,n,r){!function(e,t,n,r){Nr(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=hu(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=cu.fromObject(n);return wl(e,new tu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function vl(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Cu(e.pendingWriteTree_,t)){var i=new cu(null);return null!=r.snap?i=i.set(Na(),!0):Zo(r.children,(function(e){i=i.set(new Aa(e),!0)})),wl(e,new Xs(r.path,i,n))}return[]}function ml(e,t,n){return wl(e,new eu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function gl(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=t._path,a=e.syncPointTree_.get(o),s=[];if(a&&("default"===t._queryIdentifier||ul(a,t))){var u=il(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));var l=u.removed;if(s=u.events,!i){var c=-1!==l.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(o,(function(e,t){return ll(t)}));if(c&&!f){var d=e.syncPointTree_.subtree(o);if(!d.isEmpty())for(var h=function(e){return e.fold((function(e,t,n){if(t&&ll(t))return[cl(t)];var r=[];return t&&(r=ol(t)),Zo(n,(function(e,t){r=r.concat(t)})),r}))}(d),p=0;p<h.length;++p){var v=h[p],m=v.query,g=Sl(e,v);e.listenProvider_.startListening(Il(m),El(e,m),g.hashFn,g.onComplete)}}if(!f&&l.length>0&&!r)if(c){e.listenProvider_.stopListening(Il(t),null)}else l.forEach((function(t){var n=e.queryToTagMap.get(Ol(t));e.listenProvider_.stopListening(Il(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Ol(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,l)}return s}function yl(e,t,n,r){var i=xl(e,r);if(null!=i){var o=Tl(i),a=o.path,s=o.queryId,u=qa(a,t);return Rl(e,a,new eu(Js(s),u,n))}return[]}function _l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,o=null,a=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=qa(e,i);o=o||al(t,n),a=a||ll(t)}));var s,u=e.syncPointTree_.get(i);(u?(a=a||ll(u),o=o||al(u,Na())):(u=new el,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=o)?s=!0:(s=!1,o=Es.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=al(t,Na());n&&(o=o.updateImmediateChild(e,n))})));var l=ul(u,t);if(!l&&!t._queryParams.loadsAllData()){var c=Ol(t);Nr(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var f=fl++;e.queryToTagMap.set(c,f),e.tagToQueryMap.set(f,c)}var d=rl(u,t,n,ku(e.pendingWriteTree_,i),o,s);if(!l&&!a&&!r){var h=sl(u,t);d=d.concat(function(e,t,n){var r=t._path,i=El(e,t),o=Sl(e,n),a=e.listenProvider_.startListening(Il(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)Nr(!ll(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!za(e)&&t&&ll(t))return[cl(t).query];var r=[];return t&&(r=r.concat(ol(t).map((function(e){return e.query})))),Zo(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<u.length;++l){var c=u[l];e.listenProvider_.stopListening(Il(c),El(e,c))}return a}(e,t,h))}return d}function bl(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=al(n,qa(e,t));if(r)return r}));return xu(r,t,i,n,!0)}function wl(e,t){return kl(t,e.syncPointTree_,null,ku(e.pendingWriteTree_,Na()))}function kl(e,t,n,r){if(za(e.path))return Cl(e,t,n,r);var i=t.get(Na());null==n&&null!=i&&(n=al(i,Na()));var o=[],a=Ma(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=Mu(r,a);o=o.concat(kl(s,u,l,c))}return i&&(o=o.concat(tl(i,e,r,n))),o}function Cl(e,t,n,r){var i=t.get(Na());null==n&&null!=i&&(n=al(i,Na()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=Mu(r,t),u=e.operationForChild(t);u&&(o=o.concat(Cl(u,i,a,s)))})),i&&(o=o.concat(tl(i,e,r,n))),o}function Sl(e,t){var n=t.query,r=El(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Es.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=xl(e,n);if(r){var i=Tl(r),o=i.path,a=i.queryId,s=qa(o,t);return Rl(e,o,new Zs(Js(a),s))}return[]}(e,n._path,r):function(e,t){return wl(e,new Zs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return gl(e,n,null,i)}}}function El(e,t){var n=Ol(t);return e.queryToTagMap.get(n)}function Ol(e){return e._path.toString()+"$"+e._queryIdentifier}function xl(e,t){return e.tagToQueryMap.get(t)}function Tl(e){var t=e.indexOf("$");return Nr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Aa(e.substr(0,t))}}function Rl(e,t,n){var r=e.syncPointTree_.get(t);return Nr(r,"Missing sync point for query tag that we're tracking"),tl(r,n,ku(e.pendingWriteTree_,t),null)}function Il(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Nr(Zu,"Reference.ts has not been loaded"),Zu)(e._repo,e._path):e}var Pl=function(){function e(t){l(this,e),this.node_=t}return h(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Al=function(){function e(t,n){l(this,e),this.syncTree_=t,this.path_=n}return h(e,[{key:"getImmediateChild",value:function(t){var n=Ba(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return bl(this.syncTree_,this.path_)}}]),e}(),Nl=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Ml=function(e,t,n){return e&&"object"===typeof e?(Nr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Dl(e[".sv"],t,n):"object"===typeof e[".sv"]?Ll(e[".sv"],t):void Nr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Dl=function(e,t,n){if("timestamp"===e)return n.timestamp;Nr(!1,"Unexpected server value: "+e)},Ll=function(e,t,n){e.hasOwnProperty("increment")||Nr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Nr(!1,"Unexpected increment value: "+r);var i=t.node();if(Nr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!==typeof o?r:o+r},jl=function(e,t,n,r){return Fl(t,new Al(n,e),r)},Ul=function(e,t,n){return Fl(e,new Pl(t),n)};function Fl(e,t,n){var r,i=e.getPriority().val(),o=Ml(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=Ml(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new vs(s,Ts(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new vs(o))),u.forEachChild(_s,(function(e,i){var o=Fl(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}var Bl=h((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};l(this,e),this.name=t,this.parent=n,this.node=r}));function zl(e,t){for(var n=t instanceof Aa?t:new Aa(t),r=e,i=Ma(n);null!==i;){var o=oi(r.node.children,i)||{children:{},childCount:0};r=new Bl(i,r,o),i=Ma(n=La(n))}return r}function ql(e){return e.node.value}function Hl(e,t){e.node.value=t,Ql(e)}function Wl(e){return e.node.childCount>0}function Gl(e,t){Zo(e.node.children,(function(n,r){t(new Bl(n,e,r))}))}function Vl(e,t,n,r){n&&!r&&t(e),Gl(e,(function(e){Vl(e,t,!0,r)})),n&&r&&t(e)}function Kl(e){return new Aa(null===e.parent?e.name:Kl(e.parent)+"/"+e.name)}function Ql(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===ql(e)&&!Wl(e)}(n),i=ii(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ql(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Ql(e))}(e.parent,e.name,e)}var $l=/[\[\].#$\/\u0000-\u001F\u007F]/,Jl=/[\[\].#$\u0000-\u001F\u007F]/,Yl=10485760,Xl=function(e){return"string"===typeof e&&0!==e.length&&!$l.test(e)},Zl=function(e){return"string"===typeof e&&0!==e.length&&!Jl.test(e)},ec=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Go(e)||e&&"object"===typeof e&&ii(e,".sv")},tc=function(e,t,n,r){r&&void 0===t||nc(fi(e,"value"),t,n)},nc=function e(t,n,r){var i=r instanceof Aa?new Va(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Qa(i));if("function"===typeof n)throw new Error(t+"contains a function "+Qa(i)+" with contents = "+n.toString());if(Go(n))throw new Error(t+"contains "+n.toString()+" "+Qa(i));if("string"===typeof n&&n.length>Yl/3&&di(n)>Yl)throw new Error(t+"contains a string greater than "+Yl+" utf8 bytes "+Qa(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var o=!1,a=!1;if(Zo(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!Xl(n)))throw new Error(t+" contains an invalid key ("+n+") "+Qa(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=di(u),Ka(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=di(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),o&&a)throw new Error(t+' contains ".value" child '+Qa(i)+" in addition to actual children.")}},rc=function(e,t,n,r){if(!r||void 0!==t){var i=fi(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var o=[];Zo(t,(function(e,t){var r=new Aa(e);if(nc(i,t,Ba(n,r)),".priority"===ja(r)&&!ec(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Ua(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Xl(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Ha);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&Ga(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},ic=function(e,t,n,r){if((!r||void 0!==n)&&!Zl(n))throw new Error(fi(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},oc=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ic(e,t,n,r)},ac=function(e,t){if(".info"===Ma(t))throw new Error(e+" failed = Can't modify data under /.info/")},sc=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Xl(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Zl(e)}(n))throw new Error(fi(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},uc=h((function e(){l(this,e),this.eventLists_=[],this.recursionDepth_=0}));function lc(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||Wa(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function cc(e,t,n){lc(e,n),dc(e,(function(e){return Wa(e,t)}))}function fc(e,t,n){lc(e,n),dc(e,(function(e){return Ga(e,t)||Ga(t,e)}))}function dc(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(hc(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function hc(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();jo&&Bo("event: "+n.toString()),ra(r)}}}var pc="repo_interrupt",vc=25,mc=function(){function e(t,n,r,i){l(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ws(),this.transactionQueueTree_=new Bl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return h(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function gc(e,t,n){if(e.stats_=ya(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new qs(e.repoInfo_,(function(t,n,r,i){bc(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return wc(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ni(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ya(e.repoInfo_,t,(function(t,n,r,i){bc(e,t,n,r,i)}),(function(t){wc(e,t)}),(function(t){!function(e,t){Zo(t,(function(t,n){kc(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return ga[n]||(ga[n]=t()),ga[n]}(e.repoInfo_,(function(){return new $s(e.stats_,e.server_)})),e.infoData_=new Hs,e.infoSyncTree_=new dl({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=ml(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),kc(e,"connected",!1),e.serverSyncTree_=new dl({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);fc(e.eventQueue_,t._path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function yc(e){var t=e.infoData_.getNode(new Aa(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _c(e){return Nl({timestamp:yc(e)})}function bc(e,t,n,r,i){e.dataUpdateCount++;var o=new Aa(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var s=si(n,(function(e){return Ts(e)}));a=function(e,t,n,r){var i=xl(e,r);if(i){var o=Tl(i),a=o.path,s=o.queryId,u=qa(a,t),l=cu.fromObject(n);return Rl(e,a,new tu(Js(s),u,l))}return[]}(e.serverSyncTree_,o,s,i)}else{var u=Ts(n);a=yl(e.serverSyncTree_,o,u,i)}else if(r){var l=si(n,(function(e){return Ts(e)}));a=function(e,t,n){var r=cu.fromObject(n);return wl(e,new tu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,l)}else{var c=Ts(n);a=ml(e.serverSyncTree_,o,c)}var f=o;a.length>0&&(f=Pc(e,o)),fc(e.eventQueue_,f,a)}function wc(e,t){kc(e,"connected",t),!1===t&&function(e){xc(e,"onDisconnectEvents");var t=_c(e),n=Ws();Vs(e.onDisconnect_,Na(),(function(r,i){var o=jl(r,i,e.serverSyncTree_,t);Gs(n,r,o)}));var r=[];Vs(n,Na(),(function(t,n){r=r.concat(ml(e.serverSyncTree_,t,n));var i=Lc(e,t);Pc(e,i)})),e.onDisconnect_=Ws(),fc(e.eventQueue_,Na(),r)}(e)}function kc(e,t,n){var r=new Aa("/.info/"+t),i=Ts(n);e.infoData_.updateSnapshot(r,i);var o=ml(e.infoSyncTree_,r,i);fc(e.eventQueue_,r,o)}function Cc(e){return e.nextWriteId_++}function Sc(e,t,n,r,i){xc(e,"set",{path:t.toString(),value:n,priority:r});var o=_c(e),a=Ts(n,r),s=bl(e.serverSyncTree_,t),u=Ul(a,s,o),l=Cc(e),c=hl(e.serverSyncTree_,t,u,l,!0);lc(e.eventQueue_,c),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||Wo("set at "+t+" failed: "+n);var a=vl(e.serverSyncTree_,l,!o);fc(e.eventQueue_,t,a),Tc(e,i,n,r)}));var f=Lc(e,t);Pc(e,f),fc(e.eventQueue_,f,[])}function Ec(e,t,n){var r;r=".info"===Ma(t._path)?gl(e.infoSyncTree_,t,n):gl(e.serverSyncTree_,t,n),cc(e.eventQueue_,t._path,r)}function Oc(e){e.persistentConnection_&&e.persistentConnection_.interrupt(pc)}function xc(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Bo.apply(void 0,[t].concat(r))}function Tc(e,t,n,r){t&&ra((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function Rc(e,t,n){return bl(e.serverSyncTree_,t,n)||Es.EMPTY_NODE}function Ic(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Dc(e,t),ql(t)){var n=Nc(e,t);Nr(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Rc(e,t,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];Nr(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=qa(t,u.path);o=o.updateChild(l,u.currentOutputSnapshotRaw)}var c=o.val(!0),f=t;e.server_.put(f.toString(),c,(function(r){xc(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(vl(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);Dc(e,zl(e.transactionQueueTree_,t)),Ic(e,e.transactionQueueTree_),fc(e.eventQueue_,t,i);for(var u=0;u<o.length;u++)ra(o[u])}else{if("datastale"===r)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{Wo("transaction at "+f.toString()+" failed: "+r);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=r}Pc(e,t)}}),a)}(e,Kl(t),n)}else Wl(t)&&Gl(t,(function(t){Ic(e,t)}))}function Pc(e,t){var n=Ac(e,t),r=Kl(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],o=t.filter((function(e){return 0===e.status})),a=o.map((function(e){return e.currentWriteId})),s=function(o){var s,u,l=t[o],c=qa(n,l.path),f=!1;if(Nr(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)f=!0,s=l.abortReason,i=i.concat(vl(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=vc)f=!0,s="maxretry",i=i.concat(vl(e.serverSyncTree_,l.currentWriteId,!0));else{var d=Rc(e,l.path,a);l.currentInputSnapshot=d;var h=t[o].update(d.val());if(void 0!==h){nc("transaction failed: Data returned ",h,l.path);var p=Ts(h);"object"===typeof h&&null!=h&&ii(h,".priority")||(p=p.updatePriority(d.getPriority()));var v=l.currentWriteId,m=_c(e),g=Ul(p,d,m);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=g,l.currentWriteId=Cc(e),a.splice(a.indexOf(v),1),i=(i=i.concat(hl(e.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally))).concat(vl(e.serverSyncTree_,v,!0))}else f=!0,s="nodata",i=i.concat(vl(e.serverSyncTree_,l.currentWriteId,!0))}fc(e.eventQueue_,n,i),i=[],f&&(t[o].status=2,u=t[o].unwatcher,setTimeout(u,Math.floor(0)),t[o].onComplete&&("nodata"===s?r.push((function(){return t[o].onComplete(null,!1,t[o].currentInputSnapshot)})):r.push((function(){return t[o].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);Dc(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)ra(r[l]);Ic(e,e.transactionQueueTree_)}(e,Nc(e,n),r),r}function Ac(e,t){var n,r=e.transactionQueueTree_;for(n=Ma(t);null!==n&&void 0===ql(r);)r=zl(r,n),n=Ma(t=La(t));return r}function Nc(e,t){var n=[];return Mc(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Mc(e,t,n){var r=ql(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Gl(t,(function(t){Mc(e,t,n)}))}function Dc(e,t){var n=ql(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Hl(t,n.length>0?n:void 0)}Gl(t,(function(t){Dc(e,t)}))}function Lc(e,t){var n=Kl(Ac(e,t)),r=zl(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){jc(e,t)})),jc(e,r),Vl(r,(function(t){jc(e,t)})),n}function jc(e,t){var n=ql(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Nr(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(Nr(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(vl(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Hl(t,void 0):n.length=o+1,fc(e.eventQueue_,Kl(t),i);for(var s=0;s<r.length;s++)ra(r[s])}}var Uc=function(e,t){var n=Fc(e),r=n.namespace;"firebase.com"===n.domain&&Ho(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ho("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Wo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ha(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Aa(n.pathString)}},Fc=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(c,f)),c<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(c,f)));var d=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=E(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var o=i.split("=");2===o.length?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Wo("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(a){r.e(a)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(l=t.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var h=t.slice(0,l);if("localhost"===h.toLowerCase())n="localhost";else if(h.split(".").length<=2)n=h;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},Bc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zc=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){l(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return h(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+ni(this.snapshot.exportVal())}}]),e}()),qc=function(){function e(t,n,r){l(this,e),this.eventRegistration=t,this.error=n,this.path=r}return h(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Hc=function(){function e(t,n){l(this,e),this.snapshotCallback=t,this.cancelCallback=n}return h(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Nr(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Wc=function(){function e(t,n,r,i){l(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return h(e,[{key:"key",get:function(){return za(this._path)?null:ja(this._path)}},{key:"ref",get:function(){return new Gc(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=zs(this._queryParams),t=Yo(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return zs(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=hi(t))instanceof e))return!1;var n=this._repo===t._repo,r=Wa(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var Gc=function(e){v(n,e);var t=_(n);function n(e,r){return l(this,n),t.call(this,e,r,new Fs,!1)}return h(n,[{key:"parent",get:function(){var e=Fa(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Wc),Vc=function(){function e(t,n,r){l(this,e),this._node=t,this.ref=n,this._index=r}return h(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Aa(t),r=Qc(this.ref,t);return new e(this._node.getChild(n),r,_s)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Qc(n.ref,r),_s))}))}},{key:"hasChild",value:function(e){var t=new Aa(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Kc(e,t){return(e=hi(e))._checkNotDeleted("ref"),void 0!==t?Qc(e._root,t):e._root}function Qc(e,t){return null===Ma((e=hi(e))._path)?oc("child","path",t,!1):ic("child","path",t,!1),new Gc(e._repo,Ba(e._path,t))}function $c(e,t){e=hi(e),ac("set",e._path),tc("set",t,e._path,!1);var n=new Kr;return Sc(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Jc(e,t){rc("update",t,e._path,!1);var n=new Kr;return function(e,t,n,r){xc(e,"update",{path:t.toString(),value:n});var i=!0,o=_c(e),a={};if(Zo(n,(function(n,r){i=!1,a[n]=jl(Ba(t,n),Ts(r),e.serverSyncTree_,o)})),i)Bo("update() called with empty data.  Don't do anything."),Tc(0,r,"ok",void 0);else{var s=Cc(e),u=pl(e.serverSyncTree_,t,a,s);lc(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||Wo("update at "+t+" failed: "+n);var a=vl(e.serverSyncTree_,s,!o),u=a.length>0?Pc(e,t):t;fc(e.eventQueue_,u,a),Tc(0,r,n,i)})),Zo(n,(function(n){var r=Lc(e,Ba(t,n));Pc(e,r)})),fc(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}var Yc=function(){function e(t){l(this,e),this.callbackContext=t}return h(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new zc("value",this,new Vc(e.snapshotNode,new Gc(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new qc(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Xc=function(){function e(t,n){l(this,e),this.eventType=t,this.callbackContext=n}return h(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new qc(this,e,t):null}},{key:"createEvent",value:function(e,t){Nr(null!=e.childName,"Child events should have a childName.");var n=Qc(new Gc(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new zc(e.type,this,new Vc(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function Zc(e,t,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){Ec(e._repo,e,l),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Hc(n,o||void 0),l="value"===t?new Yc(u):new Xc(t,u);return function(e,t,n){var r;r=".info"===Ma(t._path)?_l(e.infoSyncTree_,t,n):_l(e.serverSyncTree_,t,n),cc(e.eventQueue_,t._path,r)}(e._repo,e,l),function(){return Ec(e._repo,e,l)}}function ef(e,t,n,r){return Zc(e,"value",t,n,r)}!function(e){Nr(!Vu,"__referenceConstructor has already been defined"),Vu=e}(Gc),function(e){Nr(!Zu,"__referenceConstructor has already been defined"),Zu=e}(Gc);var tf="FIREBASE_DATABASE_EMULATOR_HOST",nf={},rf=!1;function of(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||Ho("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bo("Using default host for project ",e.options.projectId),o="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var a,s=Uc(o,i),u=s.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"/ChaosApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[tf]),l?(a=!0,o="http://".concat(l,"?ns=").concat(u.namespace),u=(s=Uc(o,i)).repoInfo):a=!s.repoInfo.secure;var c=i&&a?new sa(sa.OWNER):new aa(e.name,e.options,t);sc("Invalid Firebase Database URL",s),za(s.path)||Ho("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=nf[t.name];i||(i={},nf[t.name]=i);var o=i[e.toURLString()];o&&Ho("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new mc(e,rf,n,r),i[e.toURLString()]=o,o}(u,e,c,new oa(e.name,n));return new af(f,e)}var af=function(){function e(t,n){l(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return h(e,[{key:"_repo",get:function(){return this._instanceStarted||(gc(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Gc(this._repo,Na())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=nf[t];n&&n[e.key]===e||Ho("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Oc(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Ho("Cannot call "+e+" on a deleted database.")}}]),e}();function sf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=hi(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Ho("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ho('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new sa(sa.OWNER);else if(r.mockUserToken){var a="string"===typeof r.mockUserToken?r.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fr(JSON.stringify({alg:"none",type:"JWT"})),Fr(JSON.stringify(o)),""].join(".")}(r.mockUserToken,e.app.options.projectId);o=new sa(a)}!function(e,t,n,r){e.repoInfo_=new ha("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}Ya.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ya.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){xo("10.1.0"),eo(new pi("database",(function(e,t){var n=t.instanceIdentifier;return of(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ao(So,Eo,e),ao(So,Eo,"esm2017")}();var uf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$i,t=Yi.get(e);if(!t&&e===$i&&Vr())return oo();if(!t)throw ro.create("no-app",{appName:e});return t}(),t=arguments.length>1?arguments[1]:void 0,n=to(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){var r=Gr("database");r&&sf.apply(void 0,[n].concat(u(r)))}return n}(oo({apiKey:"AIzaSyC8jIEEt1wxt4fD5PTEZue1fA34gHIDPRI",authDomain:"chaosapp-69e78.firebaseapp.com",databaseURL:"https://chaosapp-69e78-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"chaosapp-69e78",storageBucket:"chaosapp-69e78.appspot.com",messagingSenderId:"582890466344",appId:"1:582890466344:web:26b853c0fcf5bbe041991d",measurementId:"G-CMB8L6BXT2"})),lf="Button_button__A76z0",cf="Button_static_button__ECilH",ff="Button_input__ozb2X",df="Button_textarea__nWeR9",hf=n(184);var pf=function(e){return!0===e.static?(0,hf.jsx)("button",{className:cf,onClick:e.press,disabled:e.disabled,children:e.name}):(0,hf.jsx)("button",{className:lf,onClick:e.press,disabled:e.disabled,children:e.name})},vf=function(e){var t=e.value,n=e.style,r=e.onChange,i=e.placeholder,o=e.maxLength;return(0,hf.jsx)(hf.Fragment,{children:(0,hf.jsx)("form",{children:(0,hf.jsx)("input",{className:ff,style:n,id:"gamePin",type:"text",onChange:r,placeholder:i,value:t,maxLength:o})})})},mf=function(){var e=S((0,t.useState)(""),2),n=e[0],r=e[1];wt()(Er());var i=S((0,t.useState)(!1),2),o=i[0],a=i[1],s=Kc(uf,"lobby-"+n),u=S((0,t.useState)(!1),2),l=u[0],c=u[1],f=Kc(uf,"lobby-"+n+"/inSession"),d=(0,t.useCallback)((function(){ef(s,(function(e){a(e.exists())})),ef(f,(function(e){c(e.val())}))}),[s,f]);(0,t.useEffect)((function(){4===n.length&&d()}),[n,d]);var h=S((0,t.useState)(""),2),p=h[0],v=h[1];return(0,hf.jsxs)("div",{className:"App",children:[(0,hf.jsx)("div",{className:"title",children:"Chaos"}),(0,hf.jsxs)("div",{className:"container",children:[(0,hf.jsx)(vf,{placeholder:"Game PIN",maxLength:4,onChange:function(e){return r(e.target.value)}}),(0,hf.jsx)(Qe,{to:o&&!l?"/Lobby/link/".concat(n):null,onClick:d,state:{joinPin:n,isHost:!1},children:(0,hf.jsx)(pf,{name:"JOIN",static:!0,disabled:4!==n.length||!/^[0-9\b]+$/.test(n)||!/\S/.test(n),press:function(){v(o?l?"The session you are trying to join has already started!":"":"The session you are trying to join does not exist!"),setTimeout((function(){v("")}),2e3)}})})]}),(0,hf.jsx)("div",{className:"button",children:(0,hf.jsx)(Qe,{to:"/Host",state:{isHost:!0},children:(0,hf.jsx)(pf,{name:"HOST",static:!0})})}),(0,hf.jsx)("div",{children:(0,hf.jsx)("p",{style:{textAlign:"center",color:"red"},children:(0,hf.jsx)("strong",{children:p})})})]})},gf=n(484),yf=null,_f=function(e){v(n,e);var t=_(n);function n(e){return l(this,n),"string"===typeof e&&(e={key:e}),e.agents={"react-hooks":"2.1.1"},t.call(this,e)}return h(n)}(gf.Realtime.Promise);function bf(){if(!yf)throw new Error('Ably not configured - please call configureAbly({ key: "your-api-key", clientId: "someid" });');return yf}var wf=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function kf(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a="string"===typeof e?bf():e.realtime||bf(),s="string"===typeof e?e:e.channelName,u="string"===typeof e?a.channels.get(s):a.channels.get(s,e.options);return(0,t.useEffect)((function(){return wf(n,void 0,void 0,xr().mark((function e(){return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.subscribe.apply(u,i);case 2:case"end":return e.stop()}}),e)}))),function(){wf(n,void 0,void 0,xr().mark((function e(){var t=this;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.unsubscribe.apply(u,i);case 2:setTimeout((function(){return wf(t,void 0,void 0,xr().mark((function e(){return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==u.listeners.length){e.next=3;break}return e.next=3,u.detach();case 3:case"end":return e.stop()}}),e)})))}),2500);case 3:case"end":return e.stop()}}),e)})))}}),[s]),[u,a]}var Cf=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Sf(e,n,r){var i=this,o="string"===typeof e?bf():e.realtime||bf(),a="string"===typeof e?e:e.channelName,s="string"===typeof e?o.channels.get(a):o.channels.get(a,e.options),u=S((0,t.useState)([]),2),l=u[0],c=u[1],f=function(e){return Cf(i,void 0,void 0,xr().mark((function t(){var n;return xr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.presence.get();case 2:n=t.sent,c(n),null===r||void 0===r||r.call(this,e);case 5:case"end":return t.stop()}}),t,this)})))};(0,t.useEffect)((function(){return Cf(i,void 0,void 0,xr().mark((function e(){var t;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.presence.subscribe("enter",f),s.presence.subscribe("leave",f),s.presence.subscribe("update",f),e.next=5,s.presence.enter(n);case 5:return e.next=7,s.presence.get();case 7:t=e.sent,c(t);case 9:case"end":return e.stop()}}),e)}))),function(){"attached"==s.state&&s.presence.leave(),s.presence.unsubscribe("enter"),s.presence.unsubscribe("leave"),s.presence.unsubscribe("update")}}),[]);var d=(0,t.useCallback)((function(e){s.presence.update(e)}),[s]);return[l,d]}var Ef,Of,xf="SlideSettings_settings_icon__IxQG9",Tf="SlideSettings_close_icon__iZT42",Rf="SlideSettings_input__8I8s0",If="SlideSettings_label__Mri89",Pf="SlideSettings_slide__8HkeJ",Af="SlideSettings_content__T0lLI",Nf="SlideSettings_top__-CUk5",Mf="SlideSettings_title__XH3y5",Df="SlideSettings_settings__FCw+x",Lf="SlideSettings_heading__E-BZX",jf="SlideSettings_divider__42Xuk",Uf="SlideSettings_buttons__9dJja",Ff="SlideSettings_spacer__dxqmr",Bf="SlideSettings_setter__AZpks",zf="SlideSettings_increase_button__balaR",qf="SlideSettings_decrease_button__wrB8d",Hf="SlideSettings_back_icon__wq0Og",Wf=["title","titleId"];function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gf.apply(this,arguments)}function Vf(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kf(e,n){var r=e.title,i=e.titleId,o=Vf(e,Wf);return t.createElement("svg",Gf({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:500,height:500,viewBox:"0 0 500 500",xmlSpace:"preserve",ref:n,"aria-labelledby":i},o),r?t.createElement("title",{id:i},r):null,Ef||(Ef=t.createElement("desc",null,"Created with Fabric.js 5.3.0")),Of||(Of=t.createElement("defs",null)),t.createElement("g",{transform:"matrix(4.5581565912 0 0 4.5581565912 247.2820334045 247.281902638)",id:"ReaTWQ969JlNmLd4Qy6O6"},t.createElement("path",{style:{stroke:"rgb(117,167,143)",strokeWidth:6,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"none",fillRule:"nonzero",opacity:1},transform:" translate(0, 0)",d:"M -37.7545 7.549 L -26.441499999999998 7.549 C -25.6025 7.549 -24.8495 8.073 -24.569499999999998 8.854000000000001 C -24.293499999999998 9.619000000000002 -23.979499999999998 10.378 -23.6345 11.110000000000001 C -23.281499999999998 11.861 -23.4425 12.765 -24.0355 13.358 L -32.0355 21.358 C -32.4595 21.782 -32.6935 22.346 -32.6935 22.946 C -32.6935 23.546000000000003 -32.4595 24.110000000000003 -32.0355 24.534000000000002 L -24.534499999999998 32.035000000000004 C -24.1105 32.459 -23.546499999999998 32.693000000000005 -22.946499999999997 32.693000000000005 C -22.346499999999995 32.693000000000005 -21.782499999999995 32.459 -21.358499999999996 32.035000000000004 L -13.358499999999996 24.035000000000004 C -12.778499999999996 23.455000000000005 -11.848499999999996 23.287000000000003 -11.110499999999995 23.634000000000004 C -10.377499999999994 23.979000000000003 -9.617499999999994 24.294000000000004 -8.854499999999994 24.568000000000005 C -8.074499999999995 24.849000000000004 -7.549499999999995 25.602000000000004 -7.549499999999995 26.441000000000006 L -7.549499999999995 37.754000000000005 C -7.549499999999995 38.992000000000004 -6.542499999999995 40.00000000000001 -5.304499999999995 40.00000000000001 L 5.303500000000006 40.00000000000001 C 6.541500000000006 40.00000000000001 7.549500000000005 38.99300000000001 7.549500000000005 37.754000000000005 L 7.549500000000005 26.441000000000003 C 7.549500000000005 25.602000000000004 8.073500000000006 24.849000000000004 8.853500000000006 24.568 C 9.617500000000005 24.293000000000003 10.376500000000005 23.979000000000003 11.110500000000005 23.634 C 11.847500000000005 23.287 12.778500000000005 23.455000000000002 13.358500000000006 24.035 L 21.358500000000006 32.035 C 21.782500000000006 32.458999999999996 22.346500000000006 32.693 22.946500000000007 32.693 C 23.54650000000001 32.693 24.11050000000001 32.458999999999996 24.53450000000001 32.035 L 32.035500000000006 24.533999999999995 C 32.459500000000006 24.109999999999996 32.69350000000001 23.545999999999996 32.69350000000001 22.945999999999994 C 32.69350000000001 22.345999999999993 32.46050000000001 21.781999999999993 32.035500000000006 21.357999999999993 L 24.035500000000006 13.357999999999993 C 23.442500000000006 12.764999999999993 23.281500000000005 11.860999999999994 23.634500000000006 11.109999999999992 C 23.978500000000007 10.377999999999993 24.293500000000005 9.618999999999993 24.568500000000007 8.853999999999992 C 24.849500000000006 8.073999999999993 25.602500000000006 7.548999999999992 26.44150000000001 7.548999999999992 L 37.75450000000001 7.548999999999992 C 38.99250000000001 7.548999999999992 40.00050000000001 6.541999999999993 40.00050000000001 5.302999999999992 L 40.00050000000001 -5.304000000000007 C 40.00050000000001 -6.542000000000007 38.99350000000001 -7.550000000000008 37.75450000000001 -7.550000000000008 L 26.440500000000007 -7.550000000000008 C 25.60150000000001 -7.550000000000008 24.84850000000001 -8.074000000000009 24.568500000000007 -8.855000000000008 C 24.292500000000008 -9.620000000000008 23.978500000000007 -10.379000000000008 23.63350000000001 -11.111000000000008 C 23.280500000000007 -11.862000000000007 23.44150000000001 -12.766000000000007 24.03450000000001 -13.359000000000009 L 32.03450000000001 -21.35900000000001 C 32.45850000000001 -21.78300000000001 32.69250000000001 -22.34700000000001 32.69250000000001 -22.94700000000001 C 32.69250000000001 -23.54700000000001 32.45850000000001 -24.11100000000001 32.03450000000001 -24.53500000000001 L 24.533500000000007 -32.03600000000001 C 24.109500000000008 -32.46000000000001 23.545500000000008 -32.69400000000001 22.945500000000006 -32.69400000000001 C 22.345500000000005 -32.69400000000001 21.781500000000005 -32.46000000000001 21.357500000000005 -32.03600000000001 L 13.357500000000005 -24.03600000000001 C 12.777500000000005 -23.45600000000001 11.847500000000005 -23.288000000000007 11.109500000000004 -23.63500000000001 C 10.376500000000004 -23.980000000000008 9.616500000000004 -24.29500000000001 8.853500000000004 -24.56900000000001 C 8.073500000000005 -24.85000000000001 7.548500000000004 -25.60300000000001 7.548500000000004 -26.44200000000001 L 7.548500000000004 -37.75400000000001 C 7.548500000000004 -38.99300000000001 6.5415000000000045 -40.000000000000014 5.303500000000004 -40.000000000000014 L -5.304499999999996 -40.000000000000014 C -6.542499999999997 -40.000000000000014 -7.550499999999996 -38.993000000000016 -7.550499999999996 -37.75400000000001 L -7.550499999999996 -26.44100000000001 C -7.550499999999996 -25.60200000000001 -8.074499999999997 -24.84900000000001 -8.854499999999996 -24.56800000000001 C -9.618499999999996 -24.29300000000001 -10.377499999999996 -23.97900000000001 -11.111499999999996 -23.634000000000007 C -11.848499999999996 -23.287000000000006 -12.779499999999995 -23.45500000000001 -13.359499999999997 -24.035000000000007 L -21.359499999999997 -32.03500000000001 C -21.783499999999997 -32.45900000000001 -22.347499999999997 -32.69300000000001 -22.947499999999998 -32.69300000000001 C -23.5475 -32.69300000000001 -24.1115 -32.45900000000001 -24.5355 -32.03500000000001 L -32.0365 -24.53400000000001 C -32.460499999999996 -24.11000000000001 -32.6945 -23.54600000000001 -32.6945 -22.94600000000001 C -32.6945 -22.346000000000007 -32.4615 -21.782000000000007 -32.0365 -21.358000000000008 L -24.036499999999997 -13.358000000000008 C -23.443499999999997 -12.765000000000008 -23.282499999999995 -11.861000000000008 -23.635499999999997 -11.110000000000007 C -23.979499999999998 -10.378000000000007 -24.294499999999996 -9.619000000000007 -24.569499999999998 -8.854000000000006 C -24.850499999999997 -8.074000000000007 -25.603499999999997 -7.549000000000007 -26.4425 -7.549000000000007 L -37.7545 -7.549000000000007 C -38.9935 -7.549000000000007 -40.0005 -6.542000000000007 -40.0005 -5.3040000000000065 L -40.0005 5.303999999999994 C -40.0005 6.5419999999999945 -38.993500000000004 7.548999999999994 -37.7545 7.548999999999994 z M -0.0005 -12.283 C 6.7835 -12.283 12.282499999999999 -6.784 12.282499999999999 0 C 12.282499999999999 6.784 6.783499999999999 12.283 -0.0005000000000006111 12.283 C -6.7845 12.283 -12.2835 6.784 -12.2835 0 C -12.2835 -6.784 -6.7845 -12.283 -0.0005000000000006111 -12.283 z",strokeLinecap:"round"})))}var Qf,$f,Jf=t.forwardRef(Kf),Yf=(n.p,["title","titleId"]);function Xf(){return Xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xf.apply(this,arguments)}function Zf(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ed(e,n){var r=e.title,i=e.titleId,o=Zf(e,Yf);return t.createElement("svg",Xf({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:500,height:500,viewBox:"0 0 500 500",xmlSpace:"preserve",ref:n,"aria-labelledby":i},o),r?t.createElement("title",{id:i},r):null,Qf||(Qf=t.createElement("desc",null,"Created with Fabric.js 5.3.0")),$f||($f=t.createElement("defs",null)),t.createElement("g",{transform:"matrix(1 0 0 1 251.2100265198 249.1516178204)",id:"Js0OpQstZxJ6y8cuDEFOQ"},t.createElement("path",{style:{stroke:"rgb(181,181,181)",strokeWidth:4,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(181,181,181)",fillRule:"nonzero",opacity:1},transform:" translate(-129.44968, -129.403775)",d:"M 33.13079 0 C 44.08631 0 53.80535999999999 5.32641 59.83784 13.52917 L 129.20349 82.89482000000001 L 202.18642 9.911890000000014 L 202.26655 9.992020000000014 C 208.26934 3.949050000000014 216.58449 0.2058600000000137 225.76859 0.2058600000000137 C 244.05678 0.2058600000000137 258.89938 15.048450000000013 258.89938 33.33665000000001 C 258.89938 43.32717000000001 254.46998000000002 52.28944000000001 247.46917000000002 58.36548000000001 L 176.07165000000003 129.763 L 248.27690000000004 201.96825 L 248.25656000000004 201.98859000000002 C 254.53404000000003 207.94952 258.45000000000005 216.37395 258.45000000000005 225.70744000000002 C 258.45000000000005 243.76209000000003 243.79695000000004 258.41515000000004 225.74229000000005 258.41515000000004 C 216.40880000000004 258.41515000000004 207.98437000000007 254.49919000000003 202.02344000000005 248.22171000000003 L 201.79375000000005 248.45140000000004 L 129.58850000000004 176.24615000000003 L 58.958640000000045 246.87601 C 52.87972000000005 254.16602 43.730260000000044 258.80756 33.503300000000046 258.80756 C 15.215110000000045 258.80756 0.3725100000000481 243.96497000000002 0.3725100000000481 225.67677000000003 C 0.3725100000000481 215.88456000000002 4.627810000000048 207.08018000000004 11.388870000000049 201.01316000000003 L 11.237000000000048 200.86129000000003 L 82.72032000000006 129.37797 L 11.913080000000065 58.57073000000001 C 4.633680000000065 52.49177000000001 -0.000019999999935294 43.34912000000001 -0.000019999999935294 33.130780000000016 C -0.000019999999935294 14.842590000000015 14.842570000000064 -0.000009999999981857854 33.13077000000006 -0.000009999999981857854 z",strokeLinecap:"round"})))}var td=t.forwardRef(ed);n.p;var nd,rd,id=function(e){var n=wt(),r=null,i=S((0,t.useState)(e.reset),2),o=i[0],a=i[1],s=S((0,t.useState)(0),2),u=s[0],l=s[1],c=dt((function(e){return e.session.gamePin})),f=S((0,t.useState)(2),2),d=f[0],h=f[1],p=S((0,t.useState)(60),2),v=p[0],m=p[1],g=S((0,t.useState)(120),2),y=g[0],_=g[1],b=Kc(uf,"lobby-"+c+"/responseTime"),w=Kc(uf,"lobby-"+c+"/discussionTime"),k=Kc(uf,"lobby-"+c+"/numRounds");function C(e){var t=Math.floor(e/60),n=e%60,r=String(t).padStart(2,"0"),i=String(n).padStart(2,"0");return"".concat(r,":").concat(i)}(0,t.useEffect)((function(){ef(b,(function(e){var t=e.val();null!==t&&m(t)})),ef(w,(function(e){var t=e.val();null!==t&&_(t)})),ef(k,(function(e){var t=e.val();null!==t&&h(t)}))}),[b,w,k]),(0,t.useEffect)((function(){"rounds"===e.id?a(d):"response"===e.id?a(C(v)):"discussion"===e.id&&a(C(y))}),[a,v,d,y,e.id]);var E=e.orientation;"portrait"===E?r={height:"13vw",maxHeight:"10vh",fontSize:"min(5.5vw, 4.5vh)",width:"min(28vw, 23vh)"}:"landscape"===E&&(r={width:"7vw",height:"3.5vw",fontSize:"1.5vw"});var O=function(e,t){var n=S(e.split(":").map(Number),2),r=n[0],i=n[1],o=(i+t)%60,a=r+Math.floor((i+t)/60);if(60*a+o<=600)return l(60*a+o),"".concat(String(a).padStart(2,"0"),":").concat(String(o).padStart(2,"0"))},x=function(e,t){var n=S(e.split(":").map(Number),2),r=60*n[0]+n[1]-t,i=Math.floor(r/60),o=r%60;if(60*i+o>=60)return l(60*i+o),"".concat(String(i).padStart(2,"0"),":").concat(String(o).padStart(2,"0"))};return(0,t.useEffect)((function(){e.savePressed&&("rounds"===e.id?0===o?Jc(Kc(uf,"lobby-"+c),{numRounds:2}):(Jc(Kc(uf,"lobby-"+c),{numRounds:o}),n(Cr(o))):"response"===e.id?Jc(Kc(uf,"lobby-"+c),0===u?{responseTime:60}:{responseTime:u}):"discussion"===e.id&&Jc(Kc(uf,"lobby-"+c),0===u?{discussionTime:120}:{discussionTime:u}))}),[e.savePressed]),(0,hf.jsxs)("div",{className:Bf,children:[(0,hf.jsx)("button",{name:"-",className:qf,onClick:function(){return function(){if("rounds"===e.id)o>1&&a(o-1);else{var t=x(o,30);t>="01:00"&&a(t)}}()},children:"- "}),(0,hf.jsx)(vf,{style:r,placeholder:o,maxLength:5,readOnly:!0}),(0,hf.jsx)("button",{className:zf,onClick:function(){return function(){if("rounds"===e.id)o<8&&a(o+1);else{var t=O(o,30);t<="10:00"&&a(t)}}()},children:"+"})]})},od=function(e){var n=wt(),r=dt((function(e){return e.session.settingsOpen})),i=S((0,t.useState)(!1),2),o=i[0],a=i[1],s=S((0,t.useState)(!1),2),u=s[0],l=s[1];(0,t.useEffect)((function(){l(r)}),[r]);return(0,hf.jsxs)(hf.Fragment,{children:[(0,hf.jsx)("input",{type:"checkbox",id:"navcheck-h",role:"button",className:Rf,checked:u,readOnly:!0}),(0,hf.jsx)("div",{className:If}),(0,hf.jsx)(Jf,{className:xf,onClick:function(e){n(kr(!0))}}),(0,hf.jsx)("div",{className:Pf,children:(0,hf.jsxs)("div",{className:Af,children:[(0,hf.jsxs)("div",{className:Nf,children:[(0,hf.jsx)(td,{className:Tf,onClick:function(e){n(kr(!1))}}),(0,hf.jsx)("div",{className:Mf,children:"SETTINGS"})]}),(0,hf.jsxs)("div",{className:Df,children:[(0,hf.jsx)("div",{className:Lf,children:"Number of Rounds"}),(0,hf.jsx)(id,{id:"rounds",orientation:"landscape",savePressed:o}),(0,hf.jsx)("div",{className:jf}),(0,hf.jsx)("div",{className:Lf,children:"Response Timer (+30 sec)"}),(0,hf.jsx)(id,{id:"response",orientation:"landscape",savePressed:o}),(0,hf.jsx)("div",{className:jf}),(0,hf.jsx)("div",{className:Lf,children:"Discussion Timer (+30 sec)"}),(0,hf.jsx)(id,{id:"discussion",orientation:"landscape",savePressed:o}),(0,hf.jsxs)("div",{className:Uf,children:[(0,hf.jsx)(pf,{name:"RESET",static:!1,children:" "}),(0,hf.jsx)("div",{className:Ff}),(0,hf.jsx)(pf,{name:o?"\u2713":"SAVE",static:!1,press:function(){a(!0),setTimeout((function(){a(!1)}),500)}})]})]})]})})]})},ad=["title","titleId"];function sd(){return sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sd.apply(this,arguments)}function ud(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ld(e,n){var r=e.title,i=e.titleId,o=ud(e,ad);return t.createElement("svg",sd({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:500,height:500,viewBox:"0 0 500 500",xmlSpace:"preserve",ref:n,"aria-labelledby":i},o),r?t.createElement("title",{id:i},r):null,nd||(nd=t.createElement("desc",null,"Created with Fabric.js 5.3.0")),rd||(rd=t.createElement("defs",null)),t.createElement("g",{transform:"matrix(1 0 0 1 476.5625058607 258.9108560091)",id:"xSifNGWAdFQocwm0jAzj6"},t.createElement("path",{style:{stroke:"rgb(181,104,173)",strokeWidth:0,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(181,181,181)",fillRule:"nonzero",opacity:1},transform:" translate(-23.1481422874, -23.1481422874)",d:"M 23.14815 0 C 35.92593 0 46.2963 10.37037 46.2963 23.14815 C 46.2963 35.92593 35.92593 46.2963 23.14815 46.2963 C 10.370370000000001 46.2963 0 35.92593 0 23.14815 C 0 10.370370000000001 10.37037 0 23.14815 0 z",strokeLinecap:"round"})),t.createElement("g",{transform:"matrix(1 0 0 1 221.1086067568 107.9290086648)",id:"R8JEVIuulqY1g9eJGmI4T"},t.createElement("path",{style:{stroke:"rgb(181,104,173)",strokeWidth:0,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(181,181,181)",fillRule:"nonzero",opacity:1},transform:" translate(-23.14815, -23.14815)",d:"M 23.14815 0 C 35.92593 0 46.2963 10.37037 46.2963 23.14815 C 46.2963 35.92593 35.92593 46.2963 23.14815 46.2963 C 10.370370000000001 46.2963 0 35.92593 0 23.14815 C 0 10.370370000000001 10.37037 0 23.14815 0 z",strokeLinecap:"round"})),t.createElement("g",{transform:"matrix(1 0 0 1 221.1086067568 409.2170276777)",id:"u2OEEEgFVAD74OjtJGuid"},t.createElement("path",{style:{stroke:"rgb(181,104,173)",strokeWidth:0,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(181,181,181)",fillRule:"nonzero",opacity:1},transform:" translate(-23.14815, -23.14815)",d:"M 23.14815 0 C 35.92593 0 46.2963 10.37037 46.2963 23.14815 C 46.2963 35.92593 35.92593 46.2963 23.14815 46.2963 C 10.370370000000001 46.2963 0 35.92593 0 23.14815 C 0 10.370370000000001 10.37037 0 23.14815 0 z",strokeLinecap:"round"})),t.createElement("g",{transform:"matrix(0 -0.3128325362 2.8678845538 0 263.2967921965 258.7956999216)",id:"KA5hIum9aPCDzAA5BNH-0"},t.createElement("path",{style:{stroke:"rgb(54,151,245)",strokeWidth:0,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(181,181,181)",fillRule:"nonzero",opacity:1},transform:" translate(0, 0)",d:"M -74.36342 -74.36342 L 74.36343000000001 -74.36342 L 74.36343000000001 74.36343000000001 L -74.36342 74.36343000000001 z",strokeLinecap:"round"})),t.createElement("g",{transform:"matrix(0.2605629813 0.310526869 -1.6521438318 1.3863132799 127.652410292 186.9728810944)",id:"4KAQjCe35NTGAb742SsUx"},t.createElement("path",{style:{stroke:"rgb(166,197,230)",strokeWidth:0,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(181,181,181)",fillRule:"nonzero",opacity:1},transform:" translate(0, 0)",d:"M -57.26744 -57.26744 L 57.26744 -57.26744 L 57.26744 57.26744 L -57.26744 57.26744 z",strokeLinecap:"round"})),t.createElement("g",{transform:"matrix(-0.2605629812 0.310526869 -1.6614785724 -1.3941460574 128.1362067192 331.0580612267)",id:"3BPMHAxV_WEXD6D4uS7zn"},t.createElement("path",{style:{stroke:"rgb(166,197,230)",strokeWidth:0,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(181,181,181)",fillRule:"nonzero",opacity:1},transform:" translate(0, 0)",d:"M -57.26744 -57.26744 L 57.26744 -57.26744 L 57.26744 57.26744 L -57.26744 57.26744 z",strokeLinecap:"round"})),t.createElement("g",{transform:"matrix(1 0 0 1 60.8951688957 213.5416666667)",id:"5H_sJD0NcKZIZZFlyRYmN"},t.createElement("path",{style:{stroke:"rgb(0,0,0)",strokeWidth:0,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(181,181,181)",fillRule:"nonzero",opacity:1},transform:" translate(0, 0)",d:"M 0 0",strokeLinecap:"round"})),t.createElement("g",{transform:"matrix(0.514287809 0 0 0.5602939199 25.7239406366 258.7798220472)",id:"gcfhuMi_Nfx2lCX2KATLl"},t.createElement("path",{style:{stroke:"rgb(181,104,173)",strokeWidth:0,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(181,181,181)",fillRule:"nonzero",opacity:1},transform:" translate(0, 0)",d:"M 0 -23.14815 C 12.77778 -23.14815 23.14815 -12.777780000000002 23.14815 0 C 23.14815 12.77778 12.777780000000002 23.14815 0 23.14815 C -12.77778 23.14815 -23.14815 12.777780000000002 -23.14815 0 C -23.14815 -12.77778 -12.777780000000002 -23.14815 0 -23.14815 z",strokeLinecap:"round"})))}var cd=t.forwardRef(ld);n.p;var fd=function(e){var t=_e();return"settings"===e.icon?(0,hf.jsx)(Jf,{className:xf,onClick:function(e){t("/SettingsPage")}}):"back"===e.icon?(0,hf.jsx)(cd,{className:Hf,onClick:function(e){t("/Lobby")}}):void 0},dd="LobbyPage_page__Yki1c",hd="LobbyPage_header__4Ebn2",pd="LobbyPage_subtitle__9Q2tp",vd="LobbyPage_pin__2LaD3",md="LobbyPage_label__1hGzn",gd="LobbyPage_number__3rEml",yd="LobbyPage_lobby__KvDiu",_d="LobbyPage_container__rPz6u",bd="LobbyPage_players__yv-yo",wd="LobbyPage_buttons__ICbxu",kd="LobbyPage_spacer__rChN6",Cd=function(){var e,n=_e(),r=wt(),i=dt((function(e){return e.session.settingsOpen})),o=dt((function(e){return e.session.gamePin})),a=dt((function(e){return e.session.playerId})),s=dt((function(e){return e.session.nickname})),u=dt((function(e){return e.session.isHost}));e={key:"yqb0VQ.Av_Gmg:pItSDLVHuUqgEGYCqdOhVSr4Ypktm7764_a0mhpwbEY",clientId:a},yf||(yf=new _f(e));var l=""+o,c=S(Sf(l,{nickname:s}),1)[0],f=S(kf(l,(function(e){"true"===e.data.text&&(n("/Bridge"),r(wr("start")))})),1)[0];(0,t.useEffect)((function(){u&&Jc(Kc(uf,"lobby-"+o),{gamePin:o,inSession:!1})}),[u,o]);var d=S((0,t.useState)(2),2),h=d[0],p=d[1],v=S((0,t.useState)(60),2),m=v[0],g=v[1],y=S((0,t.useState)(120),2),_=y[0],b=y[1],w=Kc(uf,"lobby-"+o+"/responseTime"),k=Kc(uf,"lobby-"+o+"/discussionTime"),C=Kc(uf,"lobby-"+o+"/numRounds");(0,t.useEffect)((function(){ef(w,(function(e){var t=e.val();null!==t&&g(t)})),ef(k,(function(e){var t=e.val();null!==t&&b(t)})),ef(C,(function(e){var t=e.val();null!==t&&p(t)}))}),[w,k,C]);var E=S((0,t.useState)(!1),2),O=E[0],x=E[1],T=S((0,t.useState)(window.innerHeight<window.innerWidth),2),R=T[0],I=T[1];(0,t.useEffect)((function(){var e=function(){I(window.innerHeight<window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var P=(0,hf.jsxs)(hf.Fragment,{children:[(0,hf.jsx)(pf,{name:"PLAY",static:!0,press:function(){Jc(Kc(uf,"lobby-"+o),{gamePin:o,inSession:!0,responseTime:m,discussionTime:_,numRounds:h});for(var e=0;e<c.length;e++)r(Sr(c[e].clientId));f.publish("Start",{text:"true"})}}),(0,hf.jsx)("div",{className:kd})]}),A=(0,hf.jsx)(pf,{name:O?"\u2713":"INVITE",static:!0,press:function(){navigator.clipboard.writeText(window.location.href+"/link/".concat(o)),x(!0),setTimeout((function(){x(!1)}),2e3)}});return(0,hf.jsxs)(hf.Fragment,{children:[u?R?(0,hf.jsx)(od,{}):i?n("/SettingsPage"):(0,hf.jsx)(fd,{icon:"settings"}):null,(0,hf.jsxs)("div",{className:dd,children:[(0,hf.jsx)("div",{className:hd,children:(0,hf.jsx)("div",{className:pd,children:"Chaos"})}),(0,hf.jsxs)("div",{className:vd,children:[(0,hf.jsxs)("span",{className:md,children:["GAME PIN: ",(0,hf.jsx)("br",{})]}),(0,hf.jsxs)("span",{className:gd,children:["\xa0",l]})]}),(0,hf.jsxs)("div",{className:yd,children:[(0,hf.jsxs)("div",{className:wd,children:[u?P:null,A]}),(0,hf.jsx)("div",{className:_d,children:(0,hf.jsx)("div",{className:bd,children:c.map((function(e,t){return(0,hf.jsx)("div",{children:e.data.nickname},e.clientId)}))})})]})]})]})},Sd="SettingsPage_content__Rf0QK",Ed="SettingsPage_title__e59Tx",Od="SettingsPage_settings__jVldV",xd="SettingsPage_divider__MNESs",Td="SettingsPage_heading__mVZ8S",Rd="SettingsPage_buttons__Jgipq";var Id=function(){var e=_e(),n=wt(),r=S((0,t.useState)(!1),2),i=r[0],o=r[1],a=S((0,t.useState)(window.innerHeight<window.innerWidth),2),s=a[0],u=a[1];return(0,t.useEffect)((function(){var e=function(){u(window.innerHeight<window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,t.useEffect)((function(){s&&(n(kr(!0)),e("/Lobby"))}),[s,n,e]),(0,hf.jsxs)("div",{children:[(0,hf.jsx)(fd,{icon:"back",onClick:n(kr(!1))}),(0,hf.jsxs)("div",{className:Sd,children:[(0,hf.jsx)("div",{className:Ed,children:"SETTINGS"}),(0,hf.jsxs)("div",{className:Od,children:[(0,hf.jsxs)("div",{children:[(0,hf.jsx)("div",{className:Td,children:"Number of Rounds"}),(0,hf.jsx)(id,{id:"rounds",orientation:"portrait",savePressed:i})]}),(0,hf.jsx)("div",{className:xd}),(0,hf.jsxs)("div",{children:[(0,hf.jsx)("div",{className:Td,children:"Response Timer (+30 sec)"}),(0,hf.jsx)(id,{id:"response",orientation:"portrait",savePressed:i})]}),(0,hf.jsx)("div",{className:xd}),(0,hf.jsxs)("div",{children:[(0,hf.jsx)("div",{className:Td,children:"Discussion Timer (+30 sec)"}),(0,hf.jsx)(id,{id:"discussion",orientation:"portrait",savePressed:i})]})]}),(0,hf.jsxs)("div",{className:Rd,children:[(0,hf.jsx)("div",{className:"spacer"}),(0,hf.jsx)(pf,{name:"RESET",static:!1,press:function(){},children:" "}),(0,hf.jsx)("div",{className:"spacer"}),(0,hf.jsx)(pf,{name:"SAVE",static:!1,press:function(){o(!0),setTimeout((function(){o(!1)}),500),n(kr(!1))}})]})]})]})},Pd=function(){function e(){l(this,e),this.playerId=this.uuidv4(),this.nickname=""}return h(e,[{key:"makeNickname",value:function(e){this.nickname=e}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}}]),e}();var Ad=function(){var e,n=wt(),r=_e(),i=null===(e=ge().state)||void 0===e?void 0:e.isHost,o=be(),a=null===o||void 0===o?void 0:o.pinNumber;n(i?br(!0):Er()),i||4===a.length&&/^[0-9\b]+$/.test(a)||(window.location.href="#/404");var s=S((0,t.useState)(""),2),u=s[0],l=s[1],c=new Pd,f=(0,t.useRef)({value:i?Math.floor(8999*Math.random()+1e3):a}).current.value;return n(gr(f)),(0,t.useEffect)((function(){var e;i||(ef(Kc(uf,"lobby-"+f),(function(e){e.exists()||r("/Error/invalid-pin")})),ef(Kc(uf,"lobby-"+f+"/inSession"),(function(t){e=t.val()})),e&&r("/Error/session-started"))}),[i,f,r]),(0,hf.jsxs)("div",{className:"App",children:[(0,hf.jsx)("div",{className:"title",children:"Chaos"}),(0,hf.jsx)("div",{className:"heading",children:"GET STARTED"}),(0,hf.jsxs)("div",{className:"container",children:[(0,hf.jsx)(vf,{placeholder:"Enter Nickname",onChange:function(e){return l(e.target.value)}}),(0,hf.jsx)(Qe,{to:"/Lobby",state:{identity:c,gamePin:f,isHost:i,settingsOpen:!1},children:(0,hf.jsx)(pf,{name:"NEXT",static:!0,disabled:!(u&&/\S/.test(u)),press:function(){c.makeNickname(u),n(yr(c.playerId)),n(_r(c.nickname))}})})]})]})};var Nd=function(){var e=be(),n=null===e||void 0===e?void 0:e.error,r=S((0,t.useState)(""),2),i=r[0],o=r[1];return(0,t.useEffect)((function(){switch(n){case"invalid-pin":o("The session you are trying to join does not exist!");break;case"session-started":o("The session you are trying to join has already started!");break;default:o("404 Page Not Found")}}),[n]),(0,hf.jsx)("div",{className:vd,children:(0,hf.jsxs)("span",{className:md,children:["ERROR - ",i]})})};var Md=function(){return(0,hf.jsx)("div",{className:vd,children:(0,hf.jsx)("span",{className:md,children:"ERROR - 404 Page Not Found"})})},Dd="Timer_timer_base__eaNr-",Ld="Timer_timer__Oaezr",jd=function(e){var n=_e(),r=e.path,i=1e3*e.timeLength,o=S((0,t.useState)(1e3*e.timeLength),2),a=o[0],s=o[1],u=S((0,t.useState)(Date.now()),2),l=u[0],c=u[1];(0,t.useEffect)((function(){setTimeout((function(){s((function(e){if(e<=0)return setTimeout((function(){n(r)}),100),0;var t=Date.now(),i=t-l;return c(t),e-i}))}),1)}),[a,r,l,n]);return(0,t.useEffect)((function(){s((function(t){var n=t+1e3*e.addTime;return n<=i?n:i}))}),[e.addTime,i]),(0,hf.jsx)("span",{style:{overflow:"hidden"},children:(0,hf.jsx)("div",{className:Dd,children:(0,hf.jsx)("div",{className:Ld,style:{width:"".concat(function(){var e=a/i*100+.8;return.8===e?0:e}(),"vw")}})})})},Ud=function(){var e,t,n,r=dt((function(e){return e.session.round}));switch(dt((function(e){return e.session.activity}))){case"start":t="Get Ready...",n="/Scenario";break;case"discussion":t="Discussion Time...",n="/Discussion";break;case"chaos":t="Adding Chaos...";break;default:t="Get Ready...",n="/"}switch(r){case 1:e="ONE";break;case 2:e="TWO";break;case 3:e="THREE";break;case 4:e="FOUR";break;case 5:e="FIVE"}return(0,hf.jsxs)("div",{className:"App",children:[(0,hf.jsxs)("div",{className:"heading",children:["ROUND ",e]}),(0,hf.jsx)("br",{}),(0,hf.jsx)("div",{className:"subheading",children:t}),(0,hf.jsx)("br",{}),(0,hf.jsx)(jd,{timeLength:"5",addTime:"0",path:n})]})},Fd=[{type:1,scenarioArray:["A coworker approaches you in tears and claims they are being sexually harassed by their manager.","Shortly after the lockdown is lifted you see your coworker walk in with visible, but faded bruises on their arms and face.","You all like joking around at work but sometimes the jokes can go a little too far. One of your workmates starts to make a joke where he says, \u201cthe last thing you want is a woman talking about rugby\u201d. You look around and see other women looking uncomfortable, matching your feelings."]},{type:2,scenarioArray:["There are rumors about the internal restructuring of the company that would require layoffs, and employees face the pressure of unemployment. Your job is among the jobs that may be terminated. How would you feel in this situation?","You are struggling to balance work and life while working from home. Your workload has increased, from being already high intensity to almost unbearable. You are feeling pressured to put your work above your personal life.","When someone calls in sick, your boss and colleagues comment on how the person needs to harden up. One of your colleagues gets a chronic illness, with others saying mean things behind their back about how many sick days they are taking. You feel annoyed about this, but you are not sure what to do because it seems like everyone at work thinks this way, and you fear rocking the boat."]},{type:3,scenarioArray:["You are talking to Joe and suddenly, he grabs his left arm and drops on the floor. You look around, there are only a few people there because most people have finished work for the day.","Someone in the workplace has an infectious disease. You were told this by a friend, this is personal information that should not have been shared with you, however, you are very worried about them spreading the disease around the workplace.","Your colleague had a long lunch and had too many beers. Throwing things and raging around the office."]}],Bd=function(e){var t=e.value,n=e.disabled,r=e.onChange,i=e.placeholder,o=e.maxLength;return(0,hf.jsx)(hf.Fragment,{children:(0,hf.jsx)("form",{children:(0,hf.jsx)("textarea",{className:df,id:"gamePin",type:"text",value:t,disabled:n,onChange:r,placeholder:i,maxLength:o})})})},zd=function(){var e=dt((function(e){return e.session.nickname})),t=dt((function(e){return e.session.round})),n=dt((function(e){return e.session.numRounds}));return(0,hf.jsxs)(hf.Fragment,{children:[(0,hf.jsx)("div",{className:"name",children:e.toUpperCase()}),(0,hf.jsxs)("div",{className:"round",children:["ROUND ",t,"/",n]})]})},qd="ScenarioPage_page__zYfi1",Hd="ScenarioPage_header__JOPsm",Wd="ScenarioPage_subheader__9V0Ow",Gd="ScenarioPage_subtitle__sGUIk",Vd="ScenarioPage_content__R4WUs",Kd="ScenarioPage_scenario__fC9J6",Qd="ScenarioPage_prompt__EGyQM",$d="ScenarioPage_container__K5iEC",Jd="ScenarioPage_buttons__nbgyD";var Yd=function(){var e=dt((function(e){return e.session.gamePin})),n=dt((function(e){return e.session.round})),r=dt((function(e){return e.session.playerId}));dt((function(e){return e.session.isHost})),wt()(wr("discussion"));var i=S((0,t.useState)(""),2),o=i[0],a=i[1];(0,t.useEffect)((function(){var e=Math.floor(3*Math.random())+1,t=Math.floor(2*Math.random()),n=Fd.find((function(t){return t.type===e}));s.publish("Set Scenario",{text:n.scenarioArray[t]})}),[]);var s=S(kf(e+"",(function(e){"Set Scenario"===e.name&&a(e.data.text)})),1)[0],u=S((0,t.useState)(!1),2),l=u[0],c=u[1],f=S((0,t.useState)(!1),2),d=f[0],h=f[1],p=S((0,t.useState)(""),2),v=p[0],m=p[1],g=function(){$c(Kc(uf,"lobby-".concat(e,"/responses/round-").concat(n,"/").concat(r)),{response:v})},y=S((0,t.useState)(),2),_=(y[0],y[1]),b=Kc(uf,"lobby-"+e+"/responseTime");return(0,t.useEffect)((function(){ef(b,(function(e){var t=e.val();null!==t&&_(t)}))}),[b]),(0,hf.jsxs)("div",{className:qd,children:[(0,hf.jsxs)("div",{className:Hd,children:[(0,hf.jsx)("div",{className:Wd,children:(0,hf.jsx)(zd,{})}),(0,hf.jsx)(jd,{timeLength:15,addTime:"0",path:"/Bridge"})]}),(0,hf.jsxs)("div",{className:Vd,children:[(0,hf.jsx)("div",{className:Jd,children:(0,hf.jsx)(pf,{name:l?"\u2713":"SUBMIT",static:!1,press:function(){c(!0),h(!0),g()},disabled:l})}),(0,hf.jsxs)("div",{className:$d,children:[(0,hf.jsx)("div",{className:Gd,children:"SCENARIO"}),(0,hf.jsx)("div",{className:Kd,children:o}),(0,hf.jsx)("div",{className:Qd,children:"What do you do...?"}),(0,hf.jsx)(Bd,{placeholder:"Enter Response...",disabled:d,onChange:function(e){return m(e.target.value)}})]})]})]})},Xd="DiscussionPage_page__ugJ3C",Zd="DiscussionPage_header__X2zgx",eh="DiscussionPage_subheader__bIsb4",th="DiscussionPage_subtitle__Mof7y",nh="DiscussionPage_discussion__BdJoS",rh="DiscussionPage_completion__VAo6A",ih="DiscussionPage_response__9Nov8",oh="DiscussionPage_container__Dv7gG",ah="DiscussionPage_buttons__h5+rJ",sh="DiscussionPage_button_spacer__KEODy",uh="DiscussionPage_div_spacer__7UtvJ";var lh=function(){var e=dt((function(e){return e.session.gamePin})),n=dt((function(e){return e.session.isHost})),r=dt((function(e){return e.session.round})),i=dt((function(e){return e.session.ablyUsers})),o=S((0,t.useState)([]),2),a=o[0],s=o[1],l=S((0,t.useState)(0),2),c=l[0],f=l[1],d=S((0,t.useState)(""),2),h=d[0],p=d[1],v=S((0,t.useState)(""),2),m=v[0],g=v[1],y=S((0,t.useState)(""),2),_=y[0],b=y[1];(0,t.useEffect)((function(){if(n)for(var t=0;t<i.length;t++){ef(Kc(uf,"lobby-".concat(e,"/responses/round-").concat(r,"/").concat(i[t],"/response")),(function(e){null!=e.val()&&s((function(t){return[].concat(u(t),[e.val()])}))}),{onlyOnce:!0})}}),[]);var w=function(){c<a.length-1?f(c+1):f(0),k.publish("Set Text",{text:a[c]}),k.publish("Set Current",{text:c+1}),k.publish("Set Max",{text:a.length})},k=S(kf(e+"",(function(e){"Set Text"===e.name&&p(e.data.text),"Set Current"===e.name&&g(e.data.text),"Set Max"===e.name&&b(e.data.text),"Add Time"===e.name&&O(E+5)})),1)[0];(0,t.useEffect)((function(){k.publish("Set Text",{text:a[0]}),w()}),[k,a]);var C=S((0,t.useState)(0),2),E=C[0],O=C[1],x=Kc(uf,"lobby-"+e+"/discussionTime"),T=S((0,t.useState)(),2),R=(T[0],T[1]);(0,t.useEffect)((function(){ef(x,(function(e){var t=e.val();null!==t&&R(t)}))}),[x]);var I=S((0,t.useState)(!1),2),P=I[0],A=I[1],N=(0,hf.jsxs)("div",{className:ah,children:[(0,hf.jsx)(pf,{name:"NEXT",static:!1,press:w}),(0,hf.jsx)("div",{className:sh}),(0,hf.jsx)(pf,{name:"ADD TIME",static:!1,press:function(){k.publish("Add Time",{text:"true"}),A(!0)},disabled:P})]});return(0,hf.jsxs)("div",{className:Xd,children:[(0,hf.jsxs)("div",{className:Zd,children:[(0,hf.jsx)("div",{className:eh,children:(0,hf.jsx)(zd,{})}),(0,hf.jsx)(jd,{timeLength:5,addTime:E,path:"/Voting"})]}),(0,hf.jsx)("div",{className:uh}),(0,hf.jsxs)("div",{className:nh,children:[n?N:null,(0,hf.jsxs)("div",{className:oh,children:[(0,hf.jsx)("div",{className:rh,children:n&&0===a.length?"":"".concat(m,"/").concat(_)}),(0,hf.jsx)("div",{className:th,children:"DISCUSSION"}),(0,hf.jsx)("div",{className:ih,children:h})]})]})]})},ch="VotingPage_card__V5tfr",fh="VotingPage_buttons__fFnr7",dh="VotingPage_page__Ci6Jr",hh="VotingPage_header__Xpr+F",ph="VotingPage_subheader__XwQl2",vh="VotingPage_subtitle__t7Svz",mh="VotingPage_container__CwamT",gh="VotingPage_carouselContainer__Au79F",yh="VotingPage_carousel__s6utZ",_h="VotingPage_button_spacer__h3sXW",bh=function(e){return(0,hf.jsx)("div",{className:ch,tabIndex:0,children:e.response})},wh=function(){var e=dt((function(e){return e.session.isHost})),n=dt((function(e){return e.session.round})),r=dt((function(e){return e.session.gamePin})),i=dt((function(e){return e.session.ablyUsers})),o=S((0,t.useState)([]),2),a=o[0],s=o[1];(0,t.useEffect)((function(){for(var e=function(e){ef(Kc(uf,"lobby-".concat(r,"/responses/round-").concat(n,"/").concat(i[e],"/response")),(function(t){s((function(e){return[].concat(u(e),[t.val()])})),console.log("Added response from User: "+i[e]+", Response: "+t.val())}),{onlyOnce:!0})},t=0;t<i.length;t++)e(t)}),[]);var l=(0,hf.jsxs)("div",{className:fh,children:[(0,hf.jsx)(pf,{name:"VOTE",static:!1}),(0,hf.jsx)("div",{className:_h}),(0,hf.jsx)(pf,{name:"SKIP",static:!1})]}),c=(0,hf.jsxs)("div",{className:fh,children:[(0,hf.jsx)(pf,{name:"VOTE",static:!1}),(0,hf.jsx)("div",{className:_h}),(0,hf.jsx)(pf,{name:"SKIP",static:!1})]});return(0,hf.jsxs)("div",{className:dh,children:[(0,hf.jsxs)("div",{className:hh,children:[(0,hf.jsx)("div",{className:ph,children:(0,hf.jsx)(zd,{})}),(0,hf.jsx)(jd,{})]}),(0,hf.jsx)("div",{className:mh,children:(0,hf.jsx)("div",{className:vh,children:"TAKE A VOTE"})}),(0,hf.jsx)("div",{className:gh,children:(0,hf.jsx)("div",{className:yh,children:a.map((function(e){return(0,hf.jsx)(bh,{response:e})}))})}),e?c:l]})},kh="Tutorial_page__FtxHN",Ch="Tutorial_chevron__ZzL24",Sh="Tutorial_welcome__lT8EZ",Eh="Tutorial_title__jZw39",Oh="Tutorial_text__QmbUv",xh="Tutorial_image__veUdR",Th="Tutorial_image_wrapper__323Ax",Rh="Tutorial_header__OrE+a",Ih="Tutorial_subtitle__vnJ00",Ph="Tutorial_skip__HVxSy",Ah=Object.defineProperty,Nh=Object.defineProperties,Mh=Object.getOwnPropertyDescriptors,Dh=Object.getOwnPropertySymbols,Lh=Object.prototype.hasOwnProperty,jh=Object.prototype.propertyIsEnumerable,Uh=Math.pow,Fh=function(e,t,n){return t in e?Ah(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Bh=function(e,t){for(var n in t||(t={}))Lh.call(t,n)&&Fh(e,n,t[n]);if(Dh){var r,i=E(Dh(t));try{for(i.s();!(r=i.n()).done;){n=r.value;jh.call(t,n)&&Fh(e,n,t[n])}}catch(o){i.e(o)}finally{i.f()}}return e},zh=function(e,t){return Nh(e,Mh(t))},qh=function(e,t,n,r,i,o,a,s,u,l,c){var f=null!=c?c:function(e,t){return"".concat(t?100/(3*e):100/e,"%")}(e,r),d=n?1:0,h="fade"===o?200:500,p="auto";return u&&(p=l?"100%":n?"auto":"0"),{width:f,height:p,padding:"0 ".concat(i?i/2:0,"px"),transition:o?"".concat(a||h,"ms ease 0s"):void 0,transform:"zoom"===o?"scale(".concat(t&&n?1:s||.85,")"):void 0,opacity:"fade"===o?d:1}},Hh=function(e){var n,r=e.count,i=e.children,o=e.index,a=e.isCurrentSlide,s=e.typeOfSlide,u=e.wrapAround,l=e.cellSpacing,c=e.slideWidth,f=e.animation,d=e.speed,h=e.zoomScale,p=e.onVisibleSlideHeightChange,v=e.adaptiveHeight,m=e.initializedAdaptiveHeight,g=e.updateIOEntry,y=e.id,_=e.carouselRef,b=u?function(e,t,n){return"prev-cloned"===n?e-t:"next-cloned"===n?e+t:e}(o,r,s):o,w=(0,t.useRef)(null),k=function(e,n,r){var i=S((0,t.useState)(),2),o=i[0],a=i[1],s=(0,t.useRef)(r);return(0,t.useEffect)((function(){s.current=r}),[r]),(0,t.useEffect)((function(){var t=null==e?void 0:e.current,r=null==n?void 0:n.current;if(window.IntersectionObserver&&t&&r){var i=new IntersectionObserver((function(e){e.forEach((function(e){a(e),s.current(e)}))}),{threshold:[.05,.95],root:r});return i.observe(t),function(){return i.disconnect()}}}),[e,n]),o}(w,_,(function(e){g(y,(null==e?void 0:e.intersectionRatio)>=.95)})),C=!!(null==k?void 0:k.isIntersecting),E=(null!=(n=null==k?void 0:k.intersectionRatio)?n:1)>=.95,O=(0,t.useRef)(!1);(0,t.useEffect)((function(){var e,t=w.current;if(t){var n=null==(e=t.getBoundingClientRect())?void 0:e.height,r=O.current;C&&!r?p(b,n):!C&&r&&p(b,null),O.current=C}}),[b,C,p]);var x=a&&E?" slide-current":"";return(0,hf.jsx)("div",zh(Bh({ref:w},{inert:E?void 0:"true"}),{className:"slide".concat(x).concat(s?" ".concat(s):"").concat(E?" slide-visible":""),style:qh(r,a,E,u,l,f,d,h,v,m,c),children:i}))},Wh={position:"absolute",width:"1px",height:"1px",overflow:"hidden",padding:0,margin:"-1px",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0},Gh=function(e){var t=e.message,n=e.ariaLive,r=void 0===n?"polite":n;return(0,hf.jsx)("div",{"aria-live":r,"aria-atomic":"true",style:Wh,tabIndex:-1,children:t})},Vh=function(e,t,n,r,i,o,a){return t?n+i:n>=r-1||"left"===a&&n>=r-o?n:"remainder"===e&&"left"===a?Math.min(n+i,r-o):Math.min(n+i,r-1)},Kh=function(e,t,n,r,i,o){return t?n-r:n<=0||"right"===o&&n<=i-1?n:"remainder"===e&&"right"===o?Math.max(n-r,i-1):Math.max(n-r,0)},Qh=function(e,t){return(e%t+t)%t},$h=function(e){return{border:0,background:"rgba(0,0,0,0.4)",color:"white",padding:10,textTransform:"uppercase",opacity:e?.3:1,cursor:e?"not-allowed":"pointer"}},Jh=function(e){var t=e.previousSlide,n=e.defaultControlsConfig,r=n.prevButtonClassName,i=n.prevButtonStyle,o=void 0===i?{}:i,a=n.prevButtonText,s=n.prevButtonOnClick,u=e.onUserNavigation,l=e.previousDisabled;return(0,hf.jsx)("button",{className:r,style:Bh(Bh({},$h(l)),o),disabled:l,onClick:function(e){null==s||s(e),e.defaultPrevented||(u(e),e.preventDefault(),t())},"aria-label":"previous",type:"button",children:a||"Prev"})},Yh=function(e){var t=e.nextSlide,n=e.defaultControlsConfig,r=n.nextButtonClassName,i=n.nextButtonStyle,o=void 0===i?{}:i,a=n.nextButtonText,s=n.nextButtonOnClick,u=e.nextDisabled,l=e.onUserNavigation;return(0,hf.jsx)("button",{className:r,style:Bh(Bh({},$h(u)),o),disabled:u,onClick:function(e){null==s||s(e),e.defaultPrevented||(l(e),e.preventDefault(),t())},"aria-label":"next",type:"button",children:a||"Next"})},Xh=function(e,t,n,r,i,o){var a=[],s=t<=0?1:t;if(i){for(var u=0;u<e;u+=s)a.push(u);return a}if("center"===o){for(var l=0;l<e-1;l+=s)a.push(l);return e>0&&a.push(e-1),a}if("left"===o){if(r>=e)return[0];for(var c=e-r,f=0;f<c;f+=s)a.push(f);return"remainder"===n?a.push(c):a.push(a[a.length-1]+s),a}if("right"===o){if(r>=e)return[e-1];var d=r-1;if("remainder"===n){for(var h=d;h<e-1;h+=s)a.push(h);a.push(e-1)}else{for(var p=e-1;p>d;p-=s)a.push(p);a.push(a[a.length-1]-s),a.reverse()}return a}return a},Zh=function(e){var n=e.pagingDotsIndices,r=e.defaultControlsConfig,i=r.pagingDotsContainerClassName,o=r.pagingDotsClassName,a=r.pagingDotsStyle,s=void 0===a?{}:a,u=r.pagingDotsOnClick,l=e.currentSlide,c=e.onUserNavigation,f=e.slideCount,d=e.goToSlide,h=(0,t.useCallback)((function(e){return{cursor:"pointer",opacity:e?1:.5,background:"transparent",border:"none",fill:"black"}}),[]),p=Qh(l,f);return(0,hf.jsx)("ul",{className:i,style:{position:"relative",top:-10,display:"flex",margin:0,padding:0,listStyleType:"none"},children:n.map((function(e,t){var r=p===e||p<e&&(0===t||p>n[t-1]);return(0,hf.jsx)("li",{className:r?"paging-item active":"paging-item",children:(0,hf.jsx)("button",{className:o,type:"button",style:Bh(Bh({},h(r)),s),onClick:function(t){null==u||u(t),t.defaultPrevented||(c(t),d(e))},"aria-label":"slide ".concat(e+1," bullet"),"aria-selected":r,children:(0,hf.jsx)("svg",{className:"paging-dot",width:"6",height:"6","aria-hidden":"true",focusable:"false",viewBox:"0 0 6 6",children:(0,hf.jsx)("circle",{cx:"3",cy:"3",r:"3"})})})},e)}))})},ep=function(e,t,n,r,i){var o=i?3*t:t,a=100/o,s=i?-100/3:0;"right"===r&&n>1&&(s+=a*(n-1));"center"===r&&n>1&&(s+=a*((n-1)/2));return s-100/o*e},tp=t.forwardRef((function(e,n){var r=e.animation,i=e.animationDistance,o=e.cellAlign,a=e.children,s=e.currentSlide,u=e.disableAnimation,l=e.disableEdgeSwiping,c=e.draggedOffset,f=e.easing,d=e.edgeEasing,h=e.isDragging,p=e.scrollMode,v=e.slideCount,m=e.slidesToScroll,g=e.slidesToShow,y=e.speed,_=e.wrapAround,b=e.slideWidth,w=e.setIsAnimating,k=_?3*v:v,C=b?"calc(".concat(b," * ").concat(k,")"):"".concat(100*k/g,"%"),E=[v,g,o,_],O=Xh(v,m,p,g,_,o),x="".concat(c,"px");if(h&&l&&!_){var T=[O[0],O[O.length-1]].map((function(e){return ep.apply(void 0,[e].concat(E))}));x="clamp(".concat(T[1],"%, ").concat(c,"px, ").concat(T[0],"%)")}var R,I=ep.apply(void 0,[s].concat(E)),P=function(e,n,r,i){var o=S((0,t.useState)(1),2),a=o[0],s=o[1],u=(0,t.useRef)(Date.now()),l=(0,t.useRef)(),c=(0,t.useRef)(!0),f=(0,t.useRef)(null),d=null===f.current||f.current===r||i?a:0;return(0,t.useEffect)((function(){if(f.current=r,c.current)c.current=!1;else if(!i)return u.current=Date.now(),s(0),function t(){l.current=requestAnimationFrame((function(){var n=Date.now(),r=Math.min(1,(n-u.current)/e);s(r),r<1?t():l.current=void 0}))}(),function(){void 0!==l.current&&(cancelAnimationFrame(l.current),s(1))}}),[r,e,i]),{isAnimating:1!==d,value:n(d)}}(y,!l&&!_&&(s===O[0]&&i<0||s===O[O.length-1]&&i>0)?d:f,s+i,h||u||"fade"===r),A=P.value,N=P.isAnimating;if(h||0!==I||N)if(h)R="translateX(".concat(x,")");else{var M=N?(1-A)*i:0;R="translateX(calc(".concat(I,"% - ").concat(M,"px))")}return(0,t.useEffect)((function(){w(N)}),[N,w]),(0,hf.jsx)("div",{ref:n,className:"slider-list",style:{width:C,textAlign:"left",userSelect:"auto",transform:R,display:"flex"},children:a})}));tp.displayName="SliderList";var np={position:"absolute",display:"flex",zIndex:1,top:0,left:0,bottom:0,right:0},rp=[{funcName:"renderTopLeftControls",key:"TopLeft"},{funcName:"renderTopCenterControls",key:"TopCenter"},{funcName:"renderTopRightControls",key:"TopRight"},{funcName:"renderCenterLeftControls",key:"CenterLeft"},{funcName:"renderCenterCenterControls",key:"CenterCenter"},{funcName:"renderCenterRightControls",key:"CenterRight"},{funcName:"renderBottomLeftControls",key:"BottomLeft"},{funcName:"renderBottomCenterControls",key:"BottomCenter"},{funcName:"renderBottomRightControls",key:"BottomRight"}],ip=function(e,n,r,i,o,a,s){if(e.withoutControls)return null;var u=zh(Bh({},e),{currentSlide:r,slideCount:n}),l=function(e){var t=e.cellAlign,n=e.currentSlide,r=e.slideCount,i=e.slidesToShow;return!e.wrapAround&&(n>=r-1||"left"===t&&n>=r-i)}(u),c=function(e){var t=e.cellAlign,n=e.currentSlide,r=e.slidesToShow;return!e.wrapAround&&(0===n||"right"===t&&n<=r-1)}(u),f=Xh(n,s,e.scrollMode,e.slidesToShow,e.wrapAround,e.cellAlign);return rp.map((function(u){var d,h;return e[u.funcName]&&"function"===typeof e[u.funcName]?(0,hf.jsx)("div",{style:zh(Bh({},(h=u.key,Bh(Bh({},function(e){var t,n;switch(e){case"TopLeft":case"TopCenter":case"TopRight":t="flex-start";break;case"CenterLeft":case"CenterCenter":case"CenterRight":t="center";break;case"BottomLeft":case"BottomCenter":case"BottomRight":t="flex-end"}switch(e){case"TopLeft":case"CenterLeft":case"BottomLeft":n="flex-start";break;case"TopCenter":case"CenterCenter":case"BottomCenter":n="center";break;case"TopRight":case"CenterRight":case"BottomRight":n="flex-end"}return{alignItems:t,justifyContent:n}}(h)),np))),{pointerEvents:"none"}),children:(0,hf.jsx)("div",{className:["slider-control-".concat(u.key.toLowerCase()),e.defaultControlsConfig.containerClassName||""].join(" ").trim(),style:{pointerEvents:"auto"},children:null==(d=e[u.funcName])?void 0:d.call(e,{cellAlign:e.cellAlign,cellSpacing:e.cellSpacing,currentSlide:r,defaultControlsConfig:e.defaultControlsConfig||{},pagingDotsIndices:f,goToSlide:i,nextDisabled:l,nextSlide:o,onUserNavigation:e.onUserNavigation,previousDisabled:c,previousSlide:a,scrollMode:e.scrollMode,slideCount:n,slidesToScroll:s,slidesToShow:e.slidesToShow||1,vertical:e.vertical,wrapAround:e.wrapAround})})},u.funcName):(0,hf.jsx)(t.Fragment,{},u.funcName)}))},op=function(e){return Uh(e-1,3)+1},ap={adaptiveHeight:!1,adaptiveHeightAnimation:!0,afterSlide:function(){},autoplay:!1,autoplayInterval:3e3,autoplayReverse:!1,beforeSlide:function(){},cellAlign:"left",cellSpacing:0,defaultControlsConfig:{},disableAnimation:!1,disableEdgeSwiping:!1,dragging:!0,dragThreshold:.5,easing:op,edgeEasing:op,enableKeyboardControls:!1,frameAriaLabel:"carousel-slider",keyCodeConfig:{nextSlide:[39,68,38,87],previousSlide:[37,65,40,83],firstSlide:[81],lastSlide:[69],pause:[32]},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onUserNavigation:function(){},pauseOnHover:!0,renderAnnounceSlideMessage:function(e){var t=e.currentSlide,n=e.count;return"Slide ".concat(t+1," of ").concat(n)},renderBottomCenterControls:function(e){return(0,hf.jsx)(Zh,Bh({},e))},renderCenterLeftControls:function(e){return(0,hf.jsx)(Jh,Bh({},e))},renderCenterRightControls:function(e){return(0,hf.jsx)(Yh,Bh({},e))},scrollMode:"page",slidesToScroll:1,slidesToShow:1,speed:500,style:{},swiping:!0,vertical:!1,withoutControls:!1,wrapAround:!1,children:(0,hf.jsx)(hf.Fragment,{})},sp=function(e,n,r){var i=function(e){var n=S((0,t.useState)(e),2),r=n[0],i=n[1],o=(0,t.useRef)(e);return[r,(0,t.useCallback)((function(e){o.current=e,i(e)}),[]),o]}([]),o=S(i,3),a=o[0],s=o[1],l=o[2],c=S((0,t.useState)(!1),2),f=c[0],d=c[1];return{handleVisibleSlideHeightChange:(0,t.useCallback)((function(e,t){var i,o=l.current;i=null===t?o.filter((function(t){return t.slideIndex!==e})):[].concat(u(o),[{slideIndex:e,height:t}]),s(i),i.length>=Math.min(r,Math.ceil(n))&&d(!0)}),[r,s,n,l]),frameHeight:(0,t.useMemo)((function(){if(e){if(!f)return"auto";var t=Math.max.apply(Math,[0].concat(u(a.map((function(e){return e.height})))));return"".concat(t,"px")}return"auto"}),[e,f,a]),initializedAdaptiveHeight:f}},up=t.forwardRef((function(e,n){var r=e,i=r.adaptiveHeight,o=r.adaptiveHeightAnimation,a=r.afterSlide,s=r.animation,u=r.autoplay,l=r.autoplayInterval,c=r.autoplayReverse,f=r.beforeSlide,d=r.cellAlign,h=r.cellSpacing,p=r.children,v=r.className,m=r.disableAnimation,g=r.dragging,y=r.dragThreshold,_=r.enableKeyboardControls,b=r.frameAriaLabel,w=r.keyCodeConfig,k=r.onDrag,C=r.onDragEnd,E=r.onDragStart,O=r.onUserNavigation,x=r.pauseOnHover,T=r.renderAnnounceSlideMessage,R=r.scrollMode,I=r.slideIndex,P=r.slidesToScroll,A=r.slidesToShow,N=r.slideWidth,M=r.speed,D=r.style,L=r.swiping,j=r.wrapAround,U=r.zoomScale,F=t.Children.toArray(p).filter(Boolean),B=F.length,z=N||"auto"===P?"left":d,q="auto"===P?"remainder":R,H=S((0,t.useState)(new Map),2),W=H[0],G=H[1],V=Array.from(W).filter((function(e){return S(e,2)[1]})).length,K=S((0,t.useState)(V),2),Q=K[0],$=K[1],J=N?Q:A,Y="fade"===s?J:"auto"===P?Math.max(Q,1):P,X=(0,t.useState)((function(){return function(e,t,n,r,i,o,a){if(void 0!==e)return e;var s=Xh(t,r,a,n,!1,i);return o?s[s.length-1]:s[0]}(I,B,J,Y,z,c,q)})),Z=S(X,2),ee=Z[0],te=Z[1],ne=S((0,t.useState)(!1),2),re=ne[0],ie=ne[1],oe=S((0,t.useState)(!1),2),ae=oe[0],se=oe[1],ue=S((0,t.useState)(0),2),le=ue[0],ce=ue[1],fe=S((0,t.useState)(0),2),de=fe[0],he=fe[1],pe=S((0,t.useState)(!1),2),ve=pe[0],me=pe[1],ge=(0,t.useCallback)((function(e,t){!!W.get(e)!==t&&G((function(n){var r=new Map(n);return r.set(e,t),r}))}),[W]),ye=(0,t.useRef)(!1);(0,t.useEffect)((function(){ae&&(ye.current=!0),ae||ve||(ye.current||$(V),ye.current=!1)}),[ve,ae,V]);var _e=(0,t.useRef)(null),be=(0,t.useRef)(0),we=(0,t.useRef)(null),ke=(0,t.useRef)(null),Ce=(0,t.useRef)(),Se=(0,t.useRef)(null),Ee=(0,t.useRef)(!0),Oe=(0,t.useCallback)((function(e){e&&e.querySelectorAll(".slider-list img").forEach((function(e){return e.setAttribute("draggable","false")})),we.current=e}),[]);(0,t.useEffect)((function(){return Ee.current=!0,function(){Ee.current=!1}}),[]);var xe=function(e){var n=(0,t.useRef)(null);return(0,t.useEffect)((function(){e&&("function"===typeof e?e(n.current):e.current=n.current)}),[e]),n}(n),Te=xe||ke,Re=(0,t.useCallback)((function(e){if(we.current&&Te.current){var t=Qh(e,B),n=e!==ee;n&&f(ee,t);var r=we.current.getBoundingClientRect().left-Te.current.getBoundingClientRect().left,i=we.current.offsetWidth,o=ep(t,B,J,z,j)/100*i;if(j){var s=i/3;e<0&&(o+=s),e>=B&&(o-=s)}if(he(o-r),n)te(t),setTimeout((function(){Ee.current&&a(t)}),m?40:M||500)}}),[a,f,Te,z,ee,m,M,B,J,j]),Ie=(0,t.useCallback)((function(){var e=Vh(q,j,ee,B,Y,J,z);ee!==e&&Re(e)}),[z,ee,Re,Y,q,B,J,j]),Pe=(0,t.useCallback)((function(){var e=Kh(q,j,ee,Y,J,z);ee!==e&&Re(e)}),[z,ee,Re,Y,q,J,j]),Ae=(0,t.useRef)(I);(0,t.useEffect)((function(){void 0===I||I===Ae.current||c||(Re(I),Ae.current=I)}),[I,c,Re]),(0,t.useEffect)((function(){var e=null;return re&&(e=Date.now()),function(){null!==e&&null!==Se.current&&(Se.current+=Date.now()-e)}}),[re]),(0,t.useEffect)((function(){if(u&&!re){var e=null!==Se.current?l-(Date.now()-Se.current):l;Ce.current=setTimeout((function(){Se.current=Date.now(),c?Pe():Ie()}),e)}return u&&re&&clearTimeout(Ce.current),function(){clearTimeout(Ce.current)}}),[re,u,l,c,Pe,Ie]);var Ne=(0,t.useRef)([]),Me=function(e){if(ae&&Te.current){se(!1);var t=0;if(Ne.current.length>1)for(var n=Ne.current[0],r=Ne.current[Ne.current.length-1],i=r.time-n.time,o=9*Math.abs((r.pos-n.pos)/i);Math.abs(o)>1;)t+=o,o*=.92;Ne.current=[];var a=Math.abs(le)+Math.abs(t);C(e),_e.current=null,ce(0);var s=Te.current.offsetWidth*Math.min(1,Y/J),u=s*y;if(a<u)Re(ee);else{for(var l=J>=2*Y?1+Math.floor((a-u)/s):1,c=ee,f=0;f<l;f+=1)c=le>0?Vh(q,j,c,B,Y,J,z):Kh(q,j,c,Y,J,z);c!==ee&&O(e),Re(c)}}},De=(0,t.useCallback)((function(e){L&&we.current&&Te.current&&(se(!0),be.current=we.current.getBoundingClientRect().left-Te.current.getBoundingClientRect().left,E(e))}),[Te,E,L]),Le=(0,t.useCallback)((function(e){if(ae){for(var t=null===_e.current,n=null!==_e.current?e-_e.current:0,r=le+n,i=Date.now();Ne.current.length>0&&!(i-Ne.current[0].time<=100);)Ne.current.shift();Ne.current.push({pos:r,time:i}),t||ce(r),_e.current=e}}),[ae,le]),je=(0,t.useCallback)((function(e){if(ae&&Te.current){E(e);var t=Te.current.offsetWidth-e.touches[0].pageX;Le(t)}}),[ae,Te,Le,E]),Ue=(0,t.useCallback)((function(e){g&&we.current&&Te.current&&(se(!0),be.current=we.current.getBoundingClientRect().left-Te.current.getBoundingClientRect().left,E(e))}),[Te,g,E]),Fe=(0,t.useCallback)((function(e){if(ae&&Te.current){k(e);var t=e.clientX-Te.current.getBoundingClientRect().left,n=Te.current.offsetWidth-t;Le(n)}}),[Te,ae,Le,k]),Be=function(e){e.preventDefault(),Me(e)},ze=(0,t.useCallback)((function(){x&&ie(!0)}),[x]),qe=(0,t.useCallback)((function(){x&&ie(!1)}),[x]),He=sp(i,J,B),We=He.frameHeight,Ge=He.handleVisibleSlideHeightChange,Ve=He.initializedAdaptiveHeight,Ke=function(e){return F.map((function(t,n){return(0,hf.jsx)(Hh,{id:"".concat(e,"-").concat(n),count:B,index:n,isCurrentSlide:ee===n,typeOfSlide:e,wrapAround:j,cellSpacing:h,animation:s,speed:M,zoomScale:U,onVisibleSlideHeightChange:Ge,slideWidth:N,updateIOEntry:ge,adaptiveHeight:i,initializedAdaptiveHeight:Ve,carouselRef:Te,children:t},"".concat(e,"-").concat(n))}))};return(0,hf.jsxs)("div",{className:"slider-container",style:{position:"relative"},onMouseEnter:ze,onMouseLeave:qe,children:[(0,hf.jsx)(Gh,{ariaLive:u&&!re?"off":"polite",message:T({currentSlide:ee,count:B})}),ip(r,B,ee,Re,Ie,Pe,Y),(0,hf.jsx)("div",{className:["slider-frame",v||""].join(" ").trim(),style:Bh({overflow:"hidden",width:"100%",position:"relative",outline:"none",touchAction:"pan-y",height:We,transition:o?"height 300ms ease-in-out":void 0,willChange:"height",userSelect:"none"},D),"aria-label":b,role:"region",tabIndex:_?0:-1,onKeyDown:_?function(e){var t=null;if(Object.keys(w).forEach((function(n){var r;(null==(r=w[n])?void 0:r.includes(e.keyCode))&&(t=n)})),null!==t)switch(e.preventDefault(),e.stopPropagation(),t){case"nextSlide":O(e),Ie();break;case"previousSlide":O(e),Pe();break;case"firstSlide":case"lastSlide":O(e);var n=Xh(B,Y,q,J,j,z);Re("firstSlide"===t?n[0]:n[n.length-1]);break;case"pause":ie((function(e){return!e}))}}:void 0,ref:Te,onMouseUp:Be,onMouseDown:Ue,onMouseMove:Fe,onMouseLeave:Be,onTouchStart:De,onTouchEnd:Me,onTouchMove:je,children:(0,hf.jsxs)(tp,{animationDistance:de,cellAlign:z,currentSlide:ee,disableEdgeSwiping:r.disableEdgeSwiping,draggedOffset:be.current-le,disableAnimation:m,easing:r.easing,edgeEasing:r.edgeEasing,isDragging:ae,ref:Oe,scrollMode:q,animation:s,slideCount:B,slidesToScroll:Y,slidesToShow:J,speed:M,slideWidth:N,wrapAround:j,setIsAnimating:me,children:[j?Ke("prev-cloned"):null,Ke(),j?Ke("next-cloned"):null]})})]})}));up.defaultProps=ap,up.displayName="Carousel";var lp=n(523),cp=n.n(lp),fp=n.p+"static/media/discussion.93f92a97d9c365c3e4aa.png";var dp=function(){return(0,hf.jsxs)("div",{className:kh,children:[(0,hf.jsx)("div",{className:Th,children:(0,hf.jsx)("img",{src:fp,alt:"alt",className:xh})}),(0,hf.jsx)("p",{className:Eh,children:"DISCUSSION"}),(0,hf.jsxs)("p",{className:Oh,children:[" During the discussion phase, each player's response is read out and the group consider whether it leads to a good outcome or has unintended consequences.",(0,hf.jsx)("br",{}),(0,hf.jsx)("br",{}),"The host can add more time for discussion or skip similar responses."]})]})},hp=n.p+"static/media/scenario.05f7a61b901f94551716.png";var pp=function(){return(0,hf.jsxs)("div",{className:kh,children:[(0,hf.jsx)("div",{className:Th,children:(0,hf.jsx)("img",{src:hp,alt:"alt",className:xh})}),(0,hf.jsx)("p",{className:Eh,children:"SCENARIO"}),(0,hf.jsxs)("p",{className:Oh,children:["In the scenario phase, you'll be presented with a potentially hazardous incident. Think about how you would respond and submit that as your answer.",(0,hf.jsx)("br",{}),(0,hf.jsx)("br",{}),"As the game progresses, later rounds will introduce additional chaos to the scenario, and see how your response changes to adapt to the situation."]})]})},vp=n.p+"static/media/voting.01555d1ee8bb03dd58f3.png";var mp=function(){return(0,hf.jsxs)("div",{className:kh,children:[(0,hf.jsx)("div",{className:Th,children:(0,hf.jsx)("img",{src:vp,alt:"alt",className:xh})}),(0,hf.jsx)("p",{className:Eh,children:"VOTING"}),(0,hf.jsx)("p",{className:Oh,children:"During the voting phase, you can select the response that you found the most valuable. The number of votes each response receives is then displayed, and the submission with the most votes is highlighted."})]})};var gp=function(){return(0,hf.jsx)("div",{className:kh,children:(0,hf.jsxs)("div",{className:Sh,children:[(0,hf.jsx)("p",{className:Eh,children:"WELCOME"}),(0,hf.jsxs)("p",{className:Oh,children:[(0,hf.jsx)("br",{}),"While playing Chaotic, you will take part in exploring different scenarios that lead to health and safety incidents. You and your team will brainstorm responses and devise plans to respond to the situation as scenarios get more and more chaotic!",(0,hf.jsx)("br",{}),(0,hf.jsx)("br",{}),(0,hf.jsx)("strong",{children:"This isn\u2019t a test of your health and safety knowledge"}),", but rather a discussion about what can go wrong, and how we can work on creating better outcomes together."]})]})})};var yp=function(){var e=S((0,t.useState)(window.innerHeight<window.innerWidth),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){var e=function(){r(window.innerHeight<window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,hf.jsxs)(hf.Fragment,{children:[(0,hf.jsxs)("div",{className:Rh,children:[(0,hf.jsx)("div",{className:Ih,children:"Chaotic"}),(0,hf.jsx)("div",{className:Ph,children:"Skip"})]}),(0,hf.jsxs)(up,{slidesToShow:1,defaultControlsConfig:{pagingDotsStyle:{fillOpacity:"0",width:"2.5vh",height:"2.5vh",backgroundColor:"#75A78F",margin:" 0 1.5vh 0",borderRadius:"50%"}},renderCenterLeftControls:function(e){var t=e.previousSlide,r=e.currentSlide;return!1===n||0===r?null:(0,hf.jsx)(cp(),{className:Ch,size:5,path:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",onClick:t})},renderCenterRightControls:function(e){var t=e.nextSlide,r=e.currentSlide;return!1===n||4===r?null:(0,hf.jsx)(cp(),{className:Ch,size:5,path:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",onClick:t})},children:[(0,hf.jsx)(gp,{}),(0,hf.jsx)(pp,{}),(0,hf.jsx)(dp,{}),(0,hf.jsx)(mp,{})]})]})};var _p=function(){return(0,hf.jsx)("div",{children:(0,hf.jsxs)(Le,{children:[(0,hf.jsx)(Me,{path:"/",element:(0,hf.jsx)(mf,{})}),(0,hf.jsx)(Me,{path:"/ChaosApp",element:(0,hf.jsx)(mf,{})}),(0,hf.jsx)(Me,{path:"/Lobby",element:(0,hf.jsx)(Cd,{})}),(0,hf.jsx)(Me,{path:"/SettingsPage",element:(0,hf.jsx)(Id,{})}),(0,hf.jsx)(Me,{path:"/Lobby/link/:pinNumber",element:(0,hf.jsx)(Ad,{})}),(0,hf.jsx)(Me,{path:"/Host",element:(0,hf.jsx)(Ad,{})}),(0,hf.jsx)(Me,{path:"/Error/:error",element:(0,hf.jsx)(Nd,{})}),(0,hf.jsx)(Me,{path:"/404",element:(0,hf.jsx)(Md,{})}),(0,hf.jsx)(Me,{path:"*",element:(0,hf.jsx)(Md,{})}),(0,hf.jsx)(Me,{path:"/Bridge",element:(0,hf.jsx)(Ud,{})}),(0,hf.jsx)(Me,{path:"/Scenario",element:(0,hf.jsx)(Yd,{})}),(0,hf.jsx)(Me,{path:"/Discussion",element:(0,hf.jsx)(lh,{})}),(0,hf.jsx)(Me,{path:"/Voting",element:(0,hf.jsx)(wh,{})}),(0,hf.jsx)(Me,{path:"/TutorialPage",element:(0,hf.jsx)(yp,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var bp=function(e){var t,n=nr(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,u=r.devTools,l=void 0===u||u,c=r.preloadedState,f=void 0===c?void 0:c,d=r.enhancers,h=void 0===d?void 0:d;if("function"===typeof o)t=o;else{if(!Xn(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=An(o)}var p=s;"function"===typeof p&&(p=p(n));var v=Mn.apply(void 0,p),m=Nn;l&&(m=Yn(Qn({trace:!1},"object"===typeof l&&l)));var g=new er(v),y=g;return Array.isArray(h)?y=Bn([v],h):"function"===typeof h&&(y=h(g)),Pn(t,f,m.apply(void 0,y))}({reducer:{session:Or}});i.createRoot(document.getElementById("root")).render((0,hf.jsx)(We,{children:(0,hf.jsx)(mt,{store:bp,children:(0,hf.jsx)(_p,{})})})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}()}();
//# sourceMappingURL=main.3664bf2b.js.map